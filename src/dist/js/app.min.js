function Trade(t,e,r){this.img=null,this.imgSrc=t,this.savedPos=e,this.actualPos=null,this.traders=r,this.percentage=0;for(var a=0;a<this.traders.length;a++)this.percentage+=this.traders[a].totalPercentage*this.traders[a].percentage;this.rad=50+100*this.percentage;var s=this,o=new Image;o.src=this.imgSrc,o.onload=function(){s.img=o}}function Trader(t,e){this.img=null,this.imgSrc=t,this.totalPercentage=e,this.percentage=0,this.actualPos=null;var r=this,a=new Image;a.src=this.imgSrc,a.onload=function(){r.img=a}}Trade.prototype.reverse=function(t){var e=this.actualPos;e=e.subVector(t.offset),e=e.subVector(t.center),e=e.div(t.scale),this.savedPos=e;for(var r=160/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,this.actualPos)}},Trade.prototype.calculate=function(t){var e=this.savedPos;e=e.mul(t.scale),e=e.addVector(t.center),e=e.addVector(t.offset),this.actualPos=e;for(var r=180/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,e)}},Trade.prototype.preDraw=function(t){if(null!==this.img){t.ctx.strokeStyle="#2c3e50",t.ctx.lineWidth=.5*t.scale,t.ctx.beginPath();var e=t.center.addVector(t.offset);t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(this.actualPos.x,this.actualPos.y),t.ctx.stroke(),t.ctx.closePath()}},Trade.prototype.draw=function(t){if(null!==this.img){t.cirImg(this.actualPos.x,this.actualPos.y,this.rad,this.img);for(var e=0;e<this.traders.length;e++)this.traders[e].draw(t)}},Trader.prototype.calculate=function(t,e,r,a){var s=new Vector2D(0,30);s=s.addVector(new Vector2D(0,e)),s=s.mul(t),s=s.rotate(r-90),s=s.addVector(a),this.actualPos=s},Trader.prototype.draw=function(t){null!==this.img&&t.cirImg(this.actualPos.x,this.actualPos.y,25,this.img)};var trades=[],traders=[],logos=["logo0.png","logo1.jpg","logo2.jpg","logo3.png","logo4.png"],people=["trader0.jpg","trader1.jpg","trader2.jpg","trader3.jpg"];!function(){for(var t=0;4>t;t++){var e=.15*Math.random()+.1;traders.push(new Trader("dist/images/"+people[t],e))}for(var r=0;5>r;r++){for(var a=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),s=Math.floor(Math.random()*(window.innerHeight-100)-(window.innerHeight-100)/2),o=Math.floor(4*Math.random()+1),i=[],n=0;o>n;n++){var h=new Trader(traders[n].imgSrc,traders[n].totalPercentage);h.percentage=.4*Math.random()+.1,i.push(h)}trades.push(new Trade("dist/images/"+logos[r],new Vector2D(a,s),i))}for(var c=new Canvas(window.innerWidth,window.innerHeight-100,"trades","#eeeeee",trades),d=0;d<c.objs.length;d++)c.objs[d].calculate(c);c.drawCanvas()}(),function(){"use strict";var t=angular.module("app",["ngRoute"]);t.config(function(t){t.when("/",{templateUrl:"index.html",controller:"headerController"}).otherwise({redirectTo:"index.html"})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwidHJhZGVyLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiVHJhZGUiLCJpbWdTcmMiLCJ2ZWN0b3IiLCJ0cmFkZXJzIiwidGhpcyIsImltZyIsInNhdmVkUG9zIiwiYWN0dWFsUG9zIiwicGVyY2VudGFnZSIsImkiLCJsZW5ndGgiLCJ0b3RhbFBlcmNlbnRhZ2UiLCJyYWQiLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJUcmFkZXIiLCJwcm90b3R5cGUiLCJyZXZlcnNlIiwiYyIsInBvcyIsInN1YlZlY3RvciIsIm9mZnNldCIsImNlbnRlciIsImRpdiIsInNjYWxlIiwiYW5nbGUiLCJhbHBoYSIsImNhbGN1bGF0ZSIsIm11bCIsImFkZFZlY3RvciIsInByZURyYXciLCJjdHgiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsIngiLCJ5IiwibGluZVRvIiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwiZHJhdyIsImNpckltZyIsImZyb20iLCJWZWN0b3IyRCIsInJvdGF0ZSIsInRyYWRlcyIsImxvZ29zIiwicGVvcGxlIiwiaiIsIk1hdGgiLCJyYW5kb20iLCJwdXNoIiwiZmxvb3IiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyIiwicHBsIiwiayIsInQiLCJjYW52YXMiLCJDYW52YXMiLCJsIiwib2JqcyIsImRyYXdDYW52YXMiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBQUEsT0FBQUMsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQUMsSUFBQSxLQUNBRCxLQUFBSCxPQUFBQSxFQUNBRyxLQUFBRSxTQUFBSixFQUNBRSxLQUFBRyxVQUFBLEtBQ0FILEtBQUFELFFBQUFBLEVBQ0FDLEtBQUFJLFdBQUEsQ0FDQSxLQUFBLEdBQUFDLEdBQUEsRUFBQUEsRUFBQUwsS0FBQUQsUUFBQU8sT0FBQUQsSUFDQUwsS0FBQUksWUFBQUosS0FBQUQsUUFBQU0sR0FBQUUsZ0JBQUFQLEtBQUFELFFBQUFNLEdBQUFELFVBRUFKLE1BQUFRLElBQUEsR0FBQSxJQUFBUixLQUFBSSxVQUNBLElBQUFLLEdBQUFULEtBQ0FVLEVBQUEsR0FBQUMsTUFDQUQsR0FBQUUsSUFBQVosS0FBQUgsT0FDQWEsRUFBQUcsT0FBQSxXQUNBSixFQUFBUixJQUFBUyxHQ2ZBLFFBQUFJLFFBQUFqQixFQUFBVSxHQUNBUCxLQUFBQyxJQUFBLEtBQ0FELEtBQUFILE9BQUFBLEVBQ0FHLEtBQUFPLGdCQUFBQSxFQUNBUCxLQUFBSSxXQUFBLEVBQ0FKLEtBQUFHLFVBQUEsSUFDQSxJQUFBTSxHQUFBVCxLQUNBVSxFQUFBLEdBQUFDLE1BQ0FELEdBQUFFLElBQUFaLEtBQUFILE9BQ0FhLEVBQUFHLE9BQUEsV0FDQUosRUFBQVIsSUFBQVMsR0RTQWQsTUFBQW1CLFVBQUFDLFFBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBbEIsS0FBQUcsU0FDQWUsR0FBQUEsRUFBQUMsVUFBQUYsRUFBQUcsUUFDQUYsRUFBQUEsRUFBQUMsVUFBQUYsRUFBQUksUUFDQUgsRUFBQUEsRUFBQUksSUFBQUwsRUFBQU0sT0FDQXZCLEtBQUFFLFNBQUFnQixDQUVBLEtBQUEsR0FEQU0sR0FBQSxLQUFBeEIsS0FBQUQsUUFBQU8sT0FBQSxHQUNBRCxFQUFBLEVBQUFBLEVBQUFMLEtBQUFELFFBQUFPLE9BQUFELElBQUEsQ0FDQSxHQUFBb0IsR0FBQUQsR0FBQW5CLEVBQUEsR0FBQUwsS0FBQUQsUUFBQU8sT0FBQSxHQUFBLEVBQ0FOLE1BQUFELFFBQUFNLEdBQUFxQixVQUFBVCxFQUFBTSxNQUFBdkIsS0FBQVEsSUFBQWlCLEVBQUF6QixLQUFBRyxhQUlBUCxNQUFBbUIsVUFBQVcsVUFBQSxTQUFBVCxHQUNBLEdBQUFDLEdBQUFsQixLQUFBRSxRQUNBZ0IsR0FBQUEsRUFBQVMsSUFBQVYsRUFBQU0sT0FDQUwsRUFBQUEsRUFBQVUsVUFBQVgsRUFBQUksUUFDQUgsRUFBQUEsRUFBQVUsVUFBQVgsRUFBQUcsUUFDQXBCLEtBQUFHLFVBQUFlLENBRUEsS0FBQSxHQURBTSxHQUFBLEtBQUF4QixLQUFBRCxRQUFBTyxPQUFBLEdBQ0FELEVBQUEsRUFBQUEsRUFBQUwsS0FBQUQsUUFBQU8sT0FBQUQsSUFBQSxDQUNBLEdBQUFvQixHQUFBRCxHQUFBbkIsRUFBQSxHQUFBTCxLQUFBRCxRQUFBTyxPQUFBLEdBQUEsRUFDQU4sTUFBQUQsUUFBQU0sR0FBQXFCLFVBQUFULEVBQUFNLE1BQUF2QixLQUFBUSxJQUFBaUIsRUFBQVAsS0FJQXRCLE1BQUFtQixVQUFBYyxRQUFBLFNBQUFaLEdBQ0EsR0FBQSxPQUFBakIsS0FBQUMsSUFBQSxDQUNBZ0IsRUFBQWEsSUFBQUMsWUFBQSxVQUNBZCxFQUFBYSxJQUFBRSxVQUFBLEdBQUFmLEVBQUFNLE1BQ0FOLEVBQUFhLElBQUFHLFdBQ0EsSUFBQVosR0FBQUosRUFBQUksT0FBQU8sVUFBQVgsRUFBQUcsT0FDQUgsR0FBQWEsSUFBQUksT0FBQWIsRUFBQWMsRUFBQWQsRUFBQWUsR0FDQW5CLEVBQUFhLElBQUFPLE9BQUFyQyxLQUFBRyxVQUFBZ0MsRUFBQW5DLEtBQUFHLFVBQUFpQyxHQUNBbkIsRUFBQWEsSUFBQVEsU0FDQXJCLEVBQUFhLElBQUFTLGNBSUEzQyxNQUFBbUIsVUFBQXlCLEtBQUEsU0FBQXZCLEdBQ0EsR0FBQSxPQUFBakIsS0FBQUMsSUFBQSxDQUNBZ0IsRUFBQXdCLE9BQUF6QyxLQUFBRyxVQUFBZ0MsRUFBQW5DLEtBQUFHLFVBQUFpQyxFQUFBcEMsS0FBQVEsSUFBQVIsS0FBQUMsSUFDQSxLQUFBLEdBQUFJLEdBQUEsRUFBQUEsRUFBQUwsS0FBQUQsUUFBQU8sT0FBQUQsSUFDQUwsS0FBQUQsUUFBQU0sR0FBQW1DLEtBQUF2QixLQ2hEQUgsT0FBQUMsVUFBQVcsVUFBQSxTQUFBSCxFQUFBZixFQUFBaUIsRUFBQWlCLEdBQ0EsR0FBQXhCLEdBQUEsR0FBQXlCLFVBQUEsRUFBQSxHQUNBekIsR0FBQUEsRUFBQVUsVUFBQSxHQUFBZSxVQUFBLEVBQUFuQyxJQUNBVSxFQUFBQSxFQUFBUyxJQUFBSixHQUNBTCxFQUFBQSxFQUFBMEIsT0FBQW5CLEVBQUEsSUFDQVAsRUFBQUEsRUFBQVUsVUFBQWMsR0FDQTFDLEtBQUFHLFVBQUFlLEdBR0FKLE9BQUFDLFVBQUF5QixLQUFBLFNBQUF2QixHQUNBLE9BQUFqQixLQUFBQyxLQUNBZ0IsRUFBQXdCLE9BQUF6QyxLQUFBRyxVQUFBZ0MsRUFBQW5DLEtBQUFHLFVBQUFpQyxFQUFBLEdBQUFwQyxLQUFBQyxLQ3pCQSxJQUFBNEMsV0FDQTlDLFdBQ0ErQyxPQUFBLFlBQUEsWUFBQSxZQUFBLFlBQUEsYUFDQUMsUUFBQSxjQUFBLGNBQUEsY0FBQSxnQkFFQSxXQUNBLElBQUEsR0FBQUMsR0FBQSxFQUFBLEVBQUFBLEVBQUFBLElBQUEsQ0FDQSxHQUFBekMsR0FBQSxJQUFBMEMsS0FBQUMsU0FBQSxFQUNBbkQsU0FBQW9ELEtBQUEsR0FBQXJDLFFBQUEsZUFBQWlDLE9BQUFDLEdBQUF6QyxJQUVBLElBQUEsR0FBQUYsR0FBQSxFQUFBLEVBQUFBLEVBQUFBLElBQUEsQ0FLQSxJQUFBLEdBSkE4QixHQUFBYyxLQUFBRyxNQUFBSCxLQUFBQyxTQUFBRyxPQUFBQyxXQUFBRCxPQUFBQyxXQUFBLEdBQ0FsQixFQUFBYSxLQUFBRyxNQUFBSCxLQUFBQyxVQUFBRyxPQUFBRSxZQUFBLE1BQUFGLE9BQUFFLFlBQUEsS0FBQSxHQUNBQyxFQUFBUCxLQUFBRyxNQUFBLEVBQUFILEtBQUFDLFNBQUEsR0FDQU8sS0FDQUMsRUFBQSxFQUFBRixFQUFBRSxFQUFBQSxJQUFBLENBQ0EsR0FBQUMsR0FBQSxHQUFBN0MsUUFBQWYsUUFBQTJELEdBQUE3RCxPQUFBRSxRQUFBMkQsR0FBQW5ELGdCQUNBb0QsR0FBQXZELFdBQUEsR0FBQTZDLEtBQUFDLFNBQUEsR0FDQU8sRUFBQU4sS0FBQVEsR0FFQWQsT0FBQU0sS0FBQSxHQUFBdkQsT0FBQSxlQUFBa0QsTUFBQXpDLEdBQUEsR0FBQXNDLFVBQUFSLEVBQUFDLEdBQUFxQixJQUdBLElBQUEsR0FEQUcsR0FBQSxHQUFBQyxRQUFBUixPQUFBQyxXQUFBRCxPQUFBRSxZQUFBLElBQUEsU0FBQSxVQUFBVixRQUNBaUIsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxLQUFBekQsT0FBQXdELElBQ0FGLEVBQUFHLEtBQUFELEdBQUFwQyxVQUFBa0MsRUFFQUEsR0FBQUksZ0JDMUJBLFdBQ0EsWUFFQSxJQUFBQyxHQUFBQyxRQUFBQyxPQUFBLE9BQUEsV0FFQUYsR0FBQUcsT0FBQSxTQUFBQyxHQUNBQSxFQUNBQyxLQUFBLEtBQ0FDLFlBQUEsYUFDQUMsV0FBQSxxQkFFQUMsV0FDQUMsV0FBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gVHJhZGUoaW1nU3JjLCB2ZWN0b3IsIHRyYWRlcnMpIHtcbiAgICB0aGlzLmltZyA9IG51bGw7XG4gICAgdGhpcy5pbWdTcmMgPSBpbWdTcmM7XG4gICAgdGhpcy5zYXZlZFBvcyA9IHZlY3RvcjtcbiAgICB0aGlzLmFjdHVhbFBvcyA9IG51bGw7XG4gICAgdGhpcy50cmFkZXJzID0gdHJhZGVycztcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5wZXJjZW50YWdlICs9IHRoaXMudHJhZGVyc1tpXS50b3RhbFBlcmNlbnRhZ2UgKiB0aGlzLnRyYWRlcnNbaV0ucGVyY2VudGFnZTtcbiAgICB9XG4gICAgdGhpcy5yYWQgPSA1MCArICh0aGlzLnBlcmNlbnRhZ2UgKiAxMDApO1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHRodW1iSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGh1bWJJbWcuc3JjID0gdGhpcy5pbWdTcmM7XG4gICAgdGh1bWJJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1lLmltZyA9IHRodW1iSW1nO1xuICAgIH07XG59XG5cblRyYWRlLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24oYykge1xuICAgIHZhciBwb3MgPSB0aGlzLmFjdHVhbFBvcztcbiAgICBwb3MgPSBwb3Muc3ViVmVjdG9yKGMub2Zmc2V0KTtcbiAgICBwb3MgPSBwb3Muc3ViVmVjdG9yKGMuY2VudGVyKTtcbiAgICBwb3MgPSBwb3MuZGl2KGMuc2NhbGUpO1xuICAgIHRoaXMuc2F2ZWRQb3MgPSBwb3M7XG4gICAgdmFyIGFuZ2xlID0gMTYwIC8gKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgIHRoaXMudHJhZGVyc1tpXS5jYWxjdWxhdGUoYy5zY2FsZSwgdGhpcy5yYWQsIGFscGhhLCB0aGlzLmFjdHVhbFBvcyk7XG4gICAgfVxufTtcblxuVHJhZGUucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5zYXZlZFBvcztcbiAgICBwb3MgPSBwb3MubXVsKGMuc2NhbGUpO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoYy5jZW50ZXIpO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoYy5vZmZzZXQpO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gcG9zO1xuICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICB0aGlzLnRyYWRlcnNbaV0uY2FsY3VsYXRlKGMuc2NhbGUsIHRoaXMucmFkLCBhbHBoYSwgcG9zKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUucHJlRHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmN0eC5zdHJva2VTdHlsZSA9IFwiIzJjM2U1MFwiO1xuICAgICAgICBjLmN0eC5saW5lV2lkdGggPSAwLjUgKiBjLnNjYWxlO1xuICAgICAgICBjLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IGMuY2VudGVyLmFkZFZlY3RvcihjLm9mZnNldCk7XG4gICAgICAgIGMuY3R4Lm1vdmVUbyhjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICBjLmN0eC5saW5lVG8odGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSk7XG4gICAgICAgIGMuY3R4LnN0cm9rZSgpO1xuICAgICAgICBjLmN0eC5jbG9zZVBhdGgoKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmNpckltZyh0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55LCB0aGlzLnJhZCwgdGhpcy5pbWcpO1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnRyYWRlcnNbaV0uZHJhdyhjKTtcbiAgICAgICAgfVxuICAgIH1cbn07IiwiZnVuY3Rpb24gVHJhZGVyKGltZ1NyYywgdG90YWxQZXJjZW50YWdlKSB7XG4gICAgdGhpcy5pbWcgPSBudWxsO1xuICAgIHRoaXMuaW1nU3JjID0gaW1nU3JjO1xuICAgIHRoaXMudG90YWxQZXJjZW50YWdlID0gdG90YWxQZXJjZW50YWdlO1xuICAgIHRoaXMucGVyY2VudGFnZSA9IDA7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBudWxsO1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHRodW1iSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGh1bWJJbWcuc3JjID0gdGhpcy5pbWdTcmM7XG4gICAgdGh1bWJJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1lLmltZyA9IHRodW1iSW1nO1xuICAgIH07XG59XG5cblRyYWRlci5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oc2NhbGUsIHJhZCwgYWxwaGEsIGZyb20pIHtcbiAgICB2YXIgcG9zID0gbmV3IFZlY3RvcjJEKDAsIDMwKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKG5ldyBWZWN0b3IyRCgwLCByYWQpKTtcbiAgICBwb3MgPSBwb3MubXVsKHNjYWxlKTtcbiAgICBwb3MgPSBwb3Mucm90YXRlKGFscGhhIC0gOTApO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoZnJvbSk7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBwb3M7XG59O1xuXG5UcmFkZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYodGhpcy5pbWcgIT09IG51bGwpIHtcbiAgICAgICAgYy5jaXJJbWcodGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgMjUsIHRoaXMuaW1nKTtcbiAgICB9XG59OyIsInZhciB0cmFkZXMgPSBbXTtcbnZhciB0cmFkZXJzID0gW107XG52YXIgbG9nb3MgPSBbXCJsb2dvMC5wbmdcIiwgXCJsb2dvMS5qcGdcIiwgXCJsb2dvMi5qcGdcIiwgXCJsb2dvMy5wbmdcIiwgXCJsb2dvNC5wbmdcIl07XG52YXIgcGVvcGxlID0gW1widHJhZGVyMC5qcGdcIiwgXCJ0cmFkZXIxLmpwZ1wiLCBcInRyYWRlcjIuanBnXCIsIFwidHJhZGVyMy5qcGdcIl07XG5cbihmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuMTUpICsgMC4xMDtcbiAgICAgICAgdHJhZGVycy5wdXNoKG5ldyBUcmFkZXIoXCJkaXN0L2ltYWdlcy9cIiArIHBlb3BsZVtqXSwgdG90YWxQZXJjZW50YWdlKSk7XG4gICAgfVxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuaW5uZXJXaWR0aCAtICh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpKTtcbiAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAod2luZG93LmlubmVySGVpZ2h0IC0gMTAwKSAtICgod2luZG93LmlubmVySGVpZ2h0IC0gMTAwKSAvIDIpKTtcbiAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogNCkgKyAxKTtcbiAgICAgICAgdmFyIHBwbCA9IFtdO1xuICAgICAgICBmb3IodmFyIGsgPSAwOyBrIDwgcjsgaysrKSB7XG4gICAgICAgICAgICB2YXIgdCA9IG5ldyBUcmFkZXIodHJhZGVyc1trXS5pbWdTcmMsIHRyYWRlcnNba10udG90YWxQZXJjZW50YWdlKTtcbiAgICAgICAgICAgIHQucGVyY2VudGFnZSA9IChNYXRoLnJhbmRvbSgpICogMC40KSArIDAuMTtcbiAgICAgICAgICAgIHBwbC5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWRlcy5wdXNoKG5ldyBUcmFkZShcImRpc3QvaW1hZ2VzL1wiICsgbG9nb3NbaV0sIG5ldyBWZWN0b3IyRCh4LCB5KSwgcHBsKSk7XG4gICAgfVxuICAgIHZhciBjYW52YXMgPSBuZXcgQ2FudmFzKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMDAsIFwidHJhZGVzXCIsIFwiI2VlZWVlZVwiLCB0cmFkZXMpO1xuICAgIGZvcih2YXIgbCA9IDA7IGwgPCBjYW52YXMub2Jqcy5sZW5ndGg7IGwrKykge1xuICAgICAgICBjYW52YXMub2Jqc1tsXS5jYWxjdWxhdGUoY2FudmFzKTtcbiAgICB9XG4gICAgY2FudmFzLmRyYXdDYW52YXMoKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcIm5nUm91dGVcIl0pO1xuXG4gICAgYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKFwiL1wiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiaW5kZXguaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdoZWFkZXJDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiaW5kZXguaHRtbFwiXG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
