function Trader(e,t,r,a,s,i){this.name=e,this.totalPercentage=t,this.percentage=a,this.inAt=r,this.comment=s,this.type=i,this.drawable=new Drawable,this.drawable.color="#ffffff",this.drawable.borderColor="#eeeeee",this.drawable.borderWidth=2,this.drawable.borderScaling=!1,this.drawable.setText("[b]"+this.name+"[/b][align=right]Test[/align]\n"+s),this.drawable.textFont="SourceSansPro",this.drawable.textAnchor=new Vector2D(0,1),this.drawable.textBackground="#ffffff",this.drawable.textPadding=new Vector2D(0,0),this.drawable.textScaling=!1,this.drawable.textPos=new Vector2D(1,-1),this.drawable.textColor="#36B5DB",this.drawable.pos=new Vector2D(0,0),this.drawable.radius=25,this.drawable.show=!1,this.open=!1,this.draw=function(e,t,r){if(this.drawable.show){var a=this.drawable.pos;this.drawable.pos=this.drawable.pos.rotate(r-90),e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y),this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e),e.restore(),this.drawable.pos=a}},this.postDraw=function(e,t,r){if(this.drawable.show){var a=this.drawable.pos;this.drawable.pos=this.drawable.pos.rotate(r-90),e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y),this.drawable.drawText(e,t),e.restore(),this.drawable.pos=a}},this.clicked=function(){var e=this;this.open?(this.drawable.animate("textSize",0,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(0,0),200,"easeInOut",function(t,r){t&&(e.open=!1)})):(this.drawable.animate("textSize",12,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(10,10),200,"easeInOut",function(t,r){t&&(e.open=!0)}))},this.interaction=function(e,t,r){var a=e.subVector(this.drawable.pos.rotate(r-90).mul(t)),s=0;return 0!==this.drawable.radius&&(s=this.drawable.radius*t),0!==this.drawable.size.length()&&(s=this.drawable.size.length()*t),a.length()<=s&&this.drawable.show?this:!1}}var Trade=function(e,t){this.stockPrice=e,this.roi=0,this.traders=t,this.drawable=new Drawable,this.percentage=0;for(var r=0,a=this.traders.length;a>r;r++){var s=this.traders[r];this.percentage+=s.totalPercentage*s.percentage,s.pos=new Vector2D(0,0)}this.open=!1,this.drawable.textSize=10,this.drawable.imgFill=!1;var i=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),o=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2);this.drawable.pos=new Vector2D(i,o),this.drawable.radius=Math.floor(35*Math.random()+35),this.drawable.color="#ffffff",this.drawable.borderWidth=2,this.drawable.borderColor="#eeeeee",this.drawable.borderScaling=!1,this.drawable.setText(e+""),this.drawable.textColor="#ffffff",this.drawable.textFont="SourceSansPro",this.drawable.textAnchor=new Vector2D(.5,.5),this.drawable.textPos=new Vector2D(0,.5),this.drawable.textBackground="#36B5DB",this.drawable.textPadding=new Vector2D(10,10),this.drawable.textReplaceColor="#36B5DB",this.drawable.textReplace=15,this.interaction=function(e,t){var r=e.subVector(this.drawable.pos.mul(t)),a=0;if(0!==this.drawable.radius&&(a=this.drawable.radius*t),0!==this.drawable.size.length()&&(a=this.drawable.size.length()*t),r.length()<=a)return this;for(var i=e.subVector(this.drawable.pos.mul(t)),o=180/(this.traders.length+1),n=0,d=this.traders.length;d>n;n++){var l=o*(n+1-(this.traders.length+1)/2),h=this.traders[n].interaction(i,t,l);if(h!==!1){for(var w=0,c=this.traders.length;c>w;w++)s=this.traders[w],s.open&&s.clicked();return h}}return!1},this.preDraw=function(e,t){this.drawable.show&&(e.strokeStyle="#2C3E50",e.lineWidth=.5,e.beginPath(),e.moveTo(0,0),e.lineTo(this.drawable.pos.x,this.drawable.pos.y),e.closePath(),e.stroke())},this.draw=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var r=180/(this.traders.length+1),a=0,s=this.traders.length;s>a;a++){var i=r*(a+1-(this.traders.length+1)/2);this.traders[a].draw(e,t,i)}this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e),this.drawable.drawText(e,t),e.restore()}},this.postDraw=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var r=180/(this.traders.length+1),a=0,s=this.traders.length;s>a;a++){var i=r*(a+1-(this.traders.length+1)/2);this.traders[a].postDraw(e,t,i)}e.restore()}},this.clicked=function(){var e=0,t=0,r=null;if(this.open){for(t=this.traders.length;t>e;e++)r=this.traders[e],r.open&&r.clicked(),r.drawable.animateVector("pos",new Vector2D(0,0),300,"easeInOut",null);this.open=!1}else{for(t=this.traders.length;t>e;e++)r=this.traders[e],r.drawable.show=!0,r.drawable.animateVector("pos",new Vector2D(0,this.drawable.radius+r.drawable.radius+15),300,"easeInOut",null);this.open=!0}},this.requestRedraw=function(){for(var e=0,t=this.traders.length;t>e;e++)this.traders[e].drawable.requestRedraw&&(this.drawable.requestRedraw=!0,this.traders[e].drawable.requestRedraw=!1);return this.drawable.requestRedraw?(this.drawable.requestRedraw=!1,!0):!1}},trades=[],traders=[],profile=new Drawable,logos=["logo0.svg","logo1.svg","logo2.svg","logo3.svg","logo4.svg"],people=[["Crazy Heffe","trader0.jpg"],["Marino Hostino","trader1.jpg"],["Nicolsh Lavanda","trader2.jpg"],["xXrobke69Xx","trader3.jpg"]];!function(){profile.setImage("dist/images/profile.jpg"),profile.radius=100,profile.color="#ffffff",profile.borderColor="#eeeeee",profile.borderScaling=!1,profile.borderWidth=2;for(var e=0;4>e;e++){var t=.15*Math.random()+.1,r=.4*Math.random()+.1,a=200*Math.random(),s=Math.floor(2*Math.random()),i=[t,r,a,s];traders.push(i)}for(var o=0;5>o;o++){for(var n=Math.ceil(4*Math.random()),d=[],l=Math.floor(200*Math.random()*100)/100,h=0;n>h;h++){var w=new Trader(people[h][0],traders[h][0],traders[h][2],traders[h][1],"This looks good!\nI can even put a second line\n\nAnd even more",traders[h][3]);w.drawable.setImage("dist/images/"+people[h][1],function(){b.draw()}),w.percentage=.4*Math.random()+.1,d.push(w)}var c=new Trade(l,d);c.drawable.setImage("dist/images/"+logos[o],function(){b.draw()}),trades.push(c)}trades.push(profile);var b=new Canvas(0,50,window.innerWidth,window.innerHeight-50,"trades",trades);profile.draw=function(e,t){this.drawCircle(e),this.drawImageInCircle(e),this.drawBorderForCircle(e,t)},b.draw(),document.getElementById("trades").addEventListener("mousedown",function(e){b.interactionStart(e,function(e,t){if(e instanceof Trade){var r=b.objects.indexOf(e);b.objects.push(b.objects.splice(r,1)[0])}b.selected=e,b.mousePos=t})}),document.getElementById("trades").addEventListener("mousemove",function(e){b.interactionMove(e,function(e,t){e instanceof Trade&&(e.drawable.pos=t,b.draw())})}),document.getElementById("trades").addEventListener("mouseup",function(){b.interactionStop(function(e){if(null!==e){var t,r;if(e instanceof Trade)for(t=0,r=b.objects.length;r>t;t++)b.objects[t].open&&b.objects[t]!==e&&b.objects[t].clicked();if("self"===e)for(t=0,r=b.objects.length;r>t;t++)b.objects[t].open&&b.objects[t].clicked();"function"==typeof e.clicked&&e.clicked()}})}),document.getElementById("resetOffset").addEventListener("click",function(){b.moveToCenter()}),document.getElementById("scaleCanvas").addEventListener("mousemove",function(){b.scale=this.value,b.draw()})}(),function(){"use strict";var e=angular.module("app",["ngRoute"]);e.config(function(e,t){e.when("/home",{templateUrl:"pages/home.html",controller:"mainController"}).when("/profile/:id",{templateUrl:"pages/profile.html",controller:"profileController"}).when("/balanceHistory/:id",{templateUrl:"pages/balanceHistory.html",controller:"balanceController"}).when("/deposit/:id",{templateUrl:"pages/deposit.html",controller:"balanceController"}).when("/withdraw/:id",{templateUrl:"pages/withdraw.html",controller:"balanceController"}).otherwise({redirectTo:"/home"})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlci5qcyIsInRyYWRlLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiVHJhZGVyIiwibmFtZSIsInRvdGFsUGVyY2VudGFnZSIsImluQXQiLCJwZXJjZW50YWdlIiwiY29tbWVudCIsInR5cGUiLCJ0aGlzIiwiZHJhd2FibGUiLCJEcmF3YWJsZSIsImNvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImJvcmRlclNjYWxpbmciLCJzZXRUZXh0IiwidGV4dEZvbnQiLCJ0ZXh0QW5jaG9yIiwiVmVjdG9yMkQiLCJ0ZXh0QmFja2dyb3VuZCIsInRleHRQYWRkaW5nIiwidGV4dFNjYWxpbmciLCJ0ZXh0UG9zIiwidGV4dENvbG9yIiwicG9zIiwicmFkaXVzIiwic2hvdyIsIm9wZW4iLCJkcmF3IiwiY3R4Iiwic2NhbGUiLCJhbHBoYSIsInAiLCJyb3RhdGUiLCJzYXZlIiwidHJhbnNsYXRlIiwieCIsInkiLCJkcmF3Q2lyY2xlIiwiZHJhd0ltYWdlSW5DaXJjbGUiLCJkcmF3Qm9yZGVyRm9yQ2lyY2xlIiwicmVzdG9yZSIsInBvc3REcmF3IiwiZHJhd1RleHQiLCJjbGlja2VkIiwibWUiLCJhbmltYXRlIiwiYW5pbWF0ZVZlY3RvciIsImZpbmlzaGVkIiwiZWxlbWVudCIsImludGVyYWN0aW9uIiwibW91c2VQb3MiLCJtb3VzZURpZmZlcmVuY2UiLCJzdWJWZWN0b3IiLCJtdWwiLCJkaWZmZXJlbmNlIiwic2l6ZSIsImxlbmd0aCIsIlRyYWRlIiwic3RvY2tQcmljZSIsInRyYWRlcnMiLCJyb2kiLCJpIiwibCIsInQiLCJ0ZXh0U2l6ZSIsImltZ0ZpbGwiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJ0ZXh0UmVwbGFjZUNvbG9yIiwidGV4dFJlcGxhY2UiLCJyZWxQb3MiLCJhbmdsZSIsIm8iLCJqIiwibSIsInByZURyYXciLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsImJlZ2luUGF0aCIsIm1vdmVUbyIsImxpbmVUbyIsImNsb3NlUGF0aCIsInN0cm9rZSIsInJlcXVlc3RSZWRyYXciLCJ0cmFkZXMiLCJwcm9maWxlIiwibG9nb3MiLCJwZW9wbGUiLCJzZXRJbWFnZSIsInRyYWRlciIsInB1c2giLCJyIiwiY2VpbCIsInBwbCIsImsiLCJjYW52YXMiLCJ0cmFkZSIsIkNhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImludGVyYWN0aW9uU3RhcnQiLCJvYmplY3QiLCJpbmRleCIsIm9iamVjdHMiLCJpbmRleE9mIiwic3BsaWNlIiwic2VsZWN0ZWQiLCJpbnRlcmFjdGlvbk1vdmUiLCJpbnRlcmFjdGlvblN0b3AiLCJtb3ZlVG9DZW50ZXIiLCJ2YWx1ZSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIiRsb2NhdGlvblByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iXSwibWFwcGluZ3MiOiJBQUFBLFFBQUFBLFFBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLEtBQUFOLEtBQUFBLEVBQ0FNLEtBQUFMLGdCQUFBQSxFQUNBSyxLQUFBSCxXQUFBQSxFQUNBRyxLQUFBSixLQUFBQSxFQUNBSSxLQUFBRixRQUFBQSxFQUNBRSxLQUFBRCxLQUFBQSxFQUNBQyxLQUFBQyxTQUFBLEdBQUFDLFVBRUFGLEtBQUFDLFNBQUFFLE1BQUEsVUFFQUgsS0FBQUMsU0FBQUcsWUFBQSxVQUNBSixLQUFBQyxTQUFBSSxZQUFBLEVBQ0FMLEtBQUFDLFNBQUFLLGVBQUEsRUFFQU4sS0FBQUMsU0FBQU0sUUFBQSxNQUFBUCxLQUFBTixLQUFBLGtDQUFBSSxHQUNBRSxLQUFBQyxTQUFBTyxTQUFBLGdCQUNBUixLQUFBQyxTQUFBUSxXQUFBLEdBQUFDLFVBQUEsRUFBQSxH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QUFBLGtCQUNBQyxXQUFBLG1CQUVBRixLQUFBLGdCQUNBQyxZQUFBLHFCQUNBQyxXQUFBLHNCQUVBRixLQUFBLHVCQUNBQyxZQUFBLDRCQUNBQyxXQUFBLHNCQUVBRixLQUFBLGdCQUNBQyxZQUFBLHFCQUNBQyxXQUFBLHNCQUVBRixLQUFBLGlCQUNBQyxZQUFBLHNCQUNBQyxXQUFBLHNCQUVBQyxXQUNBQyxXQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBUcmFkZXIobmFtZSwgdG90YWxQZXJjZW50YWdlLCBpbkF0LCBwZXJjZW50YWdlLCBjb21tZW50LCB0eXBlKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnRvdGFsUGVyY2VudGFnZSA9IHRvdGFsUGVyY2VudGFnZTtcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSBwZXJjZW50YWdlO1xuICAgIHRoaXMuaW5BdCA9IGluQXQ7XG4gICAgdGhpcy5jb21tZW50ID0gY29tbWVudDtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuZHJhd2FibGUgPSBuZXcgRHJhd2FibGUoKTtcblxuICAgIHRoaXMuZHJhd2FibGUuY29sb3IgPSBcIiNmZmZmZmZcIjtcblxuICAgIHRoaXMuZHJhd2FibGUuYm9yZGVyQ29sb3IgPSBcIiNlZWVlZWVcIjtcbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlcldpZHRoID0gMjtcbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlclNjYWxpbmcgPSBmYWxzZTtcblxuICAgIHRoaXMuZHJhd2FibGUuc2V0VGV4dChcIltiXVwiICsgdGhpcy5uYW1lICsgXCJbL2JdW2FsaWduPXJpZ2h0XVRlc3RbL2FsaWduXVxcblwiICsgY29tbWVudCk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0Rm9udCA9IFwiU291cmNlU2Fuc1Byb1wiO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dEFuY2hvciA9IG5ldyBWZWN0b3IyRCgwLCAxKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjZmZmZmZmXCI7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UGFkZGluZyA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRTY2FsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UG9zID0gbmV3IFZlY3RvcjJEKDEsIC0xKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRDb2xvciA9IFwiIzM2QjVEQlwiO1xuXG4gICAgdGhpcy5kcmF3YWJsZS5wb3MgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG5cbiAgICB0aGlzLmRyYXdhYmxlLnJhZGl1cyA9IDI1O1xuXG4gICAgdGhpcy5kcmF3YWJsZS5zaG93ID0gZmFsc2U7XG5cbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUsIGFscGhhKSB7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUuc2hvdykge1xuICAgICAgICAgICAgdmFyIHAgPSB0aGlzLmRyYXdhYmxlLnBvcztcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUucG9zID0gdGhpcy5kcmF3YWJsZS5wb3Mucm90YXRlKGFscGhhIC0gOTApO1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy5kcmF3YWJsZS5wb3MueCwgdGhpcy5kcmF3YWJsZS5wb3MueSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdDaXJjbGUoY3R4KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd0ltYWdlSW5DaXJjbGUoY3R4KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd0JvcmRlckZvckNpcmNsZShjdHgpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUucG9zID0gcDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnBvc3REcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSwgYWxwaGEpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRoaXMuZHJhd2FibGUucG9zO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5wb3MgPSB0aGlzLmRyYXdhYmxlLnBvcy5yb3RhdGUoYWxwaGEgLSA5MCk7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd1RleHQoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5wb3MgPSBwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICBpZighdGhpcy5vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0U2l6ZVwiLCAxMiwgMjAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgxMCwgMTApLCAyMDAsIFwiZWFzZUluT3V0XCIsIGZ1bmN0aW9uKGZpbmlzaGVkLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYoZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWUub3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0U2l6ZVwiLCAwLCAyMDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwidGV4dFBhZGRpbmdcIiwgbmV3IFZlY3RvcjJEKDAsIDApLCAyMDAsIFwiZWFzZUluT3V0XCIsIGZ1bmN0aW9uKGZpbmlzaGVkLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYoZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW50ZXJhY3Rpb24gPSBmdW5jdGlvbihtb3VzZVBvcywgc2NhbGUsIGFscGhhKSB7XG4gICAgICAgIHZhciBtb3VzZURpZmZlcmVuY2UgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5kcmF3YWJsZS5wb3Mucm90YXRlKGFscGhhIC0gOTApLm11bChzY2FsZSkpO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IDA7XG4gICAgICAgIGlmICh0aGlzLmRyYXdhYmxlLnJhZGl1cyAhPT0gMCkge1xuICAgICAgICAgICAgZGlmZmVyZW5jZSA9IHRoaXMuZHJhd2FibGUucmFkaXVzICogc2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAhPT0gMCkge1xuICAgICAgICAgICAgZGlmZmVyZW5jZSA9IHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3VzZURpZmZlcmVuY2UubGVuZ3RoKCkgPD0gZGlmZmVyZW5jZSAmJiB0aGlzLmRyYXdhYmxlLnNob3cpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbn0iLCJ2YXIgVHJhZGUgPSBmdW5jdGlvbihzdG9ja1ByaWNlLCB0cmFkZXJzKSB7XG4gICAgdGhpcy5zdG9ja1ByaWNlID0gc3RvY2tQcmljZTtcbiAgICB0aGlzLnJvaSA9IDA7XG4gICAgdGhpcy50cmFkZXJzID0gdHJhZGVycztcbiAgICB0aGlzLmRyYXdhYmxlID0gbmV3IERyYXdhYmxlKCk7XG4gICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgdCA9IHRoaXMudHJhZGVyc1tpXTtcbiAgICAgICAgdGhpcy5wZXJjZW50YWdlICs9IHQudG90YWxQZXJjZW50YWdlICogdC5wZXJjZW50YWdlO1xuICAgICAgICB0LnBvcyA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB9XG5cbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRTaXplID0gMTA7XG4gICAgdGhpcy5kcmF3YWJsZS5pbWdGaWxsID0gZmFsc2U7XG4gICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuaW5uZXJXaWR0aCAtICh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpKTtcbiAgICB2YXIgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCkgLSAoKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAvIDIpKTtcbiAgICB0aGlzLmRyYXdhYmxlLnBvcyA9IG5ldyBWZWN0b3IyRCh4LCB5KTtcbiAgICB0aGlzLmRyYXdhYmxlLnJhZGl1cyA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAzNSkgKyAzNSk7XG4gICAgdGhpcy5kcmF3YWJsZS5jb2xvciA9IFwiI2ZmZmZmZlwiO1xuICAgIHRoaXMuZHJhd2FibGUuYm9yZGVyV2lkdGggPSAyO1xuICAgIHRoaXMuZHJhd2FibGUuYm9yZGVyQ29sb3IgPSBcIiNlZWVlZWVcIjtcbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlclNjYWxpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmRyYXdhYmxlLnNldFRleHQoc3RvY2tQcmljZSArIFwiXCIpO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dENvbG9yID0gXCIjZmZmZmZmXCI7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0Rm9udCA9IFwiU291cmNlU2Fuc1Byb1wiO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dEFuY2hvciA9IG5ldyBWZWN0b3IyRCgwLjUsIDAuNSk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UG9zID0gbmV3IFZlY3RvcjJEKDAsIDAuNSk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiIzM2QjVEQlwiO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dFBhZGRpbmcgPSBuZXcgVmVjdG9yMkQoMTAsIDEwKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRSZXBsYWNlQ29sb3IgPSBcIiMzNkI1REJcIjtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRSZXBsYWNlID0gMTU7XG5cbiAgICB0aGlzLmludGVyYWN0aW9uID0gZnVuY3Rpb24obW91c2VQb3MsIHNjYWxlKSB7XG4gICAgICAgIHZhciBtb3VzZURpZmZlcmVuY2UgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5kcmF3YWJsZS5wb3MubXVsKHNjYWxlKSk7XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gMDtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5yYWRpdXMgIT09IDApIHtcbiAgICAgICAgICAgIGRpZmZlcmVuY2UgPSB0aGlzLmRyYXdhYmxlLnJhZGl1cyAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAhPT0gMCkge1xuICAgICAgICAgICAgZGlmZmVyZW5jZSA9IHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3VzZURpZmZlcmVuY2UubGVuZ3RoKCkgPD0gZGlmZmVyZW5jZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbFBvcyA9IG1vdXNlUG9zLnN1YlZlY3Rvcih0aGlzLmRyYXdhYmxlLnBvcy5tdWwoc2NhbGUpKTtcbiAgICAgICAgdmFyIGFuZ2xlID0gMTgwIC8gKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKTtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMudHJhZGVyc1tpXS5pbnRlcmFjdGlvbihyZWxQb3MsIHNjYWxlLCBhbHBoYSk7XG4gICAgICAgICAgICBpZihvICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDAsIG0gPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHQgPSB0aGlzLnRyYWRlcnNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0Lm9wZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuY2xpY2tlZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgdGhpcy5wcmVEcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSkge1xuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnNob3cpIHtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IFwiIzJDM0U1MFwiO1xuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDAuNTtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oMCwgMCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHRoaXMuZHJhd2FibGUucG9zLngsIHRoaXMuZHJhd2FibGUucG9zLnkpO1xuICAgICAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFkZXJzW2ldLmRyYXcoY3R4LCBzY2FsZSwgYWxwaGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3Q2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdJbWFnZUluQ2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdCb3JkZXJGb3JDaXJjbGUoY3R4KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd1RleHQoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucG9zdERyYXcgPSBmdW5jdGlvbihjdHgsIHNjYWxlKSB7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUuc2hvdykge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy5kcmF3YWJsZS5wb3MueCwgdGhpcy5kcmF3YWJsZS5wb3MueSk7XG4gICAgICAgICAgICB2YXIgYW5nbGUgPSAxODAgLyAodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5wb3N0RHJhdyhjdHgsIHNjYWxlLCBhbHBoYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDAsIGwgPSAwLCB0ID0gbnVsbDtcbiAgICAgICAgaWYoIXRoaXMub3Blbikge1xuICAgICAgICAgICAgZm9yKGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdCA9IHRoaXMudHJhZGVyc1tpXTtcbiAgICAgICAgICAgICAgICB0LmRyYXdhYmxlLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHQuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInBvc1wiLCBuZXcgVmVjdG9yMkQoMCwgdGhpcy5kcmF3YWJsZS5yYWRpdXMgKyB0LmRyYXdhYmxlLnJhZGl1cyArIDE1KSwgMzAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IobCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmKHQub3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdC5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwicG9zXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMzAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVxdWVzdFJlZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy50cmFkZXJzW2ldLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5kcmF3YWJsZS5yZXF1ZXN0UmVkcmF3ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5yZXF1ZXN0UmVkcmF3KSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufTsiLCJ2YXIgdHJhZGVzID0gW107XG52YXIgdHJhZGVycyA9IFtdO1xudmFyIHByb2ZpbGUgPSBuZXcgRHJhd2FibGUoKTtcbnZhciBsb2dvcyA9IFtcImxvZ28wLnN2Z1wiLCBcImxvZ28xLnN2Z1wiLCBcImxvZ28yLnN2Z1wiLCBcImxvZ28zLnN2Z1wiLCBcImxvZ280LnN2Z1wiXTtcbnZhciBwZW9wbGUgPSBbW1wiQ3JhenkgSGVmZmVcIiwgXCJ0cmFkZXIwLmpwZ1wiXSwgW1wiTWFyaW5vIEhvc3Rpbm9cIiwgXCJ0cmFkZXIxLmpwZ1wiXSwgW1wiTmljb2xzaCBMYXZhbmRhXCIsIFwidHJhZGVyMi5qcGdcIl0sIFtcInhYcm9ia2U2OVh4XCIsIFwidHJhZGVyMy5qcGdcIl1dO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgcHJvZmlsZS5zZXRJbWFnZShcImRpc3QvaW1hZ2VzL3Byb2ZpbGUuanBnXCIpO1xuICAgIHByb2ZpbGUucmFkaXVzID0gMTAwO1xuICAgIHByb2ZpbGUuY29sb3IgPSBcIiNmZmZmZmZcIjtcbiAgICBwcm9maWxlLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgcHJvZmlsZS5ib3JkZXJTY2FsaW5nID0gZmFsc2U7XG4gICAgcHJvZmlsZS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICB2YXIgdG90YWxQZXJjZW50YWdlID0gKE1hdGgucmFuZG9tKCkgKiAwLjE1KSArIDAuMTtcbiAgICAgICAgdmFyIHBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuNCkgKyAwLjE7XG4gICAgICAgIHZhciBpbkF0ID0gTWF0aC5yYW5kb20oKSAqIDIwMDtcbiAgICAgICAgdmFyIHR5cGUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMSArIDEpKTtcbiAgICAgICAgdmFyIHRyYWRlciA9IFt0b3RhbFBlcmNlbnRhZ2UsIHBlcmNlbnRhZ2UsIGluQXQsIHR5cGVdO1xuICAgICAgICB0cmFkZXJzLnB1c2godHJhZGVyKTtcbiAgICB9XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICB2YXIgciA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogNCk7XG4gICAgICAgIHZhciBwcGwgPSBbXTtcbiAgICAgICAgdmFyIHN0b2NrUHJpY2UgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMjAwKSAqIDEwMCkgLyAxMDA7XG4gICAgICAgIGZvcih2YXIgayA9IDA7IGsgPCByOyBrKyspIHtcbiAgICAgICAgICAgIHZhciB0ID0gbmV3IFRyYWRlcihwZW9wbGVba11bMF0sIHRyYWRlcnNba11bMF0sIHRyYWRlcnNba11bMl0sIHRyYWRlcnNba11bMV0sIFwiVGhpcyBsb29rcyBnb29kIVxcbkkgY2FuIGV2ZW4gcHV0IGEgc2Vjb25kIGxpbmVcXG5cXG5BbmQgZXZlbiBtb3JlXCIsIHRyYWRlcnNba11bM10pO1xuICAgICAgICAgICAgdC5kcmF3YWJsZS5zZXRJbWFnZShcImRpc3QvaW1hZ2VzL1wiICsgcGVvcGxlW2tdWzFdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LnBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuNCkgKyAwLjE7XG4gICAgICAgICAgICBwcGwucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhZGUgPSBuZXcgVHJhZGUoc3RvY2tQcmljZSwgcHBsKTtcbiAgICAgICAgdHJhZGUuZHJhd2FibGUuc2V0SW1hZ2UoXCJkaXN0L2ltYWdlcy9cIiArIGxvZ29zW2ldLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbnZhcy5kcmF3KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0cmFkZXMucHVzaCh0cmFkZSk7XG4gICAgfVxuICAgIHRyYWRlcy5wdXNoKHByb2ZpbGUpO1xuICAgIHZhciBjYW52YXMgPSBuZXcgQ2FudmFzKDAsIDUwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0IC0gNTAsIFwidHJhZGVzXCIsIHRyYWRlcyk7XG4gICAgcHJvZmlsZS5kcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSkge1xuICAgICAgICB0aGlzLmRyYXdDaXJjbGUoY3R4KTtcbiAgICAgICAgdGhpcy5kcmF3SW1hZ2VJbkNpcmNsZShjdHgpO1xuICAgICAgICB0aGlzLmRyYXdCb3JkZXJGb3JDaXJjbGUoY3R4LCBzY2FsZSk7XG4gICAgfTtcbiAgICBjYW52YXMuZHJhdygpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25TdGFydChlLCBmdW5jdGlvbihvYmplY3QsIG1vdXNlUG9zKSB7XG4gICAgICAgICAgICBpZihvYmplY3QgaW5zdGFuY2VvZiBUcmFkZSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGNhbnZhcy5vYmplY3RzLmluZGV4T2Yob2JqZWN0KTtcbiAgICAgICAgICAgICAgICBjYW52YXMub2JqZWN0cy5wdXNoKGNhbnZhcy5vYmplY3RzLnNwbGljZShpbmRleCwgMSlbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzLnNlbGVjdGVkID0gb2JqZWN0O1xuICAgICAgICAgICAgY2FudmFzLm1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25Nb3ZlKGUsIGZ1bmN0aW9uKG9iamVjdCwgbW91c2VQb3MpIHtcbiAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmRyYXdhYmxlLnBvcyA9IG1vdXNlUG9zO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5kcmF3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25TdG9wKGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICAgICAgaWYob2JqZWN0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGksIGw7XG4gICAgICAgICAgICAgICAgaWYob2JqZWN0IGluc3RhbmNlb2YgVHJhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbCA9IGNhbnZhcy5vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbnZhcy5vYmplY3RzW2ldLm9wZW4gJiYgY2FudmFzLm9iamVjdHNbaV0gIT09IG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzW2ldLmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihvYmplY3QgPT09IFwic2VsZlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBjYW52YXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW52YXMub2JqZWN0c1tpXS5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLm9iamVjdHNbaV0uY2xpY2tlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBvYmplY3QuY2xpY2tlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuY2xpY2tlZCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXNldE9mZnNldFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbnZhcy5tb3ZlVG9DZW50ZXIoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjYWxlQ2FudmFzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbnZhcy5zY2FsZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNhbnZhcy5kcmF3KCk7XG4gICAgfSlcbn0pKCk7IiwiKGZ1bmN0aW9uICgpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcIm5nUm91dGVcIl0pO1xuXG4gICAgYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbihcIi9ob21lXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9ob21lLmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcIm1haW5Db250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9wcm9maWxlLzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvcHJvZmlsZS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJwcm9maWxlQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvYmFsYW5jZUhpc3RvcnkvOmlkXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9iYWxhbmNlSGlzdG9yeS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJiYWxhbmNlQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvZGVwb3NpdC86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL2RlcG9zaXQuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYmFsYW5jZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL3dpdGhkcmF3LzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvd2l0aGRyYXcuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYmFsYW5jZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL2hvbWVcIlxuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
