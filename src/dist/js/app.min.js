function Trader(e,t,a,r,i){this.name=e,this.amount=t,this.inAt=a,this.comment=i,this.isShort=r,this.difference=0,this.drawable=new Drawable,this.drawable.color="#ffffff",this.drawable.borderColor="#B3B369",this.drawable.borderWidth=2,this.drawable.borderScaling=!1,this.drawable.textFont="SourceSansPro",this.drawable.textAnchor=new Vector2D(0,1),this.drawable.textBackground="#ffffff",this.drawable.textPadding=new Vector2D(0,0),this.drawable.textScaling=!1,this.drawable.textPos=new Vector2D(1,-1),this.drawable.textColor="#2C3E50",this.drawable.pos=new Vector2D(0,0),this.drawable.radius=25,this.drawable.show=!1,this["new"]=!0,this.open=!1,this.changeStockPrice=function(e){var r="[b]"+this.name+"[/b][align=right][color=",i=Math.floor((e-this.inAt)*this.amount*100)/100,n="#36B5DB",s="#E74C3C";this.isShort?this.difference=-i:this.difference=i,r+=this.difference>=0?n+"]":s+"]",r+=this.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})+"[/color][/align]\\n[i][color=",r+=this.isShort?s+"]":n+"]",r+=t,r+=this.isShort?" short at ":" long at ",r+=a.toLocaleString("be-NL",{style:"currency",currency:"EUR"})+"[/color][/i]\\n",this.drawable.setText(r+this.comment)},this.draw=function(e,t){if(this.drawable.show){var a=this.drawable.pos.rotate(this.drawable.rotation);e.save(),e.globalAlpha*=this.drawable.opacity,e.translate(a.x,a.y),this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e,t),e.restore()}},this.postDraw=function(e,t){if(this.drawable.show){var a=this.drawable.pos.rotate(this.drawable.rotation);e.save(),e.globalAlpha*=this.drawable.opacity,e.translate(a.x,a.y),this.drawable.drawText(e,t),e.restore()}},this.clicked=function(){var e=this;this.open?(this.drawable.animate("textSize",0,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(0,0),200,"easeInOut",function(t,a){t&&(e.open=!1)})):(this.drawable.animate("textSize",12,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(10,10),200,"easeInOut",function(t,a){t&&(e.open=!0)}))},this["delete"]=function(e,t){var a=0;"undefined"!=typeof t&&(a=t);for(var r=e.length;r>a;a++)if("undefined"!=typeof e[a].traders){var i=e[a].traders.indexOf(this);if(i>-1){e[a].traders.splice(i,1),e[a].calcTraders(),0===e[a].traders.length&&e[a].animateDelete(e,a);break}}},this.interaction=function(e,t){var a=e.subVector(this.drawable.pos.rotate(this.drawable.rotation).mul(t)),r=0;return 0!==this.drawable.radius&&(r=this.drawable.radius*t),0!==this.drawable.size.length()&&(r=this.drawable.size.length()*t),a.length()<=r&&this.drawable.show?(this["new"]&&(this["new"]=!1,this.drawable.borderColor="#eeeeee"),this):!1}}var Trade=function(e,a,r,i){this.id=e,this.stockPrice=a,this.traders=r,this.drawable=new Drawable,this.difference=0;for(var n=0,s=this.traders.length;s>n;n++)this.traders[n].changeStockPrice(this.stockPrice),this.difference+=this.traders[n].difference;if(this.difference=Math.floor(100*this.difference)/100,this.drawable.setText(this.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),this.difference>=0?(this.drawable.textBackground="#36B5DB",this.drawable.textReplaceColor="#36B5DB"):(this.drawable.textBackground="#E74C3C",this.drawable.textReplaceColor="#E74C3C"),this.lineColor="#B3B369",this.open=!1,this.drawable.textSize=10,this.drawable.radius=Math.floor(35*Math.random()+35),this.drawable.imgFill=!1,null===i){for(var o=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),d=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2);new Vector2D(o,d).length()<100+this.drawable.radius||new Vector2D(o,d).length()>new Vector2D(window.innerWidth,window.innerHeight-50).div(2).length()-this.drawable.radius;)o=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),d=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2);this.drawable.animateVector("pos",new Vector2D(o,d),1e3,"easeInOut",null)}else this.drawable.animateVector("pos",i,1e3,"easeInOut",null);this.drawable.color="#ffffff",this.drawable.borderWidth=2,this.drawable.borderColor="#B3B369",this.drawable.borderScaling=!1,this.drawable.textColor="#ffffff",this.drawable.textFont="SourceSansPro",this.drawable.textAnchor=new Vector2D(.5,.5),this.drawable.textPos=new Vector2D(0,.5),this.drawable.textPadding=new Vector2D(10,10),this.drawable.textReplace=15,this.setStockPrice=function(e){this.stockPrice=e,this.difference=0;for(var t=0,a=this.traders.length;a>t;t++)this.traders[t].changeStockPrice(this.stockPrice),this.difference+=this.traders[t].difference;this.difference=Math.floor(100*this.difference)/100,this.open?(this.difference>=0?this.drawable.textReplaceColor="#36B5DB":this.drawable.textReplaceColor="#E74C3C",this.drawable.textBackground="#2C3E50",this.drawable.setText(this.stockPrice.toLocaleString("be-NL",{style:"currency",currency:"EUR"}))):(this.drawable.setText(this.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),this.difference>=0?(this.drawable.textBackground="#36B5DB",this.drawable.textReplaceColor="#36B5DB"):(this.drawable.textBackground="#E74C3C",this.drawable.textReplaceColor="#E74C3C")),this.drawable.requestRedraw=!0},this.interaction=function(e,a){var r=e.subVector(this.drawable.pos.mul(a)),i=0;if(0!==this.drawable.radius&&(i=this.drawable.radius*a),0!==this.drawable.size.length()&&(i=this.drawable.size.length()*a),r.length()<=i)return this;for(var n=e.subVector(this.drawable.pos.mul(a)),s=0,o=this.traders.length;o>s;s++){var d=this.traders[s].interaction(n,a);if(d!==!1){for(var l=0,c=this.traders.length;c>l;l++)t=this.traders[l],t.open&&t.clicked();return d}}return!1},this.calcTraders=function(){for(var e=180/(this.traders.length+1),t=0,a=this.traders.length;a>t;t++){var r=e*(t+1-(this.traders.length+1)/2)-90;this.traders[t].drawable.animate("rotation",r,300,"easeInOut",null)}},this.calcTraders(),this.preDraw=function(e,t){if(this.drawable.show){e.save(),e.globalAlpha*=this.drawable.opacity,e.strokeStyle=this.lineColor,e.lineWidth=.5;for(var a=!1,r=0,i=this.traders.length;i>r;r++)this.traders[r]["new"]&&(a=!0);a?this.lineColor="#B3B369":this.lineColor="#2C3E50",e.beginPath(),e.moveTo(0,0),e.lineTo(this.drawable.pos.x,this.drawable.pos.y),e.closePath(),e.stroke(),e.restore()}},this.draw=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y),e.globalAlpha*=this.drawable.opacity;for(var a=!1,r=0,i=this.traders.length;i>r;r++)this.traders[r].draw(e,t),this.traders[r]["new"]&&(a=!0);a?this.drawable.borderColor="#B3B369":this.drawable.borderColor="#eeeeee",this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e,t),this.drawable.drawText(e,t),e.restore()}},this["delete"]=function(e){for(var t=e.indexOf(this),a=0,r=this.traders.length;r>a;a++)this.traders[0]["delete"](e,t)},this.animateDelete=function(e,t){this.drawable.animate("textSize",0,300,"easeInOut",null),this.drawable.animate("textReplace",0,300,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(0,0),300,"easeInOut",null),this.drawable.animate("opacity",0,300,"easeInOut",null),this.drawable.animate("radius",0,300,"easeInOut",function(){e.splice(t,1)})},this.postDraw=function(e,t){if(this.drawable.show){e.save(),e.globalAlpha*=this.drawable.opacity,e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var a=0,r=this.traders.length;r>a;a++)this.traders[a].postDraw(e,t);e.restore()}},this.clicked=function(){var e=0,t=0,a=null,r=this;if(this.open){var i=function(e,t){t.show=!1};for(t=this.traders.length;t>e;e++)a=this.traders[e],a.open&&a.clicked(),a.drawable.animateVector("pos",new Vector2D(0,0),300,"easeInOut",i);this.drawable.animateVector("textPadding",new Vector2D(0,0),150,"easeIn",function(e,t){t.animateVector("textPadding",new Vector2D(10,10),150,"easeOut",null)}),this.drawable.animate("textReplace",0,150,"easeIn",function(e,t){t.animate("textReplace",15,150,"easeOut",null)}),this.drawable.animate("textSize",0,150,"easeIn",function(e,t){t.setText(r.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),r.difference>=0?t.textBackground="#36B5DB":t.textBackground="#E74C3C",r.open=!1,t.animate("textSize",10,150,"easeOut",null)})}else{for(t=this.traders.length;t>e;e++)a=this.traders[e],a.drawable.show=!0,a.drawable.animateVector("pos",new Vector2D(0,this.drawable.radius+a.drawable.radius+15),300,"easeInOut",null);this.drawable.animateVector("textPadding",new Vector2D(0,0),150,"easeIn",function(e,t){t.animateVector("textPadding",new Vector2D(10,10),150,"easeOut",null)}),this.drawable.animate("textReplace",0,150,"easeIn",function(e,t){t.animate("textReplace",15,150,"easeOut",null)}),this.drawable.animate("textSize",0,150,"easeIn",function(e,t){t.textBackground="#2C3E50",t.setText(r.stockPrice.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),r.open=!0,t.animate("textSize",10,150,"easeOut",null)})}},this.requestRedraw=function(){for(var e=0,t=this.traders.length;t>e;e++)this.traders[e].drawable.requestRedraw&&(this.drawable.requestRedraw=!0,this.traders[e].drawable.requestRedraw=!1);return this.drawable.requestRedraw?(this.drawable.requestRedraw=!1,!0):!1}},tradeCanvas=function(e,t){if(null!==document.getElementById("trades")){var a=[],r=[],i=new Drawable,n=new Drawable;i.setImage(e.profilepicture,function(){B.draw()}),i.radius=100,i.color="#ffffff",i.borderColor="#eeeeee",i.borderScaling=!1,i.borderWidth=2,i.textSize=12,i.textColor="#ffffff",i.textFont="SourceSansPro",i.textAnchor=new Vector2D(.5,.5),i.textPos=new Vector2D(0,.5),i.textPadding=new Vector2D(10,10),i.textReplace=15,i.draw=function(e,t){this.drawCircle(e),this.drawImageInCircle(e),this.drawBorderForCircle(e,t),this.drawText(e,t)},n.setImage("dist/images/misc/trash.svg",function(){B.draw()}),n.radius=50,n.color="#eeeeee",n.borderColor="#eeeeee",n.borderScaling=!1,n.borderWidth=2,n.pos=new Vector2D(window.innerWidth-100,window.innerHeight-150),n.interaction=function(e){var t=e.subVector(B.margin).subVector(this.pos),a=this.radius*B.scale;return t.length()<=a&&this.show},n.draw=function(e,t){var a=this.pos.subVector(B.offset).subVector(B.center).mul(1/B.scale);e.save(),e.translate(a.x,a.y),this.drawCircle(e),this.drawImageInCircle(e),this.drawBorderForCircle(e,t),e.restore()};for(var s=0,o=0,d=e.trades.length;d>o;o++){var l=e.trades[o];if(void 0!==l.StopStockPrice||l.StopStockPrice<0){var c,h;if("undefined"==typeof l.ParentTrade)h=new Trader(e.firstname+" "+e.lastname,l.AmountInvested/l.StartStockPrice,l.StartStockPrice,l.IsShort,l.Comment),h.drawable.setImage(e.profilepicture),h.isNew=l.IsNew;else for(var w=!1,f=0,u=t.length;u>f;f++){for(var b=0,g=t[f].trades.length;g>b;b++)if(l.ParentTrade===t[f].trades[b]){h=new Trader(t[f].firstname+" "+t[f].lastname,l.AmountInvested/l.StartStockPrice,l.StartStockPrice,l.IsShort,l.Comment),h.drawable.setImage("http://localhost:3000/dist/images/profiles/profile.jpg"),w=!0;break}if(w)break}for(var p=!1,m=0,v=r.length;v>m;m++)if(c=r[m],c.id===l.Company._id){p=!0,c.traders.push(h);break}p||(c={id:l.Company._id,stockPrice:l.Company.CurrentStockPrice,traders:[h],image:l.Company.Image},r.push(c))}}for(var x=0,C=r.length;C>x;x++){var y=new Trade(r[x].id,r[x].stockPrice,r[x].traders,null);y.drawable.setImage(r[x].image),a.push(y)}a.push(i),a.push(n),s>=0?(i.textBackground="#36B5DB",i.textReplaceColor="#36B5DB"):(i.textBackground="#E74C3C",i.textReplaceColor="#E74C3C"),i.setText((Math.floor(100*s)/100).toLocaleString("be-NL",{style:"currency",currency:"EUR"}));var B=new Canvas(0,50,window.innerWidth,window.innerHeight-50,"trades",a);B.drawCallback=function(){for(var e=0,t=0,a=B.objects.length;a>t;t++)"undefined"!=typeof B.objects[t].difference&&(e+=B.objects[t].difference);e>=0?(i.textBackground="#36B5DB",i.textReplaceColor="#36B5DB"):(i.textBackground="#E74C3C",i.textReplaceColor="#E74C3C"),i.setText((Math.floor(100*e)/100).toLocaleString("be-NL",{style:"currency",currency:"EUR"}))},document.body.addEventListener("touchstart",function(e){e.preventDefault()}),document.getElementById("trades").addEventListener("mousedown",function(e){S(e)}),document.getElementById("trades").addEventListener("touchstart",function(e){var t=e.touches[0];S(t)});var S=function(e){B.interactionStart(e,function(e,t){var a;e instanceof Trade&&(a=B.objects.indexOf(e),B.objects.push(B.objects.splice(a,1)[0])),e instanceof Trader&&(e.drawable.returnPos=e.drawable.pos),"self"===e&&(a=B.objects.indexOf(n),B.objects.splice(a,1),B.objects.push(n),B.draw()),B.selected=e,B.mousePos=t})};document.getElementById("trades").addEventListener("mousemove",function(e){D(e)}),document.getElementById("trades").addEventListener("touchmove",function(e){var t=e.touches[0];D(t)});var D=function(e){B.interactionMove(e,function(t,a,r){t instanceof Trade&&(t.drawable.opacity=.5,t.drawable.pos=a),t instanceof Trader&&(t.drawable.opacity=.5,t.drawable.pos=t.drawable.pos.addVector(r.rotate(-t.drawable.rotation).mul(1/B.scale))),n.interaction(new Vector2D(e.pageX,e.pageY))?n.color="#E74C3C":n.color="#eeeeee",B.draw()})};document.getElementById("trades").addEventListener("mouseup",function(e){I(e)}),document.getElementById("trades").addEventListener("touchend",function(e){var t=e.touches[0];I(t)});var I=function(e){B.interactionStop(function(t,a){var r,i;if(t){if(a instanceof Trade)for(a.drawable.opacity=1,r=0,i=B.objects.length;i>r;r++)B.objects[r].open&&B.objects[r]!==a&&B.objects[r].clicked();if(a instanceof Trader&&(a.drawable.opacity=1),"self"===a)for(r=0,i=B.objects.length;i>r;r++)B.objects[r].open&&B.objects[r].clicked();"function"==typeof a.clicked&&a.clicked()}else a instanceof Trade&&(a.drawable.opacity=1,n.interaction(new Vector2D(e.pageX,e.pageY))&&a["delete"](B.objects)),a instanceof Trader&&(a.drawable.opacity=1,a.drawable.returnPos.length()!==a.drawable.pos.length()&&a.drawable.returnPos.x!==a.drawable.pos.x&&a.drawable.animateVector("pos",a.drawable.returnPos,500,"easeInOut",null),n.interaction(new Vector2D(e.pageX,e.pageY))&&a["delete"](B.objects));n.color="#eeeeee"}),B.draw()};document.getElementById("trades").addEventListener("wheel",function(e){k(e)}),document.getElementById("trades").addEventListener("DOMMouseScroll",function(e){k(e)});var k=function(e){e.preventDefault();var t=0;t="undefined"!=typeof e.wheelDelta?e.wheelDelta/300:-e.detail/50;var a=B.scale+t;a>1.8&&(a=1.8),.4>a&&(a=.4),a=Math.floor(100*a)/100,B.scale=a,n.radius=50/B.scale,document.getElementById("scaleCanvas").value=B.scale,B.draw()};document.getElementById("scaleCanvas").addEventListener("mousemove",function(){B.scale=parseFloat(this.value),n.radius=50/B.scale,B.draw()}),document.getElementById("resetOffset").addEventListener("click",function(){B.moveToCenter()}),window.addEventListener("resize",function(){B.setSize(window.innerWidth,window.innerHeight-50),n.pos=new Vector2D(window.innerWidth-100,window.innerHeight-150)}),this.updatePrices=function(e){for(var t=0,a=B.objects.length;a>t;t++)for(var r=0,i=e.length;i>r;r++)if(B.objects[t].id===e[r]._id){B.objects[t].setStockPrice(e[r].CurrentStockPrice);break}},this.addTrade=function(e,t){console.log(e,t)}}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlci5qcyIsInRyYWRlLmpzIiwidHJhZGVDYW52YXMuanMiXSwibmFtZXMiOlsiVHJhZGVyIiwibmFtZSIsImFtb3VudCIsImluQXQiLCJpc1Nob3J0IiwiY29tbWVudCIsInRoaXMiLCJkaWZmZXJlbmNlIiwiZHJhd2FibGUiLCJEcmF3YWJsZSIsImNvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImJvcmRlclNjYWxpbmciLCJ0ZXh0Rm9udCIsInRleHRBbmNob3IiLCJWZWN0b3IyRCIsInRleHRCYWNrZ3JvdW5kIiwidGV4dFBhZGRpbmciLCJ0ZXh0U2NhbGluZyIsInRleHRQb3MiLCJ0ZXh0Q29sb3IiLCJwb3MiLCJyYWRpdXMiLCJzaG93Iiwib3BlbiIsImNoYW5nZVN0b2NrUHJpY2UiLCJzdG9ja1ByaWNlIiwicHJlc2V0IiwiZGlmZiIsIk1hdGgiLCJmbG9vciIsIm5lZyIsInRvTG9jYWxlU3RyaW5nIiwic3R5bGUiLCJjdXJyZW5jeSIsInNldFRleHQiLCJkcmF3IiwiY3R4Iiwic2NhbGUiLCJwIiwicm90YXRlIiwicm90YXRpb24iLCJzYXZlIiwiZ2xvYmFsQWxwaGEiLCJvcGFjaXR5IiwidHJhbnNsYXRlIiwieCIsInkiLCJkcmF3Q2lyY2xlIiwiZHJhd0ltYWdlSW5DaXJjbGUiLCJkcmF3Qm9yZGVyRm9yQ2lyY2xlIiwicmVzdG9yZSIsInBvc3REcmF3IiwiZHJhd1RleHQiLCJjbGlja2VkIiwibWUiLCJhbmltYXRlIiwiYW5pbWF0ZVZlY3RvciIsImZpbmlzaGVkIiwiZWxlbWVudCIsInRyYWRlcyIsImluZGV4IiwiaSIsImwiLCJsZW5ndGgiLCJ0cmFkZXJzIiwiaW5kIiwiaW5kZXhPZiIsInNwbGljZSIsImNhbGNUcmFkZXJzIiwiYW5pbWF0ZURlbGV0ZSIsImludGVyYWN0aW9uIiwibW91c2VQb3MiLCJtb3VzZURpZmZlcmVuY2UiLCJzdWJWZWN0b3IiLCJtdWwiLCJzaXplIiwiVHJhZGUiLCJpZCIsInRleHRSZXBsYWNlQ29sb3IiLCJsaW5lQ29sb3IiLCJ0ZXh0U2l6ZSIsInJhbmRvbSIsImltZ0ZpbGwiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJkaXYiLCJ0ZXh0UmVwbGFjZSIsInNldFN0b2NrUHJpY2UiLCJyZXF1ZXN0UmVkcmF3IiwicmVsUG9zIiwibyIsImoiLCJtIiwidCIsImFuZ2xlIiwiYWxwaGEiLCJwcmVEcmF3Iiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJuZXdUcmFkZXIiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJmIiwiZG9uZSIsInRyYWRlQ2FudmFzIiwidXNlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvYmplY3RzIiwiY29tcGFuaWVzIiwicHJvZmlsZSIsInRyYXNoIiwic2V0SW1hZ2UiLCJwcm9maWxlcGljdHVyZSIsImNhbnZhcyIsIm1hcmdpbiIsIm9mZnNldCIsImNlbnRlciIsInVuZGVmaW5lZCIsIlN0b3BTdG9ja1ByaWNlIiwiYyIsInRyYWRlciIsIlBhcmVudFRyYWRlIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJBbW91bnRJbnZlc3RlZCIsIlN0YXJ0U3RvY2tQcmljZSIsIklzU2hvcnQiLCJDb21tZW50IiwiaXNOZXciLCJJc05ldyIsImZvdW5kIiwiam5kZXgiLCJtZW5ndGgiLCJjb21wYW55Rm91bmQiLCJDb21wYW55IiwiX2lkIiwicHVzaCIsIkN1cnJlbnRTdG9ja1ByaWNlIiwiaW1hZ2UiLCJJbWFnZSIsImsiLCJuIiwidHJhZGUiLCJDYW52YXMiLCJkcmF3Q2FsbGJhY2siLCJib2R5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImludGVyYWN0aW9uU3RhcnQiLCJ0b3VjaCIsInRvdWNoZXMiLCJvYmplY3QiLCJyZXR1cm5Qb3MiLCJzZWxlY3RlZCIsImludGVyYWN0aW9uTW92ZSIsImFkZFZlY3RvciIsInBhZ2VYIiwicGFnZVkiLCJpbnRlcmFjdGlvblN0b3AiLCJjbGljayIsInNjcm9sbEludGVyYWN0aW9uIiwiZGVsdGEiLCJ3aGVlbERlbHRhIiwiZGV0YWlsIiwidmFsdWUiLCJwYXJzZUZsb2F0IiwibW92ZVRvQ2VudGVyIiwic2V0U2l6ZSIsInVwZGF0ZVByaWNlcyIsImFkZFRyYWRlIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBQUEsUUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQUwsS0FBQUEsRUFDQUssS0FBQUosT0FBQUEsRUFDQUksS0FBQUgsS0FBQUEsRUFDQUcsS0FBQUQsUUFBQUEsRUFDQUMsS0FBQUYsUUFBQUEsRUFDQUUsS0FBQUMsV0FBQSxFQUNBRCxLQUFBRSxTQUFBLEdBQUFDLFVBRUFILEtBQUFFLFNBQUFFLE1BQUEsVUFFQUosS0FBQUUsU0FBQUcsWUFBQSxVQUNBTCxLQUFBRSxTQUFBSSxZQUFBLEVBQ0FOLEtBQUFFLFNBQUFLLGVBQUEsRUFDQVAsS0FBQUUsU0FBQU0sU0FBQSxnQkFDQVIsS0FBQUUsU0FBQU8sV0FBQSxHQUFBQyxVQUFBLEVBQUEsR0FDQVYsS0FBQUUsU0FBQVMsZUFBQSxVQUNBWCxLQUFBRSxTQUFBVSxZQUFBLEdBQUFGLFVBQUEsRUFBQSxHQUNBVixLQUFBRSxTQUFBVyxhQUFBLEVBQ0FiLEtBQUFFLFNBQUFZLFFBQUEsR0FBQUosVUFBQSxFQUFBLElBQ0FWLEtBQUFFLFNBQUFhLFVBQUEsVUFFQWYsS0FBQUUsU0FBQWMsSUFBQSxHQUFBTixVQUFBLEVBQUEsR0FFQVYsS0FBQUUsU0FBQWUsT0FBQSxHQUVBakIsS0FBQUUsU0FBQWdCLE1BQUEsRUFFQWxCLEtBQUFBLFFBQUEsRUFDQUEsS0FBQW1CLE1BQUEsRUFFQW5CLEtBQUFvQixpQkFBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEsTUFBQXRCLEtBQUFMLEtBQUEsMkJBQ0E0QixFQUFBQyxLQUFBQyxPQUFBSixFQUFBckIsS0FBQUgsTUFBQUcsS0FBQUosT0FBQSxLQUFBLElBQ0FvQixFQUFB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Q0EsR0FBQTBCLEVBQUFOLFFBQUFuRCxHQUFBZ0IsS0FBQW9DLEVBQUFyQixHQUFBZ0QsSUFBQSxDQUNBdEIsRUFBQU4sUUFBQW5ELEdBQUEyQixjQUFBeUIsRUFBQXJCLEdBQUFrRCxrQkFDQSxTQU1BMUksS0FBQTJLLFNBQUEsU0FBQTVCLEVBQUF0QixHQUNBbUQsUUFBQUMsSUFBQTlCLEVBQUF0QiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gVHJhZGVyKG5hbWUsIGFtb3VudCwgaW5BdCwgaXNTaG9ydCwgY29tbWVudCkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5hbW91bnQgPSBhbW91bnQ7XG4gICAgdGhpcy5pbkF0ID0gaW5BdDtcbiAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICAgIHRoaXMuaXNTaG9ydCA9IGlzU2hvcnQ7XG4gICAgdGhpcy5kaWZmZXJlbmNlID0gMDtcbiAgICB0aGlzLmRyYXdhYmxlID0gbmV3IERyYXdhYmxlKCk7XG5cbiAgICB0aGlzLmRyYXdhYmxlLmNvbG9yID0gXCIjZmZmZmZmXCI7XG5cbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlckNvbG9yID0gXCIjQjNCMzY5XCI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJTY2FsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0Rm9udCA9IFwiU291cmNlU2Fuc1Byb1wiO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dEFuY2hvciA9IG5ldyBWZWN0b3IyRCgwLCAxKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjZmZmZmZmXCI7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UGFkZGluZyA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRTY2FsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UG9zID0gbmV3IFZlY3RvcjJEKDEsIC0xKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRDb2xvciA9IFwiIzJDM0U1MFwiO1xuXG4gICAgdGhpcy5kcmF3YWJsZS5wb3MgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG5cbiAgICB0aGlzLmRyYXdhYmxlLnJhZGl1cyA9IDI1O1xuXG4gICAgdGhpcy5kcmF3YWJsZS5zaG93ID0gZmFsc2U7XG5cbiAgICB0aGlzLm5ldyA9IHRydWU7XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG5cbiAgICB0aGlzLmNoYW5nZVN0b2NrUHJpY2UgPSBmdW5jdGlvbihzdG9ja1ByaWNlKSB7XG4gICAgICAgIHZhciBwcmVzZXQgPSBcIltiXVwiICsgdGhpcy5uYW1lICsgXCJbL2JdW2FsaWduPXJpZ2h0XVtjb2xvcj1cIjtcbiAgICAgICAgdmFyIGRpZmYgPSBNYXRoLmZsb29yKChzdG9ja1ByaWNlIC0gdGhpcy5pbkF0KSAqIHRoaXMuYW1vdW50ICogMTAwKSAvIDEwMDtcbiAgICAgICAgdmFyIHBvcyA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB2YXIgbmVnID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIGlmKCF0aGlzLmlzU2hvcnQpIHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmVyZW5jZSA9IGRpZmY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRpZmZlcmVuY2UgPSAtZGlmZjtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmRpZmZlcmVuY2UgPj0gMCkge1xuICAgICAgICAgICAgcHJlc2V0ICs9IHBvcyArIFwiXVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJlc2V0ICs9IG5lZyArIFwiXVwiO1xuICAgICAgICB9XG4gICAgICAgIHByZXNldCArPSB0aGlzLmRpZmZlcmVuY2UudG9Mb2NhbGVTdHJpbmcoJ2JlLU5MJywge3N0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUid9KSArIFwiWy9jb2xvcl1bL2FsaWduXVxcXFxuW2ldW2NvbG9yPVwiO1xuICAgICAgICBpZighdGhpcy5pc1Nob3J0KSB7XG4gICAgICAgICAgICBwcmVzZXQgKz0gcG9zICsgXCJdXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmVzZXQgKz0gbmVnICsgXCJdXCI7XG4gICAgICAgIH1cbiAgICAgICAgcHJlc2V0ICs9IGFtb3VudDtcbiAgICAgICAgaWYoIXRoaXMuaXNTaG9ydCkge1xuICAgICAgICAgICAgcHJlc2V0ICs9IFwiIGxvbmcgYXQgXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmVzZXQgKz0gXCIgc2hvcnQgYXQgXCI7XG4gICAgICAgIH1cbiAgICAgICAgcHJlc2V0ICs9IGluQXQudG9Mb2NhbGVTdHJpbmcoJ2JlLU5MJywge3N0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUid9KSArIFwiWy9jb2xvcl1bL2ldXFxcXG5cIjtcbiAgICAgICAgdGhpcy5kcmF3YWJsZS5zZXRUZXh0KHByZXNldCArIHRoaXMuY29tbWVudCk7XG4gICAgfTtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRoaXMuZHJhd2FibGUucG9zLnJvdGF0ZSh0aGlzLmRyYXdhYmxlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgKj0gdGhpcy5kcmF3YWJsZS5vcGFjaXR5O1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShwLngsIHAueSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdDaXJjbGUoY3R4KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd0ltYWdlSW5DaXJjbGUoY3R4KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd0JvcmRlckZvckNpcmNsZShjdHgsIHNjYWxlKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5wb3N0RHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRoaXMuZHJhd2FibGUucG9zLnJvdGF0ZSh0aGlzLmRyYXdhYmxlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgKj0gdGhpcy5kcmF3YWJsZS5vcGFjaXR5O1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShwLngsIHAueSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdUZXh0KGN0eCwgc2NhbGUpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgaWYoIXRoaXMub3Blbikge1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlKFwidGV4dFNpemVcIiwgMTIsIDIwMCwgXCJlYXNlSW5PdXRcIiwgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGVWZWN0b3IoXCJ0ZXh0UGFkZGluZ1wiLCBuZXcgVmVjdG9yMkQoMTAsIDEwKSwgMjAwLCBcImVhc2VJbk91dFwiLCBmdW5jdGlvbihmaW5pc2hlZCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlKFwidGV4dFNpemVcIiwgMCwgMjAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMjAwLCBcImVhc2VJbk91dFwiLCBmdW5jdGlvbihmaW5pc2hlZCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uKHRyYWRlcywgaW5kZXgpIHtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICBpZih0eXBlb2YgaW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICAgICAgZm9yKHZhciBsID0gdHJhZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRyYWRlc1tpXS50cmFkZXJzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHZhciBpbmQgPSB0cmFkZXNbaV0udHJhZGVycy5pbmRleE9mKHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmIChpbmQgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0cmFkZXNbaV0udHJhZGVycy5zcGxpY2UoaW5kLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhZGVzW2ldLmNhbGNUcmFkZXJzKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKHRyYWRlc1tpXS50cmFkZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhZGVzW2ldLmFuaW1hdGVEZWxldGUodHJhZGVzLCBpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmludGVyYWN0aW9uID0gZnVuY3Rpb24obW91c2VQb3MsIHNjYWxlKSB7XG4gICAgICAgIHZhciBtb3VzZURpZmZlcmVuY2UgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5kcmF3YWJsZS5wb3Mucm90YXRlKHRoaXMuZHJhd2FibGUucm90YXRpb24pLm11bChzY2FsZSkpO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IDA7XG4gICAgICAgIGlmICh0aGlzLmRyYXdhYmxlLnJhZGl1cyAhPT0gMCkge1xuICAgICAgICAgICAgZGlmZmVyZW5jZSA9IHRoaXMuZHJhd2FibGUucmFkaXVzICogc2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAhPT0gMCkge1xuICAgICAgICAgICAgZGlmZmVyZW5jZSA9IHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3VzZURpZmZlcmVuY2UubGVuZ3RoKCkgPD0gZGlmZmVyZW5jZSAmJiB0aGlzLmRyYXdhYmxlLnNob3cpIHtcbiAgICAgICAgICAgIGlmKHRoaXMubmV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG59IiwidmFyIFRyYWRlID0gZnVuY3Rpb24oaWQsIHN0b2NrUHJpY2UsIHRyYWRlcnMsIHBvcykge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLnN0b2NrUHJpY2UgPSBzdG9ja1ByaWNlO1xuICAgIHRoaXMudHJhZGVycyA9IHRyYWRlcnM7XG4gICAgdGhpcy5kcmF3YWJsZSA9IG5ldyBEcmF3YWJsZSgpO1xuXG4gICAgdGhpcy5kaWZmZXJlbmNlID0gMDtcbiAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLnRyYWRlcnNbaV0uY2hhbmdlU3RvY2tQcmljZSh0aGlzLnN0b2NrUHJpY2UpO1xuICAgICAgICB0aGlzLmRpZmZlcmVuY2UgKz0gdGhpcy50cmFkZXJzW2ldLmRpZmZlcmVuY2U7XG4gICAgfVxuICAgIHRoaXMuZGlmZmVyZW5jZSA9IE1hdGguZmxvb3IodGhpcy5kaWZmZXJlbmNlICogMTAwKSAvIDEwMDtcbiAgICB0aGlzLmRyYXdhYmxlLnNldFRleHQodGhpcy5kaWZmZXJlbmNlLnRvTG9jYWxlU3RyaW5nKCdiZS1OTCcsIHsgc3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnRVVSJ30pKTtcbiAgICBpZih0aGlzLmRpZmZlcmVuY2UgPj0gMCkge1xuICAgICAgICB0aGlzLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjMzZCNURCXCI7XG4gICAgICAgIHRoaXMuZHJhd2FibGUudGV4dFJlcGxhY2VDb2xvciA9IFwiIzM2QjVEQlwiO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZHJhd2FibGUudGV4dEJhY2tncm91bmQgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgdGhpcy5kcmF3YWJsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjRTc0QzNDXCI7XG4gICAgfVxuICAgIHRoaXMubGluZUNvbG9yID0gXCIjQjNCMzY5XCI7XG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG5cbiAgICB0aGlzLmRyYXdhYmxlLnRleHRTaXplID0gMTA7XG4gICAgdGhpcy5kcmF3YWJsZS5yYWRpdXMgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMzUpICsgMzUpO1xuICAgIHRoaXMuZHJhd2FibGUuaW1nRmlsbCA9IGZhbHNlO1xuICAgIGlmKHBvcyA9PT0gbnVsbCkge1xuICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lcldpZHRoIC0gKHdpbmRvdy5pbm5lcldpZHRoIC8gMikpO1xuICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCkgLSAoKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAvIDIpKTtcbiAgICAgICAgd2hpbGUobmV3IFZlY3RvcjJEKHgsIHkpLmxlbmd0aCgpIDwgKDEwMCArIHRoaXMuZHJhd2FibGUucmFkaXVzKSB8fCBuZXcgVmVjdG9yMkQoeCwgeSkubGVuZ3RoKCkgPiAobmV3IFZlY3RvcjJEKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCkuZGl2KDIpLmxlbmd0aCgpIC0gdGhpcy5kcmF3YWJsZS5yYWRpdXMpKSB7XG4gICAgICAgICAgICB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVyV2lkdGggLSAod2luZG93LmlubmVyV2lkdGggLyAyKSk7XG4gICAgICAgICAgICB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAtICgod2luZG93LmlubmVySGVpZ2h0IC0gNTApIC8gMikpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInBvc1wiLCBuZXcgVmVjdG9yMkQoeCwgeSksIDEwMDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwicG9zXCIsIHBvcywgMTAwMCwgXCJlYXNlSW5PdXRcIiwgbnVsbCk7XG4gICAgfVxuICAgIHRoaXMuZHJhd2FibGUuY29sb3IgPSBcIiNmZmZmZmZcIjtcbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlcldpZHRoID0gMjtcbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlckNvbG9yID0gXCIjQjNCMzY5XCI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJTY2FsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0Q29sb3IgPSBcIiNmZmZmZmZcIjtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRGb250ID0gXCJTb3VyY2VTYW5zUHJvXCI7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0QW5jaG9yID0gbmV3IFZlY3RvcjJEKDAuNSwgMC41KTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRQb3MgPSBuZXcgVmVjdG9yMkQoMCwgMC41KTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRQYWRkaW5nID0gbmV3IFZlY3RvcjJEKDEwLCAxMCk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UmVwbGFjZSA9IDE1O1xuXG4gICAgdGhpcy5zZXRTdG9ja1ByaWNlID0gZnVuY3Rpb24oc3RvY2tQcmljZSkge1xuICAgICAgICB0aGlzLnN0b2NrUHJpY2UgPSBzdG9ja1ByaWNlO1xuICAgICAgICB0aGlzLmRpZmZlcmVuY2UgPSAwO1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50cmFkZXJzW2ldLmNoYW5nZVN0b2NrUHJpY2UodGhpcy5zdG9ja1ByaWNlKTtcbiAgICAgICAgICAgIHRoaXMuZGlmZmVyZW5jZSArPSB0aGlzLnRyYWRlcnNbaV0uZGlmZmVyZW5jZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpZmZlcmVuY2UgPSBNYXRoLmZsb29yKHRoaXMuZGlmZmVyZW5jZSAqIDEwMCkgLyAxMDA7XG4gICAgICAgIGlmKCF0aGlzLm9wZW4pIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuc2V0VGV4dCh0aGlzLmRpZmZlcmVuY2UudG9Mb2NhbGVTdHJpbmcoJ2JlLU5MJywgeyBzdHlsZTogJ2N1cnJlbmN5JywgY3VycmVuY3k6ICdFVVInfSkpO1xuICAgICAgICAgICAgaWYodGhpcy5kaWZmZXJlbmNlID49IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjMzZCNURCXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjMzZCNURCXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd2FibGUudGV4dEJhY2tncm91bmQgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnRleHRSZXBsYWNlQ29sb3IgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmKHRoaXMuZGlmZmVyZW5jZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjMzZCNURCXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd2FibGUudGV4dFJlcGxhY2VDb2xvciA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiIzJDM0U1MFwiO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5zZXRUZXh0KHRoaXMuc3RvY2tQcmljZS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUid9KSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kcmF3YWJsZS5yZXF1ZXN0UmVkcmF3ID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgdGhpcy5pbnRlcmFjdGlvbiA9IGZ1bmN0aW9uKG1vdXNlUG9zLCBzY2FsZSkge1xuICAgICAgICB2YXIgbW91c2VEaWZmZXJlbmNlID0gbW91c2VQb3Muc3ViVmVjdG9yKHRoaXMuZHJhd2FibGUucG9zLm11bChzY2FsZSkpO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IDA7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUucmFkaXVzICE9PSAwKSB7XG4gICAgICAgICAgICBkaWZmZXJlbmNlID0gdGhpcy5kcmF3YWJsZS5yYWRpdXMgKiBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgIT09IDApIHtcbiAgICAgICAgICAgIGRpZmZlcmVuY2UgPSB0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgKiBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VEaWZmZXJlbmNlLmxlbmd0aCgpIDw9IGRpZmZlcmVuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWxQb3MgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5kcmF3YWJsZS5wb3MubXVsKHNjYWxlKSk7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHRoaXMudHJhZGVyc1tpXS5pbnRlcmFjdGlvbihyZWxQb3MsIHNjYWxlKTtcbiAgICAgICAgICAgIGlmKG8gIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMCwgbSA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMudHJhZGVyc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQub3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5jbGlja2VkKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLmNhbGNUcmFkZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSAoYW5nbGUgKiAoaSArIDEgLSAoKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKSAvIDIpKSkgLSA5MDtcbiAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5kcmF3YWJsZS5hbmltYXRlKFwicm90YXRpb25cIiwgYWxwaGEsIDMwMCwgXCJlYXNlSW5PdXRcIiwgbnVsbCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuY2FsY1RyYWRlcnMoKTtcblxuICAgIHRoaXMucHJlRHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhICo9IHRoaXMuZHJhd2FibGUub3BhY2l0eTtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoaXMubGluZUNvbG9yO1xuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDAuNTtcbiAgICAgICAgICAgIHZhciBuZXdUcmFkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy50cmFkZXJzW2ldLm5ldykge1xuICAgICAgICAgICAgICAgICAgICBuZXdUcmFkZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKG5ld1RyYWRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMubGluZUNvbG9yID0gXCIjQjNCMzY5XCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubGluZUNvbG9yID0gXCIjMkMzRTUwXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKDAsIDApO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSkge1xuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnNob3cpIHtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMuZHJhd2FibGUucG9zLngsIHRoaXMuZHJhd2FibGUucG9zLnkpO1xuICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhICo9IHRoaXMuZHJhd2FibGUub3BhY2l0eTtcbiAgICAgICAgICAgIHZhciBuZXdUcmFkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFkZXJzW2ldLmRyYXcoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICAgICAgaWYodGhpcy50cmFkZXJzW2ldLm5ldykge1xuICAgICAgICAgICAgICAgICAgICBuZXdUcmFkZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKG5ld1RyYWRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYm9yZGVyQ29sb3IgPSBcIiNCM0IzNjlcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJDb2xvciA9IFwiI2VlZWVlZVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3Q2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdJbWFnZUluQ2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdCb3JkZXJGb3JDaXJjbGUoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdUZXh0KGN0eCwgc2NhbGUpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZSA9IGZ1bmN0aW9uKHRyYWRlcykge1xuICAgICAgICB2YXIgaW5kZXggPSB0cmFkZXMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudHJhZGVyc1swXS5kZWxldGUodHJhZGVzLCBpbmRleCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hbmltYXRlRGVsZXRlID0gZnVuY3Rpb24odHJhZGVzLCBpbmRleCkge1xuICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0U2l6ZVwiLCAwLCAzMDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0UmVwbGFjZVwiLCAwLCAzMDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGVWZWN0b3IoXCJ0ZXh0UGFkZGluZ1wiLCBuZXcgVmVjdG9yMkQoMCwgMCksIDMwMCwgXCJlYXNlSW5PdXRcIiwgbnVsbCk7XG4gICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZShcIm9wYWNpdHlcIiwgMCwgMzAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlKFwicmFkaXVzXCIsIDAsIDMwMCwgXCJlYXNlSW5PdXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0cmFkZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMucG9zdERyYXcgPSBmdW5jdGlvbihjdHgsIHNjYWxlKSB7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUuc2hvdykge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC5nbG9iYWxBbHBoYSAqPSB0aGlzLmRyYXdhYmxlLm9wYWNpdHk7XG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMuZHJhd2FibGUucG9zLngsIHRoaXMuZHJhd2FibGUucG9zLnkpO1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWRlcnNbaV0ucG9zdERyYXcoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDAsIGwgPSAwLCB0ID0gbnVsbCwgbWUgPSB0aGlzO1xuICAgICAgICBpZighdGhpcy5vcGVuKSB7XG4gICAgICAgICAgICBmb3IobCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgICAgIHQuZHJhd2FibGUuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdC5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwicG9zXCIsIG5ldyBWZWN0b3IyRCgwLCB0aGlzLmRyYXdhYmxlLnJhZGl1cyArIHQuZHJhd2FibGUucmFkaXVzICsgMTUpLCAzMDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwidGV4dFBhZGRpbmdcIiwgbmV3IFZlY3RvcjJEKDAsIDApLCAxNTAsIFwiZWFzZUluXCIsIGZ1bmN0aW9uKGRvbmUsIGRyYXdhYmxlKSB7XG4gICAgICAgICAgICAgICAgZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgxMCwgMTApLCAxNTAsIFwiZWFzZU91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlKFwidGV4dFJlcGxhY2VcIiwgMCwgMTUwLCBcImVhc2VJblwiLCBmdW5jdGlvbihkb25lLCBkcmF3YWJsZSkge1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0UmVwbGFjZVwiLCAxNSwgMTUwLCBcImVhc2VPdXRcIiwgbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZShcInRleHRTaXplXCIsIDAsIDE1MCwgXCJlYXNlSW5cIiwgZnVuY3Rpb24oZG9uZSwgZHJhd2FibGUpIHtcbiAgICAgICAgICAgICAgICBkcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiIzJDM0U1MFwiO1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlLnNldFRleHQobWUuc3RvY2tQcmljZS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUid9KSk7XG4gICAgICAgICAgICAgICAgbWUub3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgZHJhd2FibGUuYW5pbWF0ZShcInRleHRTaXplXCIsIDEwLCAxNTAsIFwiZWFzZU91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGYgPSBmdW5jdGlvbihkb25lLCBkcmF3YWJsZSkge1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlLnNob3cgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IobCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmKHQub3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdC5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwicG9zXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMzAwLCBcImVhc2VJbk91dFwiLCBmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMTUwLCBcImVhc2VJblwiLCBmdW5jdGlvbihkb25lLCBkcmF3YWJsZSkge1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlLmFuaW1hdGVWZWN0b3IoXCJ0ZXh0UGFkZGluZ1wiLCBuZXcgVmVjdG9yMkQoMTAsIDEwKSwgMTUwLCBcImVhc2VPdXRcIiwgbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZShcInRleHRSZXBsYWNlXCIsIDAsIDE1MCwgXCJlYXNlSW5cIiwgZnVuY3Rpb24oZG9uZSwgZHJhd2FibGUpIHtcbiAgICAgICAgICAgICAgICBkcmF3YWJsZS5hbmltYXRlKFwidGV4dFJlcGxhY2VcIiwgMTUsIDE1MCwgXCJlYXNlT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0U2l6ZVwiLCAwLCAxNTAsIFwiZWFzZUluXCIsIGZ1bmN0aW9uKGRvbmUsIGRyYXdhYmxlKSB7XG4gICAgICAgICAgICAgICAgZHJhd2FibGUuc2V0VGV4dChtZS5kaWZmZXJlbmNlLnRvTG9jYWxlU3RyaW5nKCdiZS1OTCcsIHsgc3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnRVVSJ30pKTtcbiAgICAgICAgICAgICAgICBpZihtZS5kaWZmZXJlbmNlID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZHJhd2FibGUudGV4dEJhY2tncm91bmQgPSBcIiMzNkI1REJcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtZS5vcGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZHJhd2FibGUuYW5pbWF0ZShcInRleHRTaXplXCIsIDEwLCAxNTAsIFwiZWFzZU91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVxdWVzdFJlZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy50cmFkZXJzW2ldLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5kcmF3YWJsZS5yZXF1ZXN0UmVkcmF3ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5yZXF1ZXN0UmVkcmF3KSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufTsiLCJ2YXIgdHJhZGVDYW52YXMgPSBmdW5jdGlvbih1c2VyLCB0cmFkZXJzKSB7XG4gICAgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0cmFkZXNcIikgIT09IG51bGwpIHtcbiAgICAgICAgLy9kZWNsYXJlIGJhc2ljIHZhcnM7XG4gICAgICAgIHZhciBvYmplY3RzID0gW107XG4gICAgICAgIHZhciBjb21wYW5pZXMgPSBbXTtcbiAgICAgICAgdmFyIHByb2ZpbGUgPSBuZXcgRHJhd2FibGUoKTtcbiAgICAgICAgdmFyIHRyYXNoID0gbmV3IERyYXdhYmxlKCk7XG5cbiAgICAgICAgLy9jcmVhdGUgdGhlIHByb2ZpbGVcbiAgICAgICAgcHJvZmlsZS5zZXRJbWFnZSh1c2VyLnByb2ZpbGVwaWN0dXJlLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbnZhcy5kcmF3KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBwcm9maWxlLnJhZGl1cyA9IDEwMDtcbiAgICAgICAgcHJvZmlsZS5jb2xvciA9IFwiI2ZmZmZmZlwiO1xuICAgICAgICBwcm9maWxlLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgICAgIHByb2ZpbGUuYm9yZGVyU2NhbGluZyA9IGZhbHNlO1xuICAgICAgICBwcm9maWxlLmJvcmRlcldpZHRoID0gMjtcbiAgICAgICAgcHJvZmlsZS50ZXh0U2l6ZSA9IDEyO1xuICAgICAgICBwcm9maWxlLnRleHRDb2xvciA9IFwiI2ZmZmZmZlwiO1xuICAgICAgICBwcm9maWxlLnRleHRGb250ID0gXCJTb3VyY2VTYW5zUHJvXCI7XG4gICAgICAgIHByb2ZpbGUudGV4dEFuY2hvciA9IG5ldyBWZWN0b3IyRCgwLjUsIDAuNSk7XG4gICAgICAgIHByb2ZpbGUudGV4dFBvcyA9IG5ldyBWZWN0b3IyRCgwLCAwLjUpO1xuICAgICAgICBwcm9maWxlLnRleHRQYWRkaW5nID0gbmV3IFZlY3RvcjJEKDEwLCAxMCk7XG4gICAgICAgIHByb2ZpbGUudGV4dFJlcGxhY2UgPSAxNTtcblxuICAgICAgICAvL2RlZmluZSBob3cgdGhlIHByb2ZpbGUgaXMgZHJhd25cbiAgICAgICAgcHJvZmlsZS5kcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSkge1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdJbWFnZUluQ2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdCb3JkZXJGb3JDaXJjbGUoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdUZXh0KGN0eCwgc2NhbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vY3JlYXRlIHRoZSB0cmFzaCBpY29uXG4gICAgICAgIHRyYXNoLnNldEltYWdlKFwiZGlzdC9pbWFnZXMvbWlzYy90cmFzaC5zdmdcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdHJhc2gucmFkaXVzID0gNTA7XG4gICAgICAgIHRyYXNoLmNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgICAgIHRyYXNoLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgICAgIHRyYXNoLmJvcmRlclNjYWxpbmcgPSBmYWxzZTtcbiAgICAgICAgdHJhc2guYm9yZGVyV2lkdGggPSAyO1xuICAgICAgICB0cmFzaC5wb3MgPSBuZXcgVmVjdG9yMkQod2luZG93LmlubmVyV2lkdGggLSAxMDAsIHdpbmRvdy5pbm5lckhlaWdodCAtIDE1MCk7XG5cbiAgICAgICAgLy9kZWZpbmUgaG93IHRoZSBpbnRlcmFjdGlvbiB3aXRoIHRoZSB0cmFzaCBjYW4gaXMgY2FsY3VsYXRlZFxuICAgICAgICB0cmFzaC5pbnRlcmFjdGlvbiA9IGZ1bmN0aW9uKG1vdXNlUG9zKSB7XG4gICAgICAgICAgICB2YXIgbW91c2VEaWZmZXJlbmNlID0gbW91c2VQb3Muc3ViVmVjdG9yKGNhbnZhcy5tYXJnaW4pLnN1YlZlY3Rvcih0aGlzLnBvcyk7XG4gICAgICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IHRoaXMucmFkaXVzICogY2FudmFzLnNjYWxlO1xuICAgICAgICAgICAgcmV0dXJuIChtb3VzZURpZmZlcmVuY2UubGVuZ3RoKCkgPD0gZGlmZmVyZW5jZSAmJiB0aGlzLnNob3cpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vZGVmaW5lIGhvdyB0aGUgdHJhc2ggY2FuIGlzIGRyYXduXG4gICAgICAgIHRyYXNoLmRyYXcgPSBmdW5jdGlvbihjdHgsIHNjYWxlKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRoaXMucG9zLnN1YlZlY3RvcihjYW52YXMub2Zmc2V0KS5zdWJWZWN0b3IoY2FudmFzLmNlbnRlcikubXVsKDEgLyBjYW52YXMuc2NhbGUpO1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUocC54LCBwLnkpO1xuICAgICAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdJbWFnZUluQ2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdCb3JkZXJGb3JDaXJjbGUoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vbG9hZCB0cmFkZXNcbiAgICAgICAgdmFyIGRpZmYgPSAwO1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdXNlci50cmFkZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHVzZXIudHJhZGVzW2ldO1xuICAgICAgICAgICAgLy9pZiB0cmFkZSBpc24ndCBjbG9zZWQgeWV0XG4gICAgICAgICAgICBpZih0LlN0b3BTdG9ja1ByaWNlICE9PSB1bmRlZmluZWQgfHwgdC5TdG9wU3RvY2tQcmljZSA8IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgYztcbiAgICAgICAgICAgICAgICB2YXIgdHJhZGVyO1xuICAgICAgICAgICAgICAgIC8vaWYgdHJhZGUgaXMgc3RhcnRlZCBieSBjdXJyZW50IHVzZXIsIHRyYWRlciBpcyBjdXJyZW50IHVzZXJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHQuUGFyZW50VHJhZGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWRlciA9IG5ldyBUcmFkZXIodXNlci5maXJzdG5hbWUgKyBcIiBcIiArIHVzZXIubGFzdG5hbWUsICh0LkFtb3VudEludmVzdGVkIC8gdC5TdGFydFN0b2NrUHJpY2UpLCB0LlN0YXJ0U3RvY2tQcmljZSwgdC5Jc1Nob3J0LCB0LkNvbW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0cmFkZXIuZHJhd2FibGUuc2V0SW1hZ2UodXNlci5wcm9maWxlcGljdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgIHRyYWRlci5pc05ldyA9IHQuSXNOZXc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaW5kZXggPSAwLCBsZW5ndGggPSB0cmFkZXJzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgam5kZXggPSAwLCBtZW5ndGggPSB0cmFkZXJzW2luZGV4XS50cmFkZXMubGVuZ3RoOyBqbmRleCA8IG1lbmd0aDsgam5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHQuUGFyZW50VHJhZGUgPT09IHRyYWRlcnNbaW5kZXhdLnRyYWRlc1tqbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhZGVyID0gbmV3IFRyYWRlcih0cmFkZXJzW2luZGV4XS5maXJzdG5hbWUgKyBcIiBcIiArIHRyYWRlcnNbaW5kZXhdLmxhc3RuYW1lLCAodC5BbW91bnRJbnZlc3RlZCAvIHQuU3RhcnRTdG9ja1ByaWNlKSwgdC5TdGFydFN0b2NrUHJpY2UsIHQuSXNTaG9ydCwgdC5Db21tZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhZGVyLmRyYXdhYmxlLnNldEltYWdlKCdodHRwOi8vbG9jYWxob3N0OjMwMDAvZGlzdC9pbWFnZXMvcHJvZmlsZXMvcHJvZmlsZS5qcGcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWYgdGhlIGNvbXBhbnkgaXMgYWxyZWFkeSBiZWluZyBkcmF3biBvbiBzY3JlZW4sIGFkZCB0aGUgdHJhZGVyIHRvIHRoZSBjb21wYW55XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBhbnlGb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBtID0gY29tcGFuaWVzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjID0gY29tcGFuaWVzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYy5pZCA9PT0gdC5Db21wYW55Ll9pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGFueUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGMudHJhZGVycy5wdXNoKHRyYWRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2lmIG5vdCwgY3JlYXRlIGEgbmV3IGNvbXBhbnkgYW5kIGFkZCB0aGUgdHJhZGVyIHRvIGl0XG4gICAgICAgICAgICAgICAgaWYgKCFjb21wYW55Rm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogdC5Db21wYW55Ll9pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3RvY2tQcmljZVwiOiB0LkNvbXBhbnkuQ3VycmVudFN0b2NrUHJpY2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRyYWRlcnNcIjogW3RyYWRlcl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcImltYWdlXCI6IHQuQ29tcGFueS5JbWFnZVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjb21wYW5pZXMucHVzaChjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvL2ZvciBldmVyeSBjb21wYW55LCBjcmVhdGUgYSBUcmFkZSBvYmplY3QgYW5kIGFkZCBpdCB0byB0aGUgY2FudmFzIG9iamVjdHNcbiAgICAgICAgZm9yKHZhciBrID0gMCwgbiA9IGNvbXBhbmllcy5sZW5ndGg7IGsgPCBuOyBrKyspIHtcbiAgICAgICAgICAgIHZhciB0cmFkZSA9IG5ldyBUcmFkZShjb21wYW5pZXNba10uaWQsIGNvbXBhbmllc1trXS5zdG9ja1ByaWNlLCBjb21wYW5pZXNba10udHJhZGVycywgbnVsbCk7XG4gICAgICAgICAgICB0cmFkZS5kcmF3YWJsZS5zZXRJbWFnZShjb21wYW5pZXNba10uaW1hZ2UpO1xuICAgICAgICAgICAgb2JqZWN0cy5wdXNoKHRyYWRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vYWRkIHRoZSBwcm9maWxlIGFuZCB0aGUgdHJhc2hjYW5cbiAgICAgICAgb2JqZWN0cy5wdXNoKHByb2ZpbGUpO1xuICAgICAgICBvYmplY3RzLnB1c2godHJhc2gpO1xuXG4gICAgICAgIC8vaWYgYSB1c2VyIGlzIGN1cnJlbnRseSBtYWtpbmcgcHJvZml0LCBjb2xvciB0aGUgdGV4dCBibHVlLCBpZiBub3QsIGNvbG9yIGl0IHJlZFxuICAgICAgICBpZihkaWZmID49IDApIHtcbiAgICAgICAgICAgIHByb2ZpbGUudGV4dEJhY2tncm91bmQgPSBcIiMzNkI1REJcIjtcbiAgICAgICAgICAgIHByb2ZpbGUudGV4dFJlcGxhY2VDb2xvciA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvZmlsZS50ZXh0QmFja2dyb3VuZCA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICAgICAgcHJvZmlsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIH1cbiAgICAgICAgcHJvZmlsZS5zZXRUZXh0KChNYXRoLmZsb29yKGRpZmYgKiAxMDApIC8gMTAwKS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7c3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnRVVSJ30pKTtcblxuICAgICAgICAvL2NyZWF0ZSBhIGNhbnZhcywgc2V0IHRoZSBvYmplY3RzIGFuZCBzZXQgYSBjYWxsYmFjayB0aGF0IGhhcHBlbnMgd2hlbmV2ZXIgdGhlIGNhbnZhcyBpcyByZWRyYXduXG4gICAgICAgIC8vdGhlIGNhbnZhcyBkb2Vzbid0IG5lZWQgdG8gYmUgZHJhd24gYSBmaXJzdCB0aW1lLCBpdCB3aWxsIGJlIGRyYXduIGV2ZXJ5IHRpbWUgYW4gaW1hZ2UgaXMgc2V0XG4gICAgICAgIHZhciBjYW52YXMgPSBuZXcgQ2FudmFzKDAsIDUwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0IC0gNTAsIFwidHJhZGVzXCIsIG9iamVjdHMpO1xuICAgICAgICBjYW52YXMuZHJhd0NhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvL2dldCB0aGUgdXNlcnMgbG9zcy9wcm9maXRcbiAgICAgICAgICAgIHZhciBkaWZmID0gMDtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSBjYW52YXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgY2FudmFzLm9iamVjdHNbaV0uZGlmZmVyZW5jZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGlmZiArPSBjYW52YXMub2JqZWN0c1tpXS5kaWZmZXJlbmNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vc2V0IHRoZSB0ZXh0XG4gICAgICAgICAgICBpZihkaWZmID49IDApIHtcbiAgICAgICAgICAgICAgICBwcm9maWxlLnRleHRCYWNrZ3JvdW5kID0gXCIjMzZCNURCXCI7XG4gICAgICAgICAgICAgICAgcHJvZmlsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjMzZCNURCXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb2ZpbGUudGV4dEJhY2tncm91bmQgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgICAgICBwcm9maWxlLnRleHRSZXBsYWNlQ29sb3IgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByb2ZpbGUuc2V0VGV4dCgoTWF0aC5mbG9vcihkaWZmICogMTAwKSAvIDEwMCkudG9Mb2NhbGVTdHJpbmcoJ2JlLU5MJywge3N0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUid9KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy93aGVuIGEgdXNlciBzdGFydHMgaW50ZXJhY3Rpb24gd2l0aCB0aGUgY2FudmFzXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaW50ZXJhY3Rpb25TdGFydChlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTtcbiAgICAgICAgICAgIGludGVyYWN0aW9uU3RhcnQodG91Y2gpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGludGVyYWN0aW9uU3RhcnQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAvL3RlbGwgdGhlIGNhbnZhcyB0aGUgaW50ZXJhY3Rpb24gaGFzIHN0YXJ0ZWRcbiAgICAgICAgICAgIC8vY2FsbGJhY2sgd2lsbCByZXR1cm4gdGhlIG9iamVjdCB0aGF0IGlzIGJlaW5nIGludGVyYWN0ZWQgd2l0aCBhbmQgdGhlIG1vdXNlIHBvc2l0aW9uXG4gICAgICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25TdGFydChlLCBmdW5jdGlvbihvYmplY3QsIG1vdXNlUG9zKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4O1xuICAgICAgICAgICAgICAgIC8vaWYgdGhlIG9iamVjdCBpcyBhIFRyYWRlLCBzZXQgaXQgdG8gYmUgdGhlIHRvcCBvYmplY3RcbiAgICAgICAgICAgICAgICBpZihvYmplY3QgaW5zdGFuY2VvZiBUcmFkZSkge1xuICAgICAgICAgICAgICAgICAgICBpbmRleCA9IGNhbnZhcy5vYmplY3RzLmluZGV4T2Yob2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLm9iamVjdHMucHVzaChjYW52YXMub2JqZWN0cy5zcGxpY2UoaW5kZXgsIDEpWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy9pZiB0aGUgb2JqZWN0IGlzIGEgVHJhZGVyLCBtYWtlIHN1cmUgaXQgcmV0dXJucyB0byBpdHMgb3JpZ2luYWwgcG9zaXRpb24gYWZ0ZXIgaW50ZXJhY3RpbmdcbiAgICAgICAgICAgICAgICBpZihvYmplY3QgaW5zdGFuY2VvZiBUcmFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRyYXdhYmxlLnJldHVyblBvcyA9IG9iamVjdC5kcmF3YWJsZS5wb3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWYgdGhlIG9iamVjdCBpcyB0aGUgY2FudmFzIGl0c2VsZiwgc2V0IHRoZSB0cmFzaCBjYW4gdG8gYmUgdGhlIHRvcCBvYmplY3RcbiAgICAgICAgICAgICAgICBpZihvYmplY3QgPT09IFwic2VsZlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gY2FudmFzLm9iamVjdHMuaW5kZXhPZih0cmFzaCk7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzLnB1c2godHJhc2gpO1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvL2tlZXAgdHJhY2sgb2Ygd2hhdCBoYXBwZW5lZCBpbiBwcmVwYXJhdGlvbiBmb3IgZnVydGhlciBpbnRlcmFjdGlvbnNcbiAgICAgICAgICAgICAgICBjYW52YXMuc2VsZWN0ZWQgPSBvYmplY3Q7XG4gICAgICAgICAgICAgICAgY2FudmFzLm1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAvL3doZW4gYSB1c2VyIG1vdmVzIHRoZSBzZWxlY3RlZCBvYmplY3RcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0cmFkZXNcIikuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpbnRlcmFjdGlvbk1vdmUoZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYWRlc1wiKS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTtcbiAgICAgICAgICAgIGludGVyYWN0aW9uTW92ZSh0b3VjaCk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgaW50ZXJhY3Rpb25Nb3ZlID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgLy90ZWxsIHRoZSBjYW52YXMgdGhlIGludGVyYWN0aW9uIGlzIG1vdmluZ1xuICAgICAgICAgICAgLy9jYW52YXMgcmV0dXJucyB0aGUgb2JqZWN0IGJlaW5nIGludGVyYWN0ZWQgd2l0aCwgdGhlIGN1cnJlbnQgbW91c2UgcG9zaXRpb24gYW5kIHRoZSBkaWZmZXJlbmNlIGNvbXBhcmVkIHRvIHRoZSBsYXN0IG1vdXNlIHBvc2l0aW9uXG4gICAgICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25Nb3ZlKGUsIGZ1bmN0aW9uKG9iamVjdCwgbW91c2VQb3MsIGRpZmZlcmVuY2UpIHtcbiAgICAgICAgICAgICAgICAvL2lmIHRoZSBvYmplY3QgaXMgYSBUcmFkZSwgbG93ZXIgdGhlIG9wYWNpdHkgYW5kIG1ha2UgaXQgZm9sbG93IHRoZSBtb3VzZVxuICAgICAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5kcmF3YWJsZS5vcGFjaXR5ID0gMC41O1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZHJhd2FibGUucG9zID0gbW91c2VQb3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWYgdGhlIG9iamVjdCBpcyBhIFRyYWRlciwgbG93ZXIgdGhlIG9wYWNpdHkgYW5kIG1ha2UgaXQgZm9sbG93IHRoZSBtb3VzZVxuICAgICAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlcikge1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QuZHJhd2FibGUub3BhY2l0eSA9IDAuNTtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRyYXdhYmxlLnBvcyA9IG9iamVjdC5kcmF3YWJsZS5wb3MuYWRkVmVjdG9yKGRpZmZlcmVuY2Uucm90YXRlKC1vYmplY3QuZHJhd2FibGUucm90YXRpb24pLm11bCgxIC8gY2FudmFzLnNjYWxlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWYgdGhlIG9iamVjdCBpcyBob3ZlcmluZyBvdmVyIHRoZSB0cmFzaCBjYW4sIGNvbG9yIHRoZSBjYW4gcmVkXG4gICAgICAgICAgICAgICAgaWYodHJhc2guaW50ZXJhY3Rpb24obmV3IFZlY3RvcjJEKGUucGFnZVgsIGUucGFnZVkpKSkge1xuICAgICAgICAgICAgICAgICAgICB0cmFzaC5jb2xvciA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYXNoLmNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vcmVkcmF3IHRoZSBjYW52YXNcbiAgICAgICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy93aGVuIGEgdXNlciByZWxlYXNlcyB0aGUgc2VsZWN0ZWQgb2JqZWN0XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGludGVyYWN0aW9uU3RvcChlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07XG4gICAgICAgICAgICBpbnRlcmFjdGlvblN0b3AodG91Y2gpO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGludGVyYWN0aW9uU3RvcCA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vdGVsbCB0aGUgY2FudmFzIHRoZSB1c2VyIGhhcyByZWxlYXNlZCwgdGhlIGNhbGxiYWNrIHJldHVybnMgdGhlIG9iamVjdCBhbmQgaWYgaXQgd2FzIGNsaWNrZWQgb3IgZHJhZ2dlZFxuICAgICAgICAgICAgY2FudmFzLmludGVyYWN0aW9uU3RvcChmdW5jdGlvbihjbGljaywgb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGksIGw7XG4gICAgICAgICAgICAgICAgLy9pZiB0aGUgb2JqZWN0IHdhcyBjbGlja2VkXG4gICAgICAgICAgICAgICAgaWYoY2xpY2spIHtcbiAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgb2JqZWN0IHdhcyBhIFRyYWRlLCBzZXQgdGhlIG9wYWNpdHkgYmFjayB0byAxIGFuZCBjbG9zZSBhbGwgVHJhZGVzIG9uIHRoZSBjYW52YXNcbiAgICAgICAgICAgICAgICAgICAgaWYob2JqZWN0IGluc3RhbmNlb2YgVHJhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kcmF3YWJsZS5vcGFjaXR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBjYW52YXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FudmFzLm9iamVjdHNbaV0ub3BlbiAmJiBjYW52YXMub2JqZWN0c1tpXSAhPT0gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzW2ldLmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgb2JqZWN0IHdhcyBhIFRyYWRlciwgc2V0IHRoZSBvcGFjaXR5IGJhY2sgdG8gMVxuICAgICAgICAgICAgICAgICAgICBpZihvYmplY3QgaW5zdGFuY2VvZiBUcmFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kcmF3YWJsZS5vcGFjaXR5ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBvYmplY3Qgd2FzIHRoZSBjYW52YXMsIGNsb3NlIGFsbCBvYmplY3RzXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdCA9PT0gXCJzZWxmXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBjYW52YXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FudmFzLm9iamVjdHNbaV0ub3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMub2JqZWN0c1tpXS5jbGlja2VkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vaWYgdGhlIG9iamVjdHMgaGFzIGEgY2xpY2tlZCgpIGZ1bmN0aW9uLCBleGVjdXRlIGl0XG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBvYmplY3QuY2xpY2tlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vaWYgdGhlIG9iamVjdCB3YXMgZHJhZ2dlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vaWYgdGhlIG9iamVjdCBpcyBhIFRyYWRlLCBzZXQgaXRzIG9wYWNpdHkgYmFjayB0byAxXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZHJhd2FibGUub3BhY2l0eSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIHRoZSBvYmplY3Qgd2FzIGhvdmVyaW5nIG92ZXIgdGhlIHRyYXNoIGNhbiwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICBpZih0cmFzaC5pbnRlcmFjdGlvbihuZXcgVmVjdG9yMkQoZS5wYWdlWCwgZS5wYWdlWSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlbGV0ZShjYW52YXMub2JqZWN0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgb2JqZWN0IGlzIGEgVHJhZGVyLCBzZXQgaXRzIG9wYWNpdHkgYmFjayB0byAxXG4gICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRyYXdhYmxlLm9wYWNpdHkgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgVHJhZGVyIGlzbid0IGluIGl0cyBvcmlnaW5hbCBwb3NpdGlvbiwgYW5pbWF0ZSBpdCBiYWNrIHRvIHRoYXQgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG9iamVjdC5kcmF3YWJsZS5yZXR1cm5Qb3MubGVuZ3RoKCkgIT09IG9iamVjdC5kcmF3YWJsZS5wb3MubGVuZ3RoKCkgJiYgb2JqZWN0LmRyYXdhYmxlLnJldHVyblBvcy54ICE9PSBvYmplY3QuZHJhd2FibGUucG9zLngpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInBvc1wiLCBvYmplY3QuZHJhd2FibGUucmV0dXJuUG9zLCA1MDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGUgVHJhZGVyIHdhcyBob3ZlcmluZyBvdmVyIHRoZSB0cmFzaCBjYW4sIHJlbW92ZSBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodHJhc2guaW50ZXJhY3Rpb24obmV3IFZlY3RvcjJEKGUucGFnZVgsIGUucGFnZVkpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5kZWxldGUoY2FudmFzLm9iamVjdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vcmVzZXQgdGhlIHRyYXNoIGNhbnMgY29sb3IgYmFjayB0byBncmF5LCBzZWVpbmcgYXMgbm8gb2JqZWN0IGlzIHNlbGVjdGVkIGFueW1vcmVcbiAgICAgICAgICAgICAgICB0cmFzaC5jb2xvciA9IFwiI2VlZWVlZVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvL3JlZHJhdyB0aGUgY2FudmFzXG4gICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vd2hlbiB0aGUgdXNlciBzY3JvbGxzIHRoZSBtb3VzZSB3aGVlbCBzb21ld2hlcmUgb24gdGhlIGNhbnZhc1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYWRlc1wiKS5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2Nyb2xsSW50ZXJhY3Rpb24oZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYWRlc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiRE9NTW91c2VTY3JvbGxcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2Nyb2xsSW50ZXJhY3Rpb24oZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgc2Nyb2xsSW50ZXJhY3Rpb24gPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAvL2Rvbid0IHNjcm9sbCB0aGUgcGFnZVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgLy9jcm9zc2Jyb3dzZXIgY2FsY3VsYXRpb24gb2YgdGhlIGRpZmZlcmVuY2UgYmVpbmcgc2Nyb2xsZWRcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IDA7XG4gICAgICAgICAgICBpZih0eXBlb2YgZS53aGVlbERlbHRhICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGRlbHRhID0gZS53aGVlbERlbHRhIC8gMzAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWx0YSA9IC1lLmRldGFpbCAvIDUwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9jYWxjdWxhdGUgdGhlIG5ldyBzY2FsZSBhbmQgbWFrZSBzdXJlIGl0IHN0YXlzIGluIGJldHdlZW4gdGhlIGxpbWl0c1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gY2FudmFzLnNjYWxlICsgZGVsdGE7XG4gICAgICAgICAgICBpZihzY2FsZSA+IDEuOCkge1xuICAgICAgICAgICAgICAgIHNjYWxlID0gMS44O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc2NhbGUgPCAwLjQpIHtcbiAgICAgICAgICAgICAgICBzY2FsZSA9IDAuNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjYWxlID0gTWF0aC5mbG9vcihzY2FsZSAqIDEwMCkgLyAxMDA7XG4gICAgICAgICAgICAvL3NldCB0aGUgbmV3IHNjYWxlLCBkb24ndCBzY2FsZSB0aGUgdHJhc2ggY2FuLCBhcHBseSB0aGUgc2NhbGUgdG8gdGhlIHNsaWRlciBhbmQgcmVkcmF3IHRoZSBjYW52YXNcbiAgICAgICAgICAgIGNhbnZhcy5zY2FsZSA9IHNjYWxlO1xuICAgICAgICAgICAgdHJhc2gucmFkaXVzID0gNTAgLyBjYW52YXMuc2NhbGU7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjYWxlQ2FudmFzXCIpLnZhbHVlID0gY2FudmFzLnNjYWxlO1xuICAgICAgICAgICAgY2FudmFzLmRyYXcoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvL3doZW4gYSB1c2VyIHVzZXMgdGhlIHNsaWRlciwgc2NhbGUgdGhlIGNhbnZhc1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjYWxlQ2FudmFzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjYW52YXMuc2NhbGUgPSBwYXJzZUZsb2F0KHRoaXMudmFsdWUpO1xuICAgICAgICAgICAgdHJhc2gucmFkaXVzID0gNTAgLyBjYW52YXMuc2NhbGU7XG4gICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL3doZW4gYSB1c2VyIGNsaWNrcyB0aGUgY2VudGVyIGJ1dHRvbiwgdGVsbCB0aGUgY2FudmFzIHRvIGNlbnRlciBpdHNlbGZcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXNldE9mZnNldFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjYW52YXMubW92ZVRvQ2VudGVyKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vd2hlbiBhIHVzZXIgcmVzaXplcyB0aGUgcGFnZSwgcmVzaXplIHRoZSBjYW52YXMgYW5kIHJlcG9zaXRpb24gdGhlIHRyYXNoIGNhblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbnZhcy5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCk7XG4gICAgICAgICAgICB0cmFzaC5wb3MgPSBuZXcgVmVjdG9yMkQod2luZG93LmlubmVyV2lkdGggLSAxMDAsIHdpbmRvdy5pbm5lckhlaWdodCAtIDE1MCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudXBkYXRlUHJpY2VzID0gZnVuY3Rpb24oY29tcGFuaWVzKSB7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gY2FudmFzLm9iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMCwgbSA9IGNvbXBhbmllcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoY2FudmFzLm9iamVjdHNbaV0uaWQgPT09IGNvbXBhbmllc1tqXS5faWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzW2ldLnNldFN0b2NrUHJpY2UoY29tcGFuaWVzW2pdLkN1cnJlbnRTdG9ja1ByaWNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYWRkVHJhZGUgPSBmdW5jdGlvbih0cmFkZSwgdHJhZGVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0cmFkZSwgdHJhZGVyKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbn07Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
