function Trade(t,e,a){this.img=null,this.imgSrc=t,this.savedPos=e,this.actualPos=null,this.traders=a,this.percentage=0;for(var r=0;r<this.traders.length;r++)this.percentage+=this.traders[r].totalPercentage*this.traders[r].percentage;this.rad=50+100*this.percentage;var s=this,l=new Image;l.src=this.imgSrc,l.onload=function(){s.img=l}}function Trader(t,e,a,r,s,l){this.name=t,this.img=null,this.imgSrc=e,this.totalPercentage=a,this.percentage=0,this.difference=r,this.actualPos=null,this.comment=s,this.type=l;var o=this,i=new Image;i.src=this.imgSrc,i.onload=function(){o.img=i}}Trade.prototype.reverse=function(t){var e=this.actualPos;e=e.subVector(t.offset),e=e.subVector(t.center),e=e.div(t.scale),this.savedPos=e;for(var a=180/(this.traders.length+1),r=0;r<this.traders.length;r++){var s=a*(r+1-(this.traders.length+1)/2);this.traders[r].calculate(t.scale,this.rad,s,this.actualPos)}},Trade.prototype.calculate=function(t){var e=this.savedPos;e=e.mul(t.scale),e=e.addVector(t.center),e=e.addVector(t.offset),this.actualPos=e;for(var a=180/(this.traders.length+1),r=0;r<this.traders.length;r++){var s=a*(r+1-(this.traders.length+1)/2);this.traders[r].calculate(t.scale,this.rad,s,e)}},Trade.prototype.preDraw=function(t){if(null!==this.img){t.ctx.strokeStyle="#2c3e50",t.ctx.lineWidth=.5*t.scale,t.ctx.beginPath();var e=t.center.addVector(t.offset);t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(this.actualPos.x,this.actualPos.y),t.ctx.stroke(),t.ctx.closePath()}},Trade.prototype.draw=function(t){if(null!==this.img){t.cirLogo(this.actualPos.x,this.actualPos.y,this.rad,this.img);for(var e=0,a=0;a<this.traders.length;a++){var r=this.traders[a];e+=r.totalPercentage*r.percentage*r.difference,r.draw(t)}var s=Math.floor(e*t.startingBudget*100)/100,l=t.startingBudget/1e3;-l>s?t.ctx.fillStyle="#E74C3C":s>l?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",s=0>s?"- € "+Math.abs(s):"€ "+s;var o=12*t.scale;if(o>=8){t.ctx.font=o+"pt SourceSansPro";var i=t.ctx.measureText(s).width;t.ctx.beginPath(),t.ctx.rect(this.actualPos.x-i/2-10*t.scale,this.actualPos.y+this.rad*t.scale/2-o/2-10*t.scale,i+20*t.scale,o+20*t.scale),t.ctx.closePath(),t.ctx.fill(),t.ctx.fillStyle="#ffffff",t.ctx.fillText(s,this.actualPos.x-i/2,this.actualPos.y+this.rad*t.scale/2+o/2)}else t.cir(this.actualPos.x,this.actualPos.y+this.rad*t.scale/2,this.rad*t.scale*Math.abs(e)*10+this.rad*t.scale*.1)}},Trader.prototype.calculate=function(t,e,a,r){var s=new Vector2D(0,30);s=s.addVector(new Vector2D(0,e)),s=s.mul(t),s=s.rotate(a-90),s=s.addVector(r),this.actualPos=s},Trader.prototype.draw=function(t){if(null!==this.img){t.cirImg(this.actualPos.x,this.actualPos.y,25,this.img);var e=t.startingBudget/1e3,a=Math.floor(t.startingBudget*this.totalPercentage*this.percentage*this.difference*100)/100;-e>a?t.ctx.fillStyle="#E74C3C":a>e?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.cir(this.actualPos.x,this.actualPos.y,20*Math.abs(this.difference)+5)}},Trader.prototype.postDraw=function(t,e){var a=12*e;t.ctx.font="bold "+a+"pt SourceSansPro";var r=0,s=this.comment.split("\n");0===this.type?s.unshift("xx long at € xx,xx"):1===this.type&&s.unshift("xx short at € xx,xx");var l=Math.floor(t.startingBudget*this.totalPercentage*this.percentage*this.difference*100)/100;s.unshift(this.name+"p€ "+Math.abs(l));for(var o=0;o<s.length;o++){var i=t.ctx.measureText(s[o]).width;i>r&&(r=i)}t.ctx.fillStyle="#ffffff",t.ctx.beginPath(),t.ctx.rect(this.actualPos.x+25*t.scale,this.actualPos.y-a*s.length-a*(s.length-1)*1.2-25*t.scale-20,r+20,a*s.length+a*(s.length-1)*1.2+20),t.ctx.closePath(),t.ctx.fill();for(var n=0;n<s.length;n++)if(n>0&&(t.ctx.font=a+"pt SourceSansPro"),1===n&&0===this.type?t.ctx.fillStyle="#36B5DB":1===n&&1===this.type?t.ctx.fillStyle="#E74C3C":t.ctx.fillStyle="#2C3E50",0===n){var c=t.startingBudget/1e3,h=s[n].split("p");t.ctx.fillText(h[0],this.actualPos.x+25*t.scale+10,this.actualPos.y-a*(s.length-n)-a*(s.length-1)*1.2+1.2*n*a-25*t.scale),-c>l?(t.ctx.fillStyle="#E74C3C",h[1]="- "+h[1]):l>c?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.ctx.fillText(h[1],this.actualPos.x+25*t.scale+10+r-t.ctx.measureText(h[1]).width,this.actualPos.y-a*(s.length-n)-a*(s.length-1)*1.2+1.2*n*a-25*t.scale)}else t.ctx.fillText(s[n],this.actualPos.x+25*t.scale+10,this.actualPos.y-a*(s.length-n)-a*(s.length-1)*1.2+1.2*n*a-25*t.scale)};var trades=[],traders=[],logos=["logo0.svg","logo1.svg","logo2.svg","logo3.svg","logo4.svg"],people=[["Crazy Heffe","trader0.jpg"],["Marino Hostino","trader1.jpg"],["Nicolsh Lavanda","trader2.jpg"],["xXrobke69Xx","trader3.jpg"]];!function(){for(var t=0;4>t;t++){var e=.15*Math.random()+.1,a=Math.random()-.5,r=Math.floor(2*Math.random());traders.push(new Trader(people[t][0],"dist/images/"+people[t][1],e,a,"This just looks good!\nI can even put a second line here\n\nMultiline spaces are supported",r))}for(var s=0;5>s;s++){for(var l=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),o=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2),i=Math.ceil(4*Math.random()),n=[],c=0;i>c;c++){var h=new Trader(traders[c].name,traders[c].imgSrc,traders[c].totalPercentage,traders[c].difference,traders[c].comment,traders[c].type);h.percentage=.4*Math.random()+.1,n.push(h)}trades.push(new Trade("dist/images/"+logos[s],new Vector2D(l,o),n))}for(var d=new Canvas(window.innerWidth,window.innerHeight-50,"trades","#eeeeee",trades),u=0;u<d.objs.length;u++)d.objs[u].calculate(d);d.drawCanvas()}(),function(){"use strict";var t=angular.module("app",["ngRoute"]);t.config(function(t){t.when("/home",{templateUrl:"pages/home.html",controller:"mainController"}).when("/profile/:id",{templateUrl:"pages/profile.html",controller:"profileController"}).when("/balanceHistory/:id",{templateUrl:"pages/balanceHistory.html",controller:"balanceController"}).when("/deposit/:id",{templateUrl:"pages/deposit.html",controller:"balanceController"}).when("/withdraw/:id",{templateUrl:"pages/withdraw.html",controller:"balanceController"}).otherwise({redirectTo:"/home"})})}(),function(){"use strict";var t=function(t,e,a){t.user={},t.user.userId="1",t.user.firstName="Marijn",t.user.lastName="Hosten",t.user.depositAmount=0,t.user.currentAmount=2e3,t.deposit=function(e){t.user.currentAmount+=e.depositAmount,a.location.hash="/home"},t.isEnabled=function(){return 0===t.user.depositAmount||"undefined"==typeof t.user.depositAmount?!0:!1}};angular.module("app").controller("balanceController",["$scope","$routeParams","$window",t])}(),function(){"use strict";var t=function(t){t.user={},t.user.userId="1",t.user.firstName="Marijn",t.user.lastName="Hosten",t.user.currentAmount=2e3;var e={id:9,firstName:"Anna",lastName:"Abcd",followers:27},a={id:2,firstName:"Bob",lastName:"Abcd",followers:28},r={id:3,firstName:"Christine",lastName:"Abcd",followers:105},s={id:4,firstName:"Dave",lastName:"Abcd",followers:30},l={id:5,firstName:"Eric",lastName:"Abcd",followers:2},o={id:6,firstName:"Francis",lastName:"Abcd",followers:0},i={id:7,firstName:"Gaben",lastName:"Abcd",followers:299},n={id:8,firstName:"Harold",lastName:"Abcd",followers:4};t.traders=[e,a,r,s,l,o,i,n]};angular.module("app").controller("mainController",["$scope",t])}(),function(){"use strict";var t=function(t,e,a,r){var s=e.id;t.user=r.getById(s),t.isEnabled=function(){return!1},t.submitForm=function(t){alert("changes saved"),a.location.hash="/home"}};angular.module("app").controller("profileController",["$scope","$routeParams","$window","userService",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwidHJhZGVyLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiLCJiYWxhbmNlQ29udHJvbGxlci5qcyIsIm1haW5Db250cm9sbGVyLmpzIiwicHJvZmlsZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiVHJhZGUiLCJpbWdTcmMiLCJ2ZWN0b3IiLCJ0cmFkZXJzIiwidGhpcyIsImltZyIsInNhdmVkUG9zIiwiYWN0dWFsUG9zIiwicGVyY2VudGFnZSIsImkiLCJsZW5ndGgiLCJ0b3RhbFBlcmNlbnRhZ2UiLCJyYWQiLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJUcmFkZXIiLCJuYW1lIiwiZGlmZmVyZW5jZSIsImNvbW1lbnQiLCJ0eXBlIiwicHJvdG90eXBlIiwicmV2ZXJzZSIsImMiLCJwb3MiLCJzdWJWZWN0b3IiLCJvZmZzZXQiLCJjZW50ZXIiLCJkaXYiLCJzY2FsZSIsImFuZ2xlIiwiYWxwaGEiLCJjYWxjdWxhdGUiLCJtdWwiLCJhZGRWZWN0b3IiLCJwcmVEcmF3IiwiY3R4Iiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJ4IiwieSIsImxpbmVUbyIsInN0cm9rZSIsImNsb3NlUGF0aCIsImRyYXciLCJjaXJMb2dvIiwib3ZlcmFsbCIsInQiLCJ0ZXh0IiwiTWF0aCIsImZsb29yIiwic3RhcnRpbmdCdWRnZXQiLCJvbmVQcm9taWxsZSIsImZpbGxTdHlsZSIsImFicyIsInNpemUiLCJmb250IiwidHh0U2l6ZSIsIm1lYXN1cmVUZXh0Iiwid2lkdGgiLCJyZWN0IiwiZmlsbCIsImZpbGxUZXh0IiwiY2lyIiwiZnJvbSIsIlZlY3RvcjJEIiwicm90YXRlIiwiY2lySW1nIiwiZGlmZiIsInBvc3REcmF3IiwidGljayIsInNwbGl0IiwidW5zaGlmdCIsInMiLCJqIiwiaW50cm8iLCJ0cmFkZXMiLCJsb2dvcyIsInBlb3BsZSIsInJhbmRvbSIsImQiLCJwdXNoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiciIsImNlaWwiLCJwcGwiLCJrIiwiY2FudmFzIiwiQ2FudmFzIiwibCIsIm9ianMiLCJkcmF3Q2FudmFzIiwiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJiYWxhbmNlQ29udHJvbGxlciIsIiRzY29wZSIsIiRyb3V0ZVBhcmFtcyIsIiR3aW5kb3ciLCJ1c2VyIiwidXNlcklkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJkZXBvc2l0QW1vdW50IiwiY3VycmVudEFtb3VudCIsImRlcG9zaXQiLCJsb2NhdGlvbiIsImhhc2giLCJpc0VuYWJsZWQiLCJtYWluQ29udHJvbGxlciIsIkFubmEiLCJpZCIsImZvbGxvd2VycyIsIkJvYiIsIkNocmlzdGluZSIsIkRhdmUiLCJFcmljIiwiRnJhbmNpcyIsIkdhYmVuIiwiSGFyb2xkIiwicHJvZmlsZUNvbnRyb2xsZXIiLCJ1c2VyU2VydmljZSIsImdldEJ5SWQiLCJzdWJtaXRGb3JtIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJBQUFBLFFBQUFBLE9BQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLEtBQUFDLElBQUEsS0FDQUQsS0FBQUgsT0FBQUEsRUFDQUcsS0FBQUUsU0FBQUosRUFDQUUsS0FBQUcsVUFBQSxLQUNBSCxLQUFBRCxRQUFBQSxFQUNBQyxLQUFBSSxXQUFBLENBQ0EsS0FBQSxHQUFBQyxHQUFBLEVBQUFBLEVBQUFMLEtBQUFELFFBQUFPLE9BQUFELElBQ0FMLEtBQUFJLFlBQUFKLEtBQUFELFFBQUFNLEdBQUFFLGdCQUFBUCxLQUFBRCxRQUFBTSxHQUFBRCxVQUVBSixNQUFBUSxJQUFBLEdBQUEsSUFBQVIsS0FBQUksVUFDQSxJQUFBSyxHQUFBVCxLQUNBVSxFQUFBLEdBQUFDLE1BQ0FELEdBQUFFLElBQUFaLEtBQUFILE9BQ0FhLEVBQUFH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LFVBQUEsT0FBQUMsU0FBQSxPQUFBVSxVQUFBLEdBQ0FLLEdBQUFOLEdBQUEsRUFBQVYsVUFBQSxVQUFBQyxTQUFBLE9BQUFVLFVBQUEsR0FDQU0sR0FBQVAsR0FBQSxFQUFBVixVQUFBLFFBQUFDLFNBQUEsT0FBQVUsVUFBQSxLQUNBTyxHQUFBUixHQUFBLEVBQUFWLFVBQUEsU0FBQUMsU0FBQSxPQUFBVSxVQUFBLEVBRUFoQixHQUFBMUcsU0FBQXdILEVBQUFHLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBR0FqQyxTQUFBQyxPQUFBLE9BQUFLLFdBQUEsa0JBQUEsU0FBQWlCLE9DdkJBLFdBQ0EsWUFJQSxJQUFBVyxHQUFBLFNBQUF4QixFQUFBQyxFQUFBQyxFQUFBdUIsR0FHQSxHQUFBckIsR0FBQUgsRUFBQWMsRUFDQWYsR0FBQUcsS0FBQXNCLEVBQUFDLFFBQUF0QixHQVdBSixFQUFBWSxVQUFBLFdBQ0EsT0FBQSxHQUdBWixFQUFBMkIsV0FBQSxTQUFBeEIsR0FDQXlCLE1BQUEsaUJBQ0ExQixFQUFBUSxTQUFBQyxLQUFBLFNBSUFyQixTQUFBQyxPQUFBLE9BQUFLLFdBQUEscUJBQUEsU0FBQSxlQUFBLFVBQUEsY0FBQTRCIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBUcmFkZShpbWdTcmMsIHZlY3RvciwgdHJhZGVycykge1xuICAgIHRoaXMuaW1nID0gbnVsbDtcbiAgICB0aGlzLmltZ1NyYyA9IGltZ1NyYztcbiAgICB0aGlzLnNhdmVkUG9zID0gdmVjdG9yO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gbnVsbDtcbiAgICB0aGlzLnRyYWRlcnMgPSB0cmFkZXJzO1xuICAgIHRoaXMucGVyY2VudGFnZSA9IDA7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgKz0gdGhpcy50cmFkZXJzW2ldLnRvdGFsUGVyY2VudGFnZSAqIHRoaXMudHJhZGVyc1tpXS5wZXJjZW50YWdlO1xuICAgIH1cbiAgICB0aGlzLnJhZCA9IDUwICsgKHRoaXMucGVyY2VudGFnZSAqIDEwMCk7XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgdGh1bWJJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aHVtYkltZy5zcmMgPSB0aGlzLmltZ1NyYztcbiAgICB0aHVtYkltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbWUuaW1nID0gdGh1bWJJbWc7XG4gICAgfTtcbn1cblxuVHJhZGUucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuYWN0dWFsUG9zO1xuICAgIHBvcyA9IHBvcy5zdWJWZWN0b3IoYy5vZmZzZXQpO1xuICAgIHBvcyA9IHBvcy5zdWJWZWN0b3IoYy5jZW50ZXIpO1xuICAgIHBvcyA9IHBvcy5kaXYoYy5zY2FsZSk7XG4gICAgdGhpcy5zYXZlZFBvcyA9IHBvcztcbiAgICB2YXIgYW5nbGUgPSAxODAgLyAodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGFscGhhID0gYW5nbGUgKiAoaSArIDEgLSAoKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKSAvIDIpKTtcbiAgICAgICAgdGhpcy50cmFkZXJzW2ldLmNhbGN1bGF0ZShjLnNjYWxlLCB0aGlzLnJhZCwgYWxwaGEsIHRoaXMuYWN0dWFsUG9zKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oYykge1xuICAgIHZhciBwb3MgPSB0aGlzLnNhdmVkUG9zO1xuICAgIHBvcyA9IHBvcy5tdWwoYy5zY2FsZSk7XG4gICAgcG9zID0gcG9zLmFkZFZlY3RvcihjLmNlbnRlcik7XG4gICAgcG9zID0gcG9zLmFkZFZlY3RvcihjLm9mZnNldCk7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBwb3M7XG4gICAgdmFyIGFuZ2xlID0gMTgwIC8gKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgIHRoaXMudHJhZGVyc1tpXS5jYWxjdWxhdGUoYy5zY2FsZSwgdGhpcy5yYWQsIGFscGhhLCBwb3MpO1xuICAgIH1cbn07XG5cblRyYWRlLnByb3RvdHlwZS5wcmVEcmF3ID0gZnVuY3Rpb24oYykge1xuICAgIGlmKHRoaXMuaW1nICE9PSBudWxsKSB7XG4gICAgICAgIGMuY3R4LnN0cm9rZVN0eWxlID0gXCIjMmMzZTUwXCI7XG4gICAgICAgIGMuY3R4LmxpbmVXaWR0aCA9IDAuNSAqIGMuc2NhbGU7XG4gICAgICAgIGMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB2YXIgY2VudGVyID0gYy5jZW50ZXIuYWRkVmVjdG9yKGMub2Zmc2V0KTtcbiAgICAgICAgYy5jdHgubW92ZVRvKGNlbnRlci54LCBjZW50ZXIueSk7XG4gICAgICAgIGMuY3R4LmxpbmVUbyh0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55KTtcbiAgICAgICAgYy5jdHguc3Ryb2tlKCk7XG4gICAgICAgIGMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cbn07XG5cblRyYWRlLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oYykge1xuICAgIGlmKHRoaXMuaW1nICE9PSBudWxsKSB7XG4gICAgICAgIGMuY2lyTG9nbyh0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55LCB0aGlzLnJhZCwgdGhpcy5pbWcpO1xuICAgICAgICB2YXIgb3ZlcmFsbCA9IDA7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgb3ZlcmFsbCArPSB0LnRvdGFsUGVyY2VudGFnZSAqIHQucGVyY2VudGFnZSAqIHQuZGlmZmVyZW5jZTtcbiAgICAgICAgICAgIHQuZHJhdyhjKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4dCA9IE1hdGguZmxvb3Iob3ZlcmFsbCAqIGMuc3RhcnRpbmdCdWRnZXQgKiAxMDApIC8gMTAwO1xuICAgICAgICB2YXIgb25lUHJvbWlsbGUgPSBjLnN0YXJ0aW5nQnVkZ2V0IC8gMTAwMDtcbiAgICAgICAgaWYodGV4dCA8IC1vbmVQcm9taWxsZSkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIH0gZWxzZSBpZih0ZXh0ID4gb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGV4dCA8IDApIHtcbiAgICAgICAgICAgIHRleHQgPSBcIi0g4oKsIFwiICsgTWF0aC5hYnModGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0ID0gXCLigqwgXCIgKyB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaXplID0gMTIgKiBjLnNjYWxlO1xuICAgICAgICBpZihzaXplID49IDgpIHtcbiAgICAgICAgICAgIGMuY3R4LmZvbnQgPSBzaXplICsgXCJwdCBTb3VyY2VTYW5zUHJvXCI7XG4gICAgICAgICAgICB2YXIgdHh0U2l6ZSA9IGMuY3R4Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoO1xuICAgICAgICAgICAgYy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjLmN0eC5yZWN0KHRoaXMuYWN0dWFsUG9zLnggLSAodHh0U2l6ZSAvIDIpIC0gKDEwICogYy5zY2FsZSksIHRoaXMuYWN0dWFsUG9zLnkgKyAoKHRoaXMucmFkICogYy5zY2FsZSkgLyAyKSAtIChzaXplIC8gMikgLSAoMTAgKiBjLnNjYWxlKSwgdHh0U2l6ZSArICgyMCAqIGMuc2NhbGUpLCBzaXplICsgKDIwICogYy5zY2FsZSkpO1xuICAgICAgICAgICAgYy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjLmN0eC5maWxsKCk7XG4gICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiNmZmZmZmZcIjtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxUZXh0KHRleHQsIHRoaXMuYWN0dWFsUG9zLnggLSAodHh0U2l6ZSAvIDIpLCB0aGlzLmFjdHVhbFBvcy55ICsgKCh0aGlzLnJhZCAqIGMuc2NhbGUpIC8gMikgKyAoc2l6ZSAvIDIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGMuY2lyKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnkgKyAoKHRoaXMucmFkICogYy5zY2FsZSkgLyAyKSwgKHRoaXMucmFkICogYy5zY2FsZSAqIE1hdGguYWJzKG92ZXJhbGwpICogMTApICsgKHRoaXMucmFkICogYy5zY2FsZSAqIDAuMSkpO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJmdW5jdGlvbiBUcmFkZXIobmFtZSwgaW1nU3JjLCB0b3RhbFBlcmNlbnRhZ2UsIGRpZmZlcmVuY2UsIGNvbW1lbnQsIHR5cGUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaW1nID0gbnVsbDtcbiAgICB0aGlzLmltZ1NyYyA9IGltZ1NyYztcbiAgICB0aGlzLnRvdGFsUGVyY2VudGFnZSA9IHRvdGFsUGVyY2VudGFnZTtcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuICAgIHRoaXMuZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBudWxsO1xuICAgIHRoaXMuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciB0aHVtYkltZyA9IG5ldyBJbWFnZSgpO1xuICAgIHRodW1iSW1nLnNyYyA9IHRoaXMuaW1nU3JjO1xuICAgIHRodW1iSW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtZS5pbWcgPSB0aHVtYkltZztcbiAgICB9O1xufVxuXG5UcmFkZXIucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKHNjYWxlLCByYWQsIGFscGhhLCBmcm9tKSB7XG4gICAgdmFyIHBvcyA9IG5ldyBWZWN0b3IyRCgwLCAzMCk7XG4gICAgcG9zID0gcG9zLmFkZFZlY3RvcihuZXcgVmVjdG9yMkQoMCwgcmFkKSk7XG4gICAgcG9zID0gcG9zLm11bChzY2FsZSk7XG4gICAgcG9zID0gcG9zLnJvdGF0ZShhbHBoYSAtIDkwKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKGZyb20pO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gcG9zO1xufTtcblxuVHJhZGVyLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oYykge1xuICAgIGlmKHRoaXMuaW1nICE9PSBudWxsKSB7XG4gICAgICAgIGMuY2lySW1nKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnksIDI1LCB0aGlzLmltZyk7XG4gICAgICAgIHZhciBvbmVQcm9taWxsZSA9IGMuc3RhcnRpbmdCdWRnZXQgLyAxMDAwO1xuICAgICAgICB2YXIgZGlmZiA9IE1hdGguZmxvb3IoYy5zdGFydGluZ0J1ZGdldCAqIHRoaXMudG90YWxQZXJjZW50YWdlICogdGhpcy5wZXJjZW50YWdlICogdGhpcy5kaWZmZXJlbmNlICogMTAwKSAvIDEwMDtcbiAgICAgICAgaWYoZGlmZiA8IC1vbmVQcm9taWxsZSkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIH0gZWxzZSBpZihkaWZmID4gb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cbiAgICAgICAgYy5jaXIodGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgKE1hdGguYWJzKHRoaXMuZGlmZmVyZW5jZSkgKiAyMCkgKyA1KTtcbiAgICB9XG59O1xuXG5UcmFkZXIucHJvdG90eXBlLnBvc3REcmF3ID0gZnVuY3Rpb24oYywgdGljaykge1xuICAgIHZhciBzaXplID0gMTIgKiB0aWNrO1xuICAgIGMuY3R4LmZvbnQgPSBcImJvbGQgXCIgKyBzaXplICsgXCJwdCBTb3VyY2VTYW5zUHJvXCI7XG4gICAgdmFyIHR4dFNpemUgPSAwO1xuICAgIHZhciB0ZXh0ID0gdGhpcy5jb21tZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZih0aGlzLnR5cGUgPT09IDApIHtcbiAgICAgICAgdGV4dC51bnNoaWZ0KFwieHggbG9uZyBhdCDigqwgeHgseHhcIik7XG4gICAgfSBlbHNlIGlmKHRoaXMudHlwZSA9PT0gMSkge1xuICAgICAgICB0ZXh0LnVuc2hpZnQoXCJ4eCBzaG9ydCBhdCDigqwgeHgseHhcIik7XG4gICAgfVxuICAgIHZhciBkaWZmID0gTWF0aC5mbG9vcihjLnN0YXJ0aW5nQnVkZ2V0ICogdGhpcy50b3RhbFBlcmNlbnRhZ2UgKiB0aGlzLnBlcmNlbnRhZ2UgKiB0aGlzLmRpZmZlcmVuY2UgKiAxMDApIC8gMTAwO1xuICAgIHRleHQudW5zaGlmdCh0aGlzLm5hbWUgKyBcIlxccOKCrCBcIiArIE1hdGguYWJzKGRpZmYpKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcyA9IGMuY3R4Lm1lYXN1cmVUZXh0KHRleHRbaV0pLndpZHRoO1xuICAgICAgICBpZih0eHRTaXplIDwgcykge1xuICAgICAgICAgICAgdHh0U2l6ZSA9IHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYy5jdHguZmlsbFN0eWxlID0gXCIjZmZmZmZmXCI7XG4gICAgYy5jdHguYmVnaW5QYXRoKCk7XG4gICAgYy5jdHgucmVjdCh0aGlzLmFjdHVhbFBvcy54ICsgKDI1ICogYy5zY2FsZSksIHRoaXMuYWN0dWFsUG9zLnkgLSAoc2l6ZSAqIHRleHQubGVuZ3RoKSAtIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpIC0gKDI1ICogYy5zY2FsZSkgLSAyMCwgdHh0U2l6ZSArIDIwLCAoc2l6ZSAqIHRleHQubGVuZ3RoKSArIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpICsgMjApO1xuICAgIGMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIGMuY3R4LmZpbGwoKTtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgdGV4dC5sZW5ndGg7IGorKykge1xuICAgICAgICBpZihqID4gMCkge1xuICAgICAgICAgICAgYy5jdHguZm9udCA9IHNpemUgKyBcInB0IFNvdXJjZVNhbnNQcm9cIjtcbiAgICAgICAgfVxuICAgICAgICBpZihqID09PSAxICYmIHRoaXMudHlwZSA9PT0gMCkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMzZCNURCXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaiA9PT0gMSAmJiB0aGlzLnR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZihqID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgb25lUHJvbWlsbGUgPSBjLnN0YXJ0aW5nQnVkZ2V0IC8gMTAwMDtcbiAgICAgICAgICAgIHZhciBpbnRybyA9IHRleHRbal0uc3BsaXQoJ1xccCcpO1xuICAgICAgICAgICAgYy5jdHguZmlsbFRleHQoaW50cm9bMF0sIHRoaXMuYWN0dWFsUG9zLnggKyAoMjUgKiBjLnNjYWxlKSArIDEwLCB0aGlzLmFjdHVhbFBvcy55IC0gKHNpemUgKiAodGV4dC5sZW5ndGggLSBqKSkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIDEpICogMS4yKSsgKGogKiAxLjIgKiBzaXplKSAtICgyNSAqIGMuc2NhbGUpKTtcbiAgICAgICAgICAgIGlmKGRpZmYgPCAtb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgICAgICBpbnRyb1sxXSA9IFwiLSBcIiArIGludHJvWzFdO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGRpZmYgPiBvbmVQcm9taWxsZSkge1xuICAgICAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiMyQzNFNTBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGMuY3R4LmZpbGxUZXh0KGludHJvWzFdLCB0aGlzLmFjdHVhbFBvcy54ICsgKDI1ICogYy5zY2FsZSkgKyAxMCArIHR4dFNpemUgLSBjLmN0eC5tZWFzdXJlVGV4dChpbnRyb1sxXSkud2lkdGgsIHRoaXMuYWN0dWFsUG9zLnkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIGopKSAtIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpKyAoaiAqIDEuMiAqIHNpemUpIC0gKDI1ICogYy5zY2FsZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFRleHQodGV4dFtqXSwgdGhpcy5hY3R1YWxQb3MueCArICgyNSAqIGMuc2NhbGUpICsgMTAsIHRoaXMuYWN0dWFsUG9zLnkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIGopKSAtIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpKyAoaiAqIDEuMiAqIHNpemUpIC0gKDI1ICogYy5zY2FsZSkpO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJ2YXIgdHJhZGVzID0gW107XG52YXIgdHJhZGVycyA9IFtdO1xudmFyIGxvZ29zID0gW1wibG9nbzAuc3ZnXCIsIFwibG9nbzEuc3ZnXCIsIFwibG9nbzIuc3ZnXCIsIFwibG9nbzMuc3ZnXCIsIFwibG9nbzQuc3ZnXCJdO1xudmFyIHBlb3BsZSA9IFtbXCJDcmF6eSBIZWZmZVwiLCBcInRyYWRlcjAuanBnXCJdLCBbXCJNYXJpbm8gSG9zdGlub1wiLCBcInRyYWRlcjEuanBnXCJdLCBbXCJOaWNvbHNoIExhdmFuZGFcIiwgXCJ0cmFkZXIyLmpwZ1wiXSwgW1wieFhyb2JrZTY5WHhcIiwgXCJ0cmFkZXIzLmpwZ1wiXV07XG5cbihmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuMTUpICsgMC4xO1xuICAgICAgICB2YXIgZCA9IE1hdGgucmFuZG9tKCkgLSAwLjU7XG4gICAgICAgIHZhciB0eXBlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEgKyAxKSk7XG4gICAgICAgIHRyYWRlcnMucHVzaChuZXcgVHJhZGVyKHBlb3BsZVtqXVswXSwgXCJkaXN0L2ltYWdlcy9cIiArIHBlb3BsZVtqXVsxXSwgdG90YWxQZXJjZW50YWdlLCBkLCBcIlRoaXMganVzdCBsb29rcyBnb29kIVxcbkkgY2FuIGV2ZW4gcHV0IGEgc2Vjb25kIGxpbmUgaGVyZVxcblxcbk11bHRpbGluZSBzcGFjZXMgYXJlIHN1cHBvcnRlZFwiLCB0eXBlKSk7XG4gICAgfVxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuaW5uZXJXaWR0aCAtICh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpKTtcbiAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAod2luZG93LmlubmVySGVpZ2h0IC0gNTApIC0gKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCkgLyAyKSk7XG4gICAgICAgIHZhciByID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiA0KTtcbiAgICAgICAgdmFyIHBwbCA9IFtdO1xuICAgICAgICBmb3IodmFyIGsgPSAwOyBrIDwgcjsgaysrKSB7XG4gICAgICAgICAgICB2YXIgdCA9IG5ldyBUcmFkZXIodHJhZGVyc1trXS5uYW1lLCB0cmFkZXJzW2tdLmltZ1NyYywgdHJhZGVyc1trXS50b3RhbFBlcmNlbnRhZ2UsIHRyYWRlcnNba10uZGlmZmVyZW5jZSwgdHJhZGVyc1trXS5jb21tZW50LCB0cmFkZXJzW2tdLnR5cGUpO1xuICAgICAgICAgICAgdC5wZXJjZW50YWdlID0gKE1hdGgucmFuZG9tKCkgKiAwLjQpICsgMC4xO1xuICAgICAgICAgICAgcHBsLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhZGVzLnB1c2gobmV3IFRyYWRlKFwiZGlzdC9pbWFnZXMvXCIgKyBsb2dvc1tpXSwgbmV3IFZlY3RvcjJEKHgsIHkpLCBwcGwpKTtcbiAgICB9XG4gICAgdmFyIGNhbnZhcyA9IG5ldyBDYW52YXMod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCAtIDUwLCBcInRyYWRlc1wiLCBcIiNlZWVlZWVcIiwgdHJhZGVzKTtcbiAgICBmb3IodmFyIGwgPSAwOyBsIDwgY2FudmFzLm9ianMubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgY2FudmFzLm9ianNbbF0uY2FsY3VsYXRlKGNhbnZhcyk7XG4gICAgfVxuICAgIGNhbnZhcy5kcmF3Q2FudmFzKCk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXCJuZ1JvdXRlXCJdKTtcblxuICAgIGFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbihcIi9ob21lXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9ob21lLmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcIm1haW5Db250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9wcm9maWxlLzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvcHJvZmlsZS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJwcm9maWxlQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvYmFsYW5jZUhpc3RvcnkvOmlkXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9iYWxhbmNlSGlzdG9yeS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJiYWxhbmNlQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvZGVwb3NpdC86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL2RlcG9zaXQuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYmFsYW5jZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL3dpdGhkcmF3LzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvd2l0aGRyYXcuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYmFsYW5jZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL2hvbWVcIlxuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBiYWxhbmNlQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkd2luZG93KXtcbiAgICAgICAgLy9uZXcgY29kZSBnb2VzIGhlcmVcblxuICAgICAgICAkc2NvcGUudXNlciA9IHt9O1xuICAgICAgICAkc2NvcGUudXNlci51c2VySWQgPSBcIjFcIjtcbiAgICAgICAgJHNjb3BlLnVzZXIuZmlyc3ROYW1lID0gXCJNYXJpam5cIjtcbiAgICAgICAgJHNjb3BlLnVzZXIubGFzdE5hbWUgPSBcIkhvc3RlblwiO1xuICAgICAgICAkc2NvcGUudXNlci5kZXBvc2l0QW1vdW50ID0gMDtcbiAgICAgICAgJHNjb3BlLnVzZXIuY3VycmVudEFtb3VudCA9IDIwMDA7XG5cbiAgICAgICAgJHNjb3BlLmRlcG9zaXQgPSBmdW5jdGlvbih1c2VyKXtcbiAgICAgICAgICAgICRzY29wZS51c2VyLmN1cnJlbnRBbW91bnQgKz0gdXNlci5kZXBvc2l0QW1vdW50O1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gXCIvaG9tZVwiO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc0VuYWJsZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgaWYoJHNjb3BlLnVzZXIuZGVwb3NpdEFtb3VudCA9PT0gMCB8fCB0eXBlb2YgJHNjb3BlLnVzZXIuZGVwb3NpdEFtb3VudCA9PSBcInVuZGVmaW5lZFwiKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJiYWxhbmNlQ29udHJvbGxlclwiLCBbIFwiJHNjb3BlXCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiJHdpbmRvd1wiLCBiYWxhbmNlQ29udHJvbGxlcl0pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgbWFpbkNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUpe1xuICAgICAgICAvL25ldyBjb2RlIGdvZXMgaGVyZVxuICAgICAgICAkc2NvcGUudXNlciA9IHt9O1xuICAgICAgICAkc2NvcGUudXNlci51c2VySWQgPSBcIjFcIjtcbiAgICAgICAgJHNjb3BlLnVzZXIuZmlyc3ROYW1lID0gXCJNYXJpam5cIjtcbiAgICAgICAgJHNjb3BlLnVzZXIubGFzdE5hbWUgPSBcIkhvc3RlblwiO1xuICAgICAgICAkc2NvcGUudXNlci5jdXJyZW50QW1vdW50ID0gMjAwMDtcblxuICAgICAgICB2YXIgQW5uYSA9IHtpZDogOSwgZmlyc3ROYW1lOiBcIkFubmFcIiwgbGFzdE5hbWU6IFwiQWJjZFwiLCBmb2xsb3dlcnM6IDI3fTtcbiAgICAgICAgdmFyIEJvYiA9IHtpZDogMiwgZmlyc3ROYW1lOiBcIkJvYlwiLCBsYXN0TmFtZTogXCJBYmNkXCIsIGZvbGxvd2VyczogMjh9O1xuICAgICAgICB2YXIgQ2hyaXN0aW5lID0ge2lkOiAzLCBmaXJzdE5hbWU6IFwiQ2hyaXN0aW5lXCIsIGxhc3ROYW1lOiBcIkFiY2RcIiwgZm9sbG93ZXJzOiAxMDV9O1xuICAgICAgICB2YXIgRGF2ZSA9IHtpZDogNCwgZmlyc3ROYW1lOiBcIkRhdmVcIiwgbGFzdE5hbWU6IFwiQWJjZFwiLCBmb2xsb3dlcnM6IDMwfTtcbiAgICAgICAgdmFyIEVyaWMgPSB7aWQgOiA1LCBmaXJzdE5hbWU6IFwiRXJpY1wiLCBsYXN0TmFtZTogXCJBYmNkXCIsIGZvbGxvd2VyczogMn07XG4gICAgICAgIHZhciBGcmFuY2lzID0ge2lkOiA2LGZpcnN0TmFtZTogXCJGcmFuY2lzXCIsIGxhc3ROYW1lOiBcIkFiY2RcIiwgZm9sbG93ZXJzOiAwfTtcbiAgICAgICAgdmFyIEdhYmVuID0ge2lkOiA3LGZpcnN0TmFtZTogXCJHYWJlblwiLCBsYXN0TmFtZTogXCJBYmNkXCIsIGZvbGxvd2VyczogMjk5fTtcbiAgICAgICAgdmFyIEhhcm9sZCA9IHtpZDogOCxmaXJzdE5hbWU6IFwiSGFyb2xkXCIsIGxhc3ROYW1lOiBcIkFiY2RcIiwgZm9sbG93ZXJzOiA0fTtcblxuICAgICAgICAkc2NvcGUudHJhZGVycyA9IFtBbm5hLCBCb2IsIENocmlzdGluZSwgRGF2ZSwgRXJpYywgRnJhbmNpcywgR2FiZW4sIEhhcm9sZF07XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJtYWluQ29udHJvbGxlclwiLCBbIFwiJHNjb3BlXCIsIG1haW5Db250cm9sbGVyXSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuXG5cbiAgICB2YXIgcHJvZmlsZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcywgJHdpbmRvdywgdXNlclNlcnZpY2Upe1xuICAgICAgICAvL25ldyBjb2RlIGdvZXMgaGVyZVxuXG4gICAgICAgIHZhciB1c2VySWQgPSAkcm91dGVQYXJhbXMuaWQ7XG4gICAgICAgICRzY29wZS51c2VyID0gdXNlclNlcnZpY2UuZ2V0QnlJZCh1c2VySWQpO1xuXG4gICAgICAgIC8qJHNjb3BlLnVzZXIgPSB7XG4gICAgICAgICAgICBcImlkXCI6IDEsXG4gICAgICAgICAgICBcImZpcnN0TmFtZVwiOiBcIk1hcmlqblwiLFxuICAgICAgICAgICAgXCJsYXN0TmFtZVwiOiBcIkhvc3RlblwiLFxuICAgICAgICAgICAgXCJwYXNzdzFcIjogXCIxMjM0NTZcIixcbiAgICAgICAgICAgIFwicGFzc3cyXCI6IFwiMTIzNDU2XCIsXG4gICAgICAgICAgICBcImN1cnJlbnRBbW91bnRcIjogMjAwMFxuICAgICAgICB9OyovXG5cbiAgICAgICAgJHNjb3BlLmlzRW5hYmxlZCA9IGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zdWJtaXRGb3JtID0gZnVuY3Rpb24odXNlcikge1xuICAgICAgICAgICAgYWxlcnQoXCJjaGFuZ2VzIHNhdmVkXCIpO1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gXCIvaG9tZVwiO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwicHJvZmlsZUNvbnRyb2xsZXJcIiwgWyBcIiRzY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiR3aW5kb3dcIiwgXCJ1c2VyU2VydmljZVwiLCBwcm9maWxlQ29udHJvbGxlcl0pO1xufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
