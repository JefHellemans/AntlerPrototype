function Trade(t,e,r){this.img=null,this.imgSrc=t,this.savedPos=e,this.actualPos=null,this.traders=r,this.percentage=0;for(var a=0;a<this.traders.length;a++)this.percentage+=this.traders[a].totalPercentage*this.traders[a].percentage;this.rad=50+100*this.percentage;var s=this,i=new Image;i.src=this.imgSrc,i.onload=function(){s.img=i}}function Trader(t,e,r,a){this.img=null,this.imgSrc=t,this.totalPercentage=e,this.percentage=0,this.difference=r,this.actualPos=null,this.comment=a;var s=this,i=new Image;i.src=this.imgSrc,i.onload=function(){s.img=i}}Trade.prototype.reverse=function(t){var e=this.actualPos;e=e.subVector(t.offset),e=e.subVector(t.center),e=e.div(t.scale),this.savedPos=e;for(var r=180/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,this.actualPos)}},Trade.prototype.calculate=function(t){var e=this.savedPos;e=e.mul(t.scale),e=e.addVector(t.center),e=e.addVector(t.offset),this.actualPos=e;for(var r=180/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,e)}},Trade.prototype.preDraw=function(t){if(null!==this.img){t.ctx.strokeStyle="#2c3e50",t.ctx.lineWidth=.5*t.scale,t.ctx.beginPath();var e=t.center.addVector(t.offset);t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(this.actualPos.x,this.actualPos.y),t.ctx.stroke(),t.ctx.closePath()}},Trade.prototype.draw=function(t){if(null!==this.img){t.cirLogo(this.actualPos.x,this.actualPos.y,this.rad,this.img);for(var e=0;e<this.traders.length;e++)this.traders[e].draw(t)}},Trader.prototype.calculate=function(t,e,r,a){var s=new Vector2D(0,30);s=s.addVector(new Vector2D(0,e)),s=s.mul(t),s=s.rotate(r-90),s=s.addVector(a),this.actualPos=s},Trader.prototype.draw=function(t){null!==this.img&&(t.cirImg(this.actualPos.x,this.actualPos.y,25,this.img),this.difference<-.1?t.ctx.fillStyle="#E74C3C":this.difference>.1?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.ctx.fillStyle=t.cir(this.actualPos.x,this.actualPos.y,20*Math.abs(this.difference)+5))},Trader.prototype.postDraw=function(t,e){var r=12*e;t.ctx.font=r+"pt SourceSansPro";var a=t.ctx.measureText(this.comment).width;t.ctx.fillStyle="#ffffff",t.ctx.beginPath(),t.ctx.rect(this.actualPos.x+25*t.scale,this.actualPos.y-r-25*t.scale-20,a+20,r+20),t.ctx.closePath(),t.ctx.fill(),t.ctx.fillStyle="#2C3E50",t.ctx.fillText(this.comment,this.actualPos.x+25*t.scale+10,this.actualPos.y-r-25*t.scale)};var trades=[],traders=[],logos=["logo0.png","logo1.svg","logo2.jpg","logo3.png","logo4.png"],people=["trader0.jpg","trader1.jpg","trader2.jpg","trader3.jpg"];!function(){for(var t=0;4>t;t++){var e=.15*Math.random()+.1;traders.push(new Trader("dist/images/"+people[t],e))}for(var r=0;5>r;r++){for(var a=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),s=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2),i=Math.floor(3*Math.random()+1),o=[],c=0;i>c;c++){var l=Math.random()-.5,n=new Trader(traders[c].imgSrc,traders[c].totalPercentage,l,"This just looks good!");n.percentage=.4*Math.random()+.1,o.push(n)}trades.push(new Trade("dist/images/"+logos[r],new Vector2D(a,s),o))}for(var h=new Canvas(window.innerWidth,window.innerHeight-50,"trades","#eeeeee",trades),d=0;d<h.objs.length;d++)h.objs[d].calculate(h);h.drawCanvas()}(),function(){"use strict";var t=angular.module("app",["ngRoute"]);t.config(function(t){t.when("/",{templateUrl:"index.html",controller:"headerController"}).otherwise({redirectTo:"index.html"})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwidHJhZGVyLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiVHJhZGUiLCJpbWdTcmMiLCJ2ZWN0b3IiLCJ0cmFkZXJzIiwidGhpcyIsImltZyIsInNhdmVkUG9zIiwiYWN0dWFsUG9zIiwicGVyY2VudGFnZSIsImkiLCJsZW5ndGgiLCJ0b3RhbFBlcmNlbnRhZ2UiLCJyYWQiLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJUcmFkZXIiLCJkaWZmZXJlbmNlIiwiY29tbWVudCIsInByb3RvdHlwZSIsInJldmVyc2UiLCJjIiwicG9zIiwic3ViVmVjdG9yIiwib2Zmc2V0IiwiY2VudGVyIiwiZGl2Iiwic2NhbGUiLCJhbmdsZSIsImFscGhhIiwiY2FsY3VsYXRlIiwibXVsIiwiYWRkVmVjdG9yIiwicHJlRHJhdyIsImN0eCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwieCIsInkiLCJsaW5lVG8iLCJzdHJva2UiLCJjbG9zZVBhdGgiLCJkcmF3IiwiY2lyTG9nbyIsImZyb20iLCJWZWN0b3IyRCIsInJvdGF0ZSIsImNpckltZyIsImZpbGxTdHlsZSIsImNpciIsIk1hdGgiLCJhYnMiLCJwb3N0RHJhdyIsInRpY2siLCJzaXplIiwiZm9udCIsInR4dFNpemUiLCJtZWFzdXJlVGV4dCIsIndpZHRoIiwicmVjdCIsImZpbGwiLCJmaWxsVGV4dCIsInRyYWRlcyIsImxvZ29zIiwicGVvcGxlIiwiaiIsInJhbmRvbSIsInB1c2giLCJmbG9vciIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInIiLCJwcGwiLCJrIiwiZCIsInQiLCJjYW52YXMiLCJDYW52YXMiLCJsIiwib2JqcyIsImRyYXdDYW52YXMiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJj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LE9BQUFFLFFBQUEyRSxHQUFBbkUsZ0JBQUFvRSxFQUFBLHdCQUNBQyxHQUFBeEUsV0FBQSxHQUFBOEMsS0FBQWdCLFNBQUEsR0FDQU8sRUFBQU4sS0FBQVMsR0FFQWQsT0FBQUssS0FBQSxHQUFBdkUsT0FBQSxlQUFBbUUsTUFBQTFELEdBQUEsR0FBQXdDLFVBQUFSLEVBQUFDLEdBQUFtQyxJQUdBLElBQUEsR0FEQUksR0FBQSxHQUFBQyxRQUFBVCxPQUFBQyxXQUFBRCxPQUFBRSxZQUFBLEdBQUEsU0FBQSxVQUFBVCxRQUNBaUIsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxLQUFBMUUsT0FBQXlFLElBQ0FGLEVBQUFHLEtBQUFELEdBQUFuRCxVQUFBaUQsRUFFQUEsR0FBQUksZ0JDM0JBLFdBQ0EsWUFFQSxJQUFBQyxHQUFBQyxRQUFBQyxPQUFBLE9BQUEsV0FFQUYsR0FBQUcsT0FBQSxTQUFBQyxHQUNBQSxFQUNBQyxLQUFBLEtBQ0FDLFlBQUEsYUFDQUMsV0FBQSxxQkFFQUMsV0FDQUMsV0FBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gVHJhZGUoaW1nU3JjLCB2ZWN0b3IsIHRyYWRlcnMpIHtcbiAgICB0aGlzLmltZyA9IG51bGw7XG4gICAgdGhpcy5pbWdTcmMgPSBpbWdTcmM7XG4gICAgdGhpcy5zYXZlZFBvcyA9IHZlY3RvcjtcbiAgICB0aGlzLmFjdHVhbFBvcyA9IG51bGw7XG4gICAgdGhpcy50cmFkZXJzID0gdHJhZGVycztcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5wZXJjZW50YWdlICs9IHRoaXMudHJhZGVyc1tpXS50b3RhbFBlcmNlbnRhZ2UgKiB0aGlzLnRyYWRlcnNbaV0ucGVyY2VudGFnZTtcbiAgICB9XG4gICAgdGhpcy5yYWQgPSA1MCArICh0aGlzLnBlcmNlbnRhZ2UgKiAxMDApO1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHRodW1iSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGh1bWJJbWcuc3JjID0gdGhpcy5pbWdTcmM7XG4gICAgdGh1bWJJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1lLmltZyA9IHRodW1iSW1nO1xuICAgIH07XG59XG5cblRyYWRlLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24oYykge1xuICAgIHZhciBwb3MgPSB0aGlzLmFjdHVhbFBvcztcbiAgICBwb3MgPSBwb3Muc3ViVmVjdG9yKGMub2Zmc2V0KTtcbiAgICBwb3MgPSBwb3Muc3ViVmVjdG9yKGMuY2VudGVyKTtcbiAgICBwb3MgPSBwb3MuZGl2KGMuc2NhbGUpO1xuICAgIHRoaXMuc2F2ZWRQb3MgPSBwb3M7XG4gICAgdmFyIGFuZ2xlID0gMTgwIC8gKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgIHRoaXMudHJhZGVyc1tpXS5jYWxjdWxhdGUoYy5zY2FsZSwgdGhpcy5yYWQsIGFscGhhLCB0aGlzLmFjdHVhbFBvcyk7XG4gICAgfVxufTtcblxuVHJhZGUucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5zYXZlZFBvcztcbiAgICBwb3MgPSBwb3MubXVsKGMuc2NhbGUpO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoYy5jZW50ZXIpO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoYy5vZmZzZXQpO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gcG9zO1xuICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICB0aGlzLnRyYWRlcnNbaV0uY2FsY3VsYXRlKGMuc2NhbGUsIHRoaXMucmFkLCBhbHBoYSwgcG9zKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUucHJlRHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmN0eC5zdHJva2VTdHlsZSA9IFwiIzJjM2U1MFwiO1xuICAgICAgICBjLmN0eC5saW5lV2lkdGggPSAwLjUgKiBjLnNjYWxlO1xuICAgICAgICBjLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IGMuY2VudGVyLmFkZFZlY3RvcihjLm9mZnNldCk7XG4gICAgICAgIGMuY3R4Lm1vdmVUbyhjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICBjLmN0eC5saW5lVG8odGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSk7XG4gICAgICAgIGMuY3R4LnN0cm9rZSgpO1xuICAgICAgICBjLmN0eC5jbG9zZVBhdGgoKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmNpckxvZ28odGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgdGhpcy5yYWQsIHRoaXMuaW1nKTtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy50cmFkZXJzW2ldLmRyYXcoYyk7XG4gICAgICAgIH1cbiAgICB9XG59OyIsImZ1bmN0aW9uIFRyYWRlcihpbWdTcmMsIHRvdGFsUGVyY2VudGFnZSwgZGlmZmVyZW5jZSwgY29tbWVudCkge1xuICAgIHRoaXMuaW1nID0gbnVsbDtcbiAgICB0aGlzLmltZ1NyYyA9IGltZ1NyYztcbiAgICB0aGlzLnRvdGFsUGVyY2VudGFnZSA9IHRvdGFsUGVyY2VudGFnZTtcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuICAgIHRoaXMuZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBudWxsO1xuICAgIHRoaXMuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgdGh1bWJJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aHVtYkltZy5zcmMgPSB0aGlzLmltZ1NyYztcbiAgICB0aHVtYkltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbWUuaW1nID0gdGh1bWJJbWc7XG4gICAgfTtcbn1cblxuVHJhZGVyLnByb3RvdHlwZS5jYWxjdWxhdGUgPSBmdW5jdGlvbihzY2FsZSwgcmFkLCBhbHBoYSwgZnJvbSkge1xuICAgIHZhciBwb3MgPSBuZXcgVmVjdG9yMkQoMCwgMzApO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IobmV3IFZlY3RvcjJEKDAsIHJhZCkpO1xuICAgIHBvcyA9IHBvcy5tdWwoc2NhbGUpO1xuICAgIHBvcyA9IHBvcy5yb3RhdGUoYWxwaGEgLSA5MCk7XG4gICAgcG9zID0gcG9zLmFkZFZlY3Rvcihmcm9tKTtcbiAgICB0aGlzLmFjdHVhbFBvcyA9IHBvcztcbn07XG5cblRyYWRlci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmNpckltZyh0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55LCAyNSwgdGhpcy5pbWcpO1xuICAgICAgICBpZih0aGlzLmRpZmZlcmVuY2UgPCAtMC4xKSB7XG4gICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuZGlmZmVyZW5jZSA+IDAuMSkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMzZCNURCXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiMyQzNFNTBcIjtcbiAgICAgICAgfVxuICAgICAgICBjLmN0eC5maWxsU3R5bGUgPVxuICAgICAgICBjLmNpcih0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55LCAoTWF0aC5hYnModGhpcy5kaWZmZXJlbmNlKSAqIDIwKSArIDUpO1xuICAgIH1cbn07XG5cblRyYWRlci5wcm90b3R5cGUucG9zdERyYXcgPSBmdW5jdGlvbihjLCB0aWNrKSB7XG4gICAgdmFyIHNpemUgPSAxMiAqIHRpY2s7XG4gICAgYy5jdHguZm9udCA9IHNpemUgKyBcInB0IFNvdXJjZVNhbnNQcm9cIjtcbiAgICB2YXIgdHh0U2l6ZSA9IGMuY3R4Lm1lYXN1cmVUZXh0KHRoaXMuY29tbWVudCkud2lkdGg7XG4gICAgYy5jdHguZmlsbFN0eWxlID0gXCIjZmZmZmZmXCI7XG4gICAgYy5jdHguYmVnaW5QYXRoKCk7XG4gICAgYy5jdHgucmVjdCh0aGlzLmFjdHVhbFBvcy54ICsgKDI1ICogYy5zY2FsZSksIHRoaXMuYWN0dWFsUG9zLnkgLSBzaXplIC0gKDI1ICogYy5zY2FsZSkgLSAyMCwgdHh0U2l6ZSArIDIwLCBzaXplICsgMjApO1xuICAgIGMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIGMuY3R4LmZpbGwoKTtcbiAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiMyQzNFNTBcIjtcbiAgICBjLmN0eC5maWxsVGV4dCh0aGlzLmNvbW1lbnQsIHRoaXMuYWN0dWFsUG9zLnggKyAoMjUgKiBjLnNjYWxlKSArIDEwLCB0aGlzLmFjdHVhbFBvcy55IC0gc2l6ZSAtICgyNSAqIGMuc2NhbGUpKTtcbn07IiwidmFyIHRyYWRlcyA9IFtdO1xudmFyIHRyYWRlcnMgPSBbXTtcbnZhciBsb2dvcyA9IFtcImxvZ28wLnBuZ1wiLCBcImxvZ28xLnN2Z1wiLCBcImxvZ28yLmpwZ1wiLCBcImxvZ28zLnBuZ1wiLCBcImxvZ280LnBuZ1wiXTtcbnZhciBwZW9wbGUgPSBbXCJ0cmFkZXIwLmpwZ1wiLCBcInRyYWRlcjEuanBnXCIsIFwidHJhZGVyMi5qcGdcIiwgXCJ0cmFkZXIzLmpwZ1wiXTtcblxuKGZ1bmN0aW9uKCkge1xuICAgIGZvcih2YXIgaiA9IDA7IGogPCA0OyBqKyspIHtcbiAgICAgICAgdmFyIHRvdGFsUGVyY2VudGFnZSA9IChNYXRoLnJhbmRvbSgpICogMC4xNSkgKyAwLjE7XG4gICAgICAgIHRyYWRlcnMucHVzaChuZXcgVHJhZGVyKFwiZGlzdC9pbWFnZXMvXCIgKyBwZW9wbGVbal0sIHRvdGFsUGVyY2VudGFnZSkpO1xuICAgIH1cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVyV2lkdGggLSAod2luZG93LmlubmVyV2lkdGggLyAyKSk7XG4gICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAtICgod2luZG93LmlubmVySGVpZ2h0IC0gNTApIC8gMikpO1xuICAgICAgICB2YXIgciA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAzKSArIDEpO1xuICAgICAgICB2YXIgcHBsID0gW107XG4gICAgICAgIGZvcih2YXIgayA9IDA7IGsgPCByOyBrKyspIHtcbiAgICAgICAgICAgIHZhciBkID0gTWF0aC5yYW5kb20oKSAtIDAuNTtcbiAgICAgICAgICAgIHZhciB0ID0gbmV3IFRyYWRlcih0cmFkZXJzW2tdLmltZ1NyYywgdHJhZGVyc1trXS50b3RhbFBlcmNlbnRhZ2UsIGQsIFwiVGhpcyBqdXN0IGxvb2tzIGdvb2QhXCIpO1xuICAgICAgICAgICAgdC5wZXJjZW50YWdlID0gKE1hdGgucmFuZG9tKCkgKiAwLjQpICsgMC4xO1xuICAgICAgICAgICAgcHBsLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhZGVzLnB1c2gobmV3IFRyYWRlKFwiZGlzdC9pbWFnZXMvXCIgKyBsb2dvc1tpXSwgbmV3IFZlY3RvcjJEKHgsIHkpLCBwcGwpKTtcbiAgICB9XG4gICAgdmFyIGNhbnZhcyA9IG5ldyBDYW52YXMod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCAtIDUwLCBcInRyYWRlc1wiLCBcIiNlZWVlZWVcIiwgdHJhZGVzKTtcbiAgICBmb3IodmFyIGwgPSAwOyBsIDwgY2FudmFzLm9ianMubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgY2FudmFzLm9ianNbbF0uY2FsY3VsYXRlKGNhbnZhcyk7XG4gICAgfVxuICAgIGNhbnZhcy5kcmF3Q2FudmFzKCk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXCJuZ1JvdXRlXCJdKTtcblxuICAgIGFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbihcIi9cIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnaGVhZGVyQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBcImluZGV4Lmh0bWxcIlxuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
