function Trade(a,t,e,c,s,n){this.img=null,this.logo=a,this.x=t,this.y=e,this.scX=c,this.scY=s,this.rad=n;var o=this,l=new Image;l.src=this.logo,l.onload=function(){o.img=l,o.logo=null}}function clear(){ctx.fillStyle="#eeeeee",ctx.fillRect(0,0,WIDTH,HEIGHT)}function draw(){clear();for(var a=0;a<trades.length;a++)trades[a].draw()}function myMove(a){dragging===canvas?(xOff+=(a.pageX-mouseX)*(1/scale),yOff+=(a.pageY-mouseY)*(1/scale),mouseX=a.pageX,mouseY=a.pageY):null!==dragging&&(dragging.scX=a.pageX-xOff*scale,dragging.scY=a.pageY-yOff*scale)}function myDown(a){clearInterval(movingCanvas);for(var t=trades.length-1;t>=0;t--){var e=trades[t];if(Math.pow(a.pageX-(e.scX+xOff*scale),2)+Math.pow(a.pageY-(e.scY+yOff*scale),2)<=Math.pow(e.rad*scale,2)){dragging=e,trades.splice(t,1),trades.push(e),canvas.onmousemove=myMove;break}}null===dragging&&(dragging=canvas,mouseX=a.pageX,mouseY=a.pageY,canvas.onmousemove=myMove)}function myUp(){var a=sbfc(dragging.scX,dragging.scY);dragging.x=a[0],dragging.y=a[1],dragging=null,mouseX=null,mouseY=null,canvas.onmousemove=null}Trade.prototype.draw=function(){null===this.logo&&(ctx.fillStyle="#ffffff",cir(this.scX+xOff*scale,this.scY+yOff*scale,this.rad),ctx.save(),ctx.beginPath(),ctx.arc(this.scX+xOff*scale,this.scY+yOff*scale,this.rad*scale,0,2*Math.PI,!0),ctx.clip(),ctx.drawImage(this.img,this.scX-this.rad*scale+xOff*scale,this.scY-this.rad*scale+yOff*scale,this.rad*scale*2,this.rad*scale*2),ctx.restore(),ctx.beginPath(),ctx.arc(this.scX+xOff*scale,this.scY+yOff*scale,this.rad*scale,0,2*Math.PI,!0),ctx.strokeStyle="#eeeeee",ctx.lineWidth=2,ctx.stroke(),ctx.closePath())};var canvas,ctx,WIDTH,HEIGHT,xOff=0,yOff=0,mouseX=null,mouseY=null,trades=[],scale=1,dragging=null,movingCanvas=null,logos=["logo0.png","logo1.jpg","logo2.jpg","logo3.png","logo4.png"];!function(){canvas=document.getElementById("trades"),canvas.width=window.innerWidth,canvas.height=window.innerHeight,canvas.onmousedown=myDown,canvas.onmouseup=myUp,WIDTH=window.innerWidth,HEIGHT=window.innerHeight,ctx=canvas.getContext("2d");for(var a=0;5>a;a++){var t=Math.floor(Math.random()*WIDTH),e=Math.floor(Math.random()*HEIGHT),c=Math.floor(100*Math.random()+50);trades.push(new Trade("dist/images/"+logos[a],t,e,t,e,c))}document.getElementById("scaleCanvas").onmousemove=function(){scale=this.value;for(var a=trades.length-1;a>=0;a--){var t=trades[a],e=sfc(t.x,t.y);t.scX=e[0],t.scY=e[1]}},document.getElementById("resetOffset").onclick=function(){var a=yOff/xOff;movingCanvas=setInterval(function(){xOff-=xOff/30,Math.abs(xOff)<=1&&(xOff=0),yOff=a*xOff,Math.abs(yOff)<=1&&(yOff=0),0===xOff&&0===yOff&&clearInterval(movingCanvas)},10)},setInterval(draw,10)}();var cX=function(){return WIDTH/2},cY=function(){return HEIGHT/2},sfc=function(a,t){var e=(t-cY())/(a-cX()),c=Math.sqrt(Math.pow(a-cX(),2)+Math.pow(t-cY(),2));c*=scale;var s=Math.atan(e)/Math.PI*180;0>s&&(s=-s);var n=90-s,o=c*Math.sin(n/180*Math.PI),l=c*Math.sin(s/180*Math.PI);return a>cX()&&(o=-o),t>cY()&&(l=-l),[cX()-o,cY()-l]},sbfc=function(a,t){var e=(t-cY())/(a-cX()),c=Math.sqrt(Math.pow(a-cX(),2)+Math.pow(t-cY(),2));c*=1/scale;var s=Math.atan(e)/Math.PI*180;0>s&&(s=-s);var n=90-s,o=Math.ceil(c*Math.sin(n/180*Math.PI)),l=Math.ceil(c*Math.sin(s/180*Math.PI));return a>cX()&&(o=-o),t>cY()&&(l=-l),[cX()-o,cY()-l]},rect=function(a,t,e,c){ctx.beginPath();var s=a-e/2,n=t-c/2;ctx.rect(s,n,e*scale,c*scale),ctx.closePath(),ctx.fill()},cir=function(a,t,e){ctx.beginPath(),ctx.arc(a,t,e*scale,0,2*Math.PI,!1),ctx.closePath(),ctx.fill()};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwiY2FudmFzQ29udHJvbC5qcyJdLCJuYW1lcyI6WyJUcmFkZSIsImxvZ28iLCJ4IiwieSIsInNjWCIsInNjWSIsInJhZCIsInRoaXMiLCJpbWciLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJjbGVhciIsImN0eCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiV0lEVEgiLCJIRUlHSFQiLCJkcmF3IiwiaSIsInRyYWRlcyIsImxlbmd0aCIsIm15TW92ZSIsImUiLCJkcmFnZ2luZyIsImNhbnZhcyIsInhPZmYiLCJwYWdlWCIsIm1vdXNlWCIsInNjYWxlIiwieU9mZiIsInBhZ2VZIiwibW91c2VZIiwibXlEb3duIiwiY2xlYXJJbnRlcnZhbCIsIm1vdmluZ0NhbnZhcyIsInRyYWRlIiwiTWF0aCIsInBvdyIsInNwbGljZSIsInB1c2giLCJvbm1vdXNlbW92ZSIsIm15VXAiLCJwIiwic2JmYyIsInByb3RvdHlwZSIsImNpciIsInNhdmUiLCJiZWdpblBhdGgiLCJhcmMiLCJQSSIsImNsaXAiLCJkcmF3SW1hZ2UiLCJyZXN0b3JlIiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJzdHJva2UiLCJjbG9zZVBhdGgiLCJsb2dvcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aWR0aCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJoZWlnaHQiLCJpbm5lckhlaWdodCIsIm9ubW91c2Vkb3duIiwib25tb3VzZXVwIiwiZ2V0Q29udGV4dCIsImZsb29yIiwicmFuZG9tIiwidmFsdWUiLCJzZmMiLCJvbmNsaWNrIiwiYSIsInNldEludGVydmFsIiwiYWJzIiwiY1giLCJjWSIsImQiLCJzcXJ0IiwiYW5nbGVZIiwiYXRhbiIsImFuZ2xlWCIsIm5YIiwic2luIiwiblkiLCJjZWlsIiwicmVjdCIsImwiLCJ0IiwidyIsImgiLCJmaWxsIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxPQUFBQyxFQUFBQyxFQUFBQyxFQUFB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S0FBQTZDLEtBQUFSLEdBQUFyQyxLQUFBYSxHQUFBLEdBQ0EsR0FBQStCLElBQ0FBLEdBQUFBLEVBRUEsSUFBQUUsR0FBQSxHQUFBRixFQUNBRyxFQUFBL0MsS0FBQWtELEtBQUFSLEVBQUExQyxLQUFBZ0QsSUFBQUYsRUFBQSxJQUFBOUMsS0FBQWEsS0FDQW9DLEVBQUFqRCxLQUFBa0QsS0FBQVIsRUFBQTFDLEtBQUFnRCxJQUFBSixFQUFBLElBQUE1QyxLQUFBYSxJQU9BLE9BTkFsRCxHQUFBNkUsT0FDQU8sR0FBQUEsR0FFQW5GLEVBQUE2RSxPQUNBUSxHQUFBQSxJQUVBVCxLQUFBTyxFQUFBTixLQUFBUSxJQUdBRSxLQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0EvRSxJQUFBbUMsV0FDQSxJQUFBaEQsR0FBQXlGLEVBQUFFLEVBQUEsRUFDQTFGLEVBQUF5RixFQUFBRSxFQUFBLENBQ0EvRSxLQUFBMkUsS0FBQXhGLEVBQUFDLEVBQUEwRixFQUFBOUQsTUFBQStELEVBQUEvRCxPQUNBaEIsSUFBQTRDLFlBQ0E1QyxJQUFBZ0YsUUFHQS9DLElBQUEsU0FBQTlDLEVBQUFDLEVBQUFHLEdBQ0FTLElBQUFtQyxZQUNBbkMsSUFBQW9DLElBQUFqRCxFQUFBQyxFQUFBRyxFQUFBeUIsTUFBQSxFQUFBLEVBQUFRLEtBQUFhLElBQUEsR0FDQXJDLElBQUE0QyxZQUNBNUMsSUFBQWdGIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBUcmFkZShsb2dvLCB4LCB5LCBzY1gsIHNjWSwgcmFkKSB7XG4gICAgdGhpcy5pbWcgPSBudWxsO1xuICAgIHRoaXMubG9nbyA9IGxvZ287XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuc2NYID0gc2NYO1xuICAgIHRoaXMuc2NZID0gc2NZO1xuICAgIHRoaXMucmFkID0gcmFkO1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHRodW1iSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGh1bWJJbWcuc3JjID0gdGhpcy5sb2dvO1xuICAgIHRodW1iSW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtZS5pbWcgPSB0aHVtYkltZztcbiAgICAgICAgbWUubG9nbyA9IG51bGw7XG4gICAgfTtcbn1cblxuVHJhZGUucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbigpIHtcbiAgICBpZih0aGlzLmxvZ28gPT09IG51bGwpIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IFwiI2ZmZmZmZlwiO1xuICAgICAgICBjaXIodGhpcy5zY1ggKyAoeE9mZiAqIHNjYWxlKSwgdGhpcy5zY1kgKyAoeU9mZiAqIHNjYWxlKSwgdGhpcy5yYWQpO1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5hcmModGhpcy5zY1ggKyAoeE9mZiAqIHNjYWxlKSwgdGhpcy5zY1kgKyAoeU9mZiAqIHNjYWxlKSwgdGhpcy5yYWQgKiBzY2FsZSwgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgICAgICBjdHguY2xpcCgpO1xuICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMuaW1nLCB0aGlzLnNjWCAtICh0aGlzLnJhZCAqIHNjYWxlKSArICh4T2ZmICogc2NhbGUpLCB0aGlzLnNjWSAtICh0aGlzLnJhZCAqIHNjYWxlKSArICh5T2ZmICogc2NhbGUpLCAodGhpcy5yYWQgKiBzY2FsZSkgKiAyLCAodGhpcy5yYWQgKiBzY2FsZSkgKiAyKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguYXJjKHRoaXMuc2NYICsgKHhPZmYgKiBzY2FsZSksIHRoaXMuc2NZICsgKHlPZmYgKiBzY2FsZSksIHRoaXMucmFkICogc2NhbGUsIDAsIE1hdGguUEkgKiAyLCB0cnVlKTtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gXCIjZWVlZWVlXCI7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICB9XG59OyIsInZhciBjYW52YXM7XG52YXIgY3R4O1xudmFyIFdJRFRIO1xudmFyIEhFSUdIVDtcbnZhciB4T2ZmID0gMDtcbnZhciB5T2ZmID0gMDtcbnZhciBtb3VzZVggPSBudWxsO1xudmFyIG1vdXNlWSA9IG51bGw7XG52YXIgdHJhZGVzID0gW107XG52YXIgc2NhbGUgPSAxO1xudmFyIGRyYWdnaW5nID0gbnVsbDtcbnZhciBtb3ZpbmdDYW52YXMgPSBudWxsO1xudmFyIGxvZ29zID0gW1wibG9nbzAucG5nXCIsIFwibG9nbzEuanBnXCIsIFwibG9nbzIuanBnXCIsIFwibG9nbzMucG5nXCIsIFwibG9nbzQucG5nXCJdO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0cmFkZXNcIik7XG4gICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICBjYW52YXMub25tb3VzZWRvd24gPSBteURvd247XG4gICAgY2FudmFzLm9ubW91c2V1cCA9IG15VXA7XG4gICAgV0lEVEggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBIRUlHSFQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBXSURUSCk7XG4gICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogSEVJR0hUKTtcbiAgICAgICAgdmFyIHJhZCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAxMDApICsgNTApO1xuICAgICAgICB0cmFkZXMucHVzaChuZXcgVHJhZGUoXCJkaXN0L2ltYWdlcy9cIiArIGxvZ29zW2ldLCB4LCB5LCB4LCB5LCByYWQpKTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjYWxlQ2FudmFzXCIpLm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNjYWxlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgZm9yKHZhciBpID0gdHJhZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgdHJhZGUgPSB0cmFkZXNbaV07XG4gICAgICAgICAgICB2YXIgcCA9IHNmYyh0cmFkZS54LCB0cmFkZS55KTtcbiAgICAgICAgICAgIHRyYWRlLnNjWCA9IHBbMF07XG4gICAgICAgICAgICB0cmFkZS5zY1kgPSBwWzFdO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzZXRPZmZzZXRcIikub25jbGljayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYSA9IHlPZmYgLyB4T2ZmO1xuICAgICAgICBtb3ZpbmdDYW52YXMgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHhPZmYgLT0gKHhPZmYgLyAzMCk7XG4gICAgICAgICAgICBpZihNYXRoLmFicyh4T2ZmKSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgeE9mZiA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5T2ZmID0gKGEgKiB4T2ZmKTtcbiAgICAgICAgICAgIGlmKE1hdGguYWJzKHlPZmYpIDw9IDEpIHtcbiAgICAgICAgICAgICAgICB5T2ZmID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHhPZmYgPT09IDAgJiYgeU9mZiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobW92aW5nQ2FudmFzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTApO1xuICAgIH07XG5cbiAgICBzZXRJbnRlcnZhbChkcmF3LCAxMCk7XG5cbn0pKCk7XG5cbnZhciBjWCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoV0lEVEggLyAyKTtcbn07XG5cbnZhciBjWSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoSEVJR0hUIC8gMik7XG59O1xuXG52YXIgc2ZjID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHZhciBhID0gKHkgLSBjWSgpKS8oeCAtIGNYKCkpO1xuICAgIHZhciBkID0gTWF0aC5zcXJ0KE1hdGgucG93KCh4IC0gY1goKSksIDIpICsgTWF0aC5wb3coKHkgLSBjWSgpKSwgMikpO1xuICAgIGQgPSBkICogc2NhbGU7XG4gICAgdmFyIGFuZ2xlWSA9IChNYXRoLmF0YW4oYSkgLyBNYXRoLlBJKSAqIDE4MDtcbiAgICBpZihhbmdsZVkgPCAwKSB7XG4gICAgICAgIGFuZ2xlWSA9IC1hbmdsZVk7XG4gICAgfVxuICAgIHZhciBhbmdsZVggPSA5MCAtIGFuZ2xlWTtcbiAgICB2YXIgblggPSBkICogTWF0aC5zaW4oKChhbmdsZVggLyAxODApICogTWF0aC5QSSkpO1xuICAgIHZhciBuWSA9IGQgKiBNYXRoLnNpbigoKGFuZ2xlWSAvIDE4MCkgKiBNYXRoLlBJKSk7XG4gICAgaWYoeCA+IGNYKCkpIHtcbiAgICAgICAgblggPSAtblg7XG4gICAgfVxuICAgIGlmKHkgPiBjWSgpKSB7XG4gICAgICAgIG5ZID0gLW5ZO1xuICAgIH1cbiAgICByZXR1cm4gW2NYKCkgLSBuWCwgY1koKSAtIG5ZXTtcbn07XG5cbnZhciBzYmZjID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHZhciBhID0gKHkgLSBjWSgpKS8oeCAtIGNYKCkpO1xuICAgIHZhciBkID0gTWF0aC5zcXJ0KE1hdGgucG93KCh4IC0gY1goKSksIDIpICsgTWF0aC5wb3coKHkgLSBjWSgpKSwgMikpO1xuICAgIGQgPSBkICogKDEgLyBzY2FsZSk7XG4gICAgdmFyIGFuZ2xlWSA9IChNYXRoLmF0YW4oYSkgLyBNYXRoLlBJKSAqIDE4MDtcbiAgICBpZihhbmdsZVkgPCAwKSB7XG4gICAgICAgIGFuZ2xlWSA9IC1hbmdsZVk7XG4gICAgfVxuICAgIHZhciBhbmdsZVggPSA5MCAtIGFuZ2xlWTtcbiAgICB2YXIgblggPSBNYXRoLmNlaWwoZCAqIE1hdGguc2luKCgoYW5nbGVYIC8gMTgwKSAqIE1hdGguUEkpKSk7XG4gICAgdmFyIG5ZID0gTWF0aC5jZWlsKGQgKiBNYXRoLnNpbigoKGFuZ2xlWSAvIDE4MCkgKiBNYXRoLlBJKSkpO1xuICAgIGlmKHggPiBjWCgpKSB7XG4gICAgICAgIG5YID0gLW5YO1xuICAgIH1cbiAgICBpZih5ID4gY1koKSkge1xuICAgICAgICBuWSA9IC1uWTtcbiAgICB9XG4gICAgcmV0dXJuIFtjWCgpIC0gblgsIGNZKCkgLSBuWV07XG59O1xuXG52YXIgcmVjdCA9IGZ1bmN0aW9uKGwsIHQsIHcsIGgpIHtcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgdmFyIHggPSBsIC0gKHcvMik7XG4gICAgdmFyIHkgPSB0IC0gKGgvMik7XG4gICAgY3R4LnJlY3QoeCwgeSwgdyAqIHNjYWxlLCBoICogc2NhbGUpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICBjdHguZmlsbCgpO1xufTtcblxudmFyIGNpciA9IGZ1bmN0aW9uKHgsIHksIHJhZCkge1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHguYXJjKHgsIHksIHJhZCAqIHNjYWxlLCAwLCAyICogTWF0aC5QSSwgZmFsc2UpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICBjdHguZmlsbCgpO1xufTtcblxuZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgY3R4LmZpbGxTdHlsZSA9IFwiI2VlZWVlZVwiO1xuICAgIGN0eC5maWxsUmVjdCgwLDAsV0lEVEgsSEVJR0hUKTtcbn1cblxuZnVuY3Rpb24gZHJhdygpIHtcbiAgICBjbGVhcigpO1xuXG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRyYWRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0cmFkZXNbaV0uZHJhdygpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbXlNb3ZlKGUpIHtcbiAgICBpZihkcmFnZ2luZyA9PT0gY2FudmFzKSB7XG4gICAgICAgIHhPZmYgKz0gKGUucGFnZVggLSBtb3VzZVgpICogKDEgLyBzY2FsZSk7XG4gICAgICAgIHlPZmYgKz0gKGUucGFnZVkgLSBtb3VzZVkpICogKDEgLyBzY2FsZSk7XG4gICAgICAgIG1vdXNlWCA9IGUucGFnZVg7XG4gICAgICAgIG1vdXNlWSA9IGUucGFnZVk7XG4gICAgfSBlbHNlIGlmKGRyYWdnaW5nICE9PSBudWxsKSB7XG4gICAgICAgIGRyYWdnaW5nLnNjWCA9IChlLnBhZ2VYIC0gKHhPZmYgKiBzY2FsZSkpO1xuICAgICAgICBkcmFnZ2luZy5zY1kgPSAoZS5wYWdlWSAtICh5T2ZmICogc2NhbGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG15RG93bihlKSB7XG4gICAgY2xlYXJJbnRlcnZhbChtb3ZpbmdDYW52YXMpO1xuICAgIGZvcih2YXIgaSA9IHRyYWRlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgdHJhZGUgPSB0cmFkZXNbaV07XG4gICAgICAgIGlmKChNYXRoLnBvdygoZS5wYWdlWCAtICh0cmFkZS5zY1ggKyAoeE9mZiAqIHNjYWxlKSkpLCAyKSArIE1hdGgucG93KChlLnBhZ2VZIC0gKHRyYWRlLnNjWSArICh5T2ZmICogc2NhbGUpKSksIDIpKSA8PSBNYXRoLnBvdygodHJhZGUucmFkICogc2NhbGUpLCAyKSkge1xuICAgICAgICAgICAgZHJhZ2dpbmcgPSB0cmFkZTtcbiAgICAgICAgICAgIHRyYWRlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB0cmFkZXMucHVzaCh0cmFkZSk7XG4gICAgICAgICAgICBjYW52YXMub25tb3VzZW1vdmUgPSBteU1vdmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZihkcmFnZ2luZyA9PT0gbnVsbCkge1xuICAgICAgICBkcmFnZ2luZyA9IGNhbnZhcztcbiAgICAgICAgbW91c2VYID0gZS5wYWdlWDtcbiAgICAgICAgbW91c2VZID0gZS5wYWdlWTtcbiAgICAgICAgY2FudmFzLm9ubW91c2Vtb3ZlID0gbXlNb3ZlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbXlVcCgpIHtcbiAgICB2YXIgcCA9IHNiZmMoZHJhZ2dpbmcuc2NYLCBkcmFnZ2luZy5zY1kpO1xuICAgIGRyYWdnaW5nLnggPSBwWzBdO1xuICAgIGRyYWdnaW5nLnkgPSBwWzFdO1xuICAgIGRyYWdnaW5nID0gbnVsbDtcbiAgICBtb3VzZVggPSBudWxsO1xuICAgIG1vdXNlWSA9IG51bGw7XG4gICAgY2FudmFzLm9ubW91c2Vtb3ZlID0gbnVsbDtcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
