function Trader(e,t,r,a,o){this.name=e,this.amount=t,this.inAt=r,this.comment=o,this.type=a,this.difference=0,this.drawable=new Drawable,this.drawable.color="#ffffff",this.drawable.borderColor="#eeeeee",this.drawable.borderWidth=2,this.drawable.borderScaling=!1,this.drawable.textFont="SourceSansPro",this.drawable.textAnchor=new Vector2D(0,1),this.drawable.textBackground="#ffffff",this.drawable.textPadding=new Vector2D(0,0),this.drawable.textScaling=!1,this.drawable.textPos=new Vector2D(1,-1),this.drawable.textColor="#2C3E50",this.drawable.pos=new Vector2D(0,0),this.drawable.radius=25,this.drawable.show=!1,this.open=!1,this.requestPartial=!1,this.changeStockPrice=function(e){var a="[b]"+this.name+"[/b][align=right][color=",o=Math.floor((e-this.inAt)*this.amount*100)/100,i="#36B5DB",s="#E74C3C";0===this.type?this.difference=o:this.difference=-o,a+=this.difference>=0?i+"]":s+"]",a+=this.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})+"[/color][/align]\n[i][color=",a+=0===this.type?i+"]":s+"]",a+=t,a+=0===this.type?" long at ":" short at ",a+=r.toLocaleString("be-NL",{style:"currency",currency:"EUR"})+"[/color][/i]\n",this.drawable.setText(a+this.comment)},this.draw=function(e,t,r){if(this.drawable.show){var a=this.drawable.pos;this.drawable.pos=this.drawable.pos.rotate(r-90),e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y),this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e,t),e.restore(),this.drawable.pos=a}},this.postDraw=function(e,t,r){if(this.drawable.show){var a=this.drawable.pos;this.drawable.pos=this.drawable.pos.rotate(r-90),e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y),this.drawable.drawText(e,t),e.restore(),this.drawable.pos=a}},this.clicked=function(){var e=this;this.open?(this.drawable.animate("textSize",0,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(0,0),200,"easeInOut",function(t,r){t&&(e.open=!1)})):(this.drawable.animate("textSize",12,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(10,10),200,"easeInOut",function(t,r){t&&(e.open=!0)}))},this.interaction=function(e,t,r){var a=e.subVector(this.drawable.pos.rotate(r-90).mul(t)),o=0;return 0!==this.drawable.radius&&(o=this.drawable.radius*t),0!==this.drawable.size.length()&&(o=this.drawable.size.length()*t),a.length()<=o&&this.drawable.show?this:!1}}var Trade=function(e,r){this.stockPrice=e,this.traders=r,this.drawable=new Drawable,this.difference=0;for(var a=0,o=this.traders.length;o>a;a++)this.traders[a].changeStockPrice(this.stockPrice),this.difference+=this.traders[a].difference;this.difference=Math.floor(100*this.difference)/100,this.drawable.setText(this.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),this.difference>=0?(this.drawable.textBackground="#36B5DB",this.drawable.textReplaceColor="#36B5DB"):(this.drawable.textBackground="#E74C3C",this.drawable.textReplaceColor="#E74C3C"),this.reqPartial=!1,this["new"]=!0,this.lineColor="#B3B369",this.open=!1,this.drawable.textSize=10,this.drawable.imgFill=!1;var i=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),s=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2);this.drawable.pos=new Vector2D(i,s),this.drawable.radius=Math.floor(35*Math.random()+35),this.drawable.color="#ffffff",this.drawable.borderWidth=2,this.drawable.borderColor="#B3B369",this.drawable.borderScaling=!1,this.drawable.textColor="#ffffff",this.drawable.textFont="SourceSansPro",this.drawable.textAnchor=new Vector2D(.5,.5),this.drawable.textPos=new Vector2D(0,.5),this.drawable.textPadding=new Vector2D(10,10),this.drawable.textReplace=15;var n=this;setInterval(function(){var e=Math.random()/10,t=Math.floor(2*Math.random());1===t&&(e=-e),n.stockPrice=Math.floor(100*(n.stockPrice+e))/100,n.difference=0;for(var r=0,a=n.traders.length;a>r;r++)n.traders[r].changeStockPrice(n.stockPrice),n.difference+=n.traders[r].difference;n.difference=Math.floor(100*n.difference)/100,n.open?(n.difference>=0?n.drawable.textReplaceColor="#36B5DB":n.drawable.textReplaceColor="#E74C3C",n.drawable.textBackground="#2C3E50",n.drawable.setText(n.stockPrice.toLocaleString("be-NL",{style:"currency",currency:"EUR"}))):(n.drawable.setText(n.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),n.difference>=0?(n.drawable.textBackground="#36B5DB",n.drawable.textReplaceColor="#36B5DB"):(n.drawable.textBackground="#E74C3C",n.drawable.textReplaceColor="#E74C3C")),n.reqPartial=!0},2e3),this.interaction=function(e,r){var a=e.subVector(this.drawable.pos.mul(r)),o=0;if(0!==this.drawable.radius&&(o=this.drawable.radius*r),0!==this.drawable.size.length()&&(o=this.drawable.size.length()*r),a.length()<=o)return this["new"]&&(this["new"]=!1,this.drawable.borderColor="#eeeeee",this.lineColor="#2C3E50"),this;for(var i=e.subVector(this.drawable.pos.mul(r)),s=180/(this.traders.length+1),n=0,l=this.traders.length;l>n;n++){var d=s*(n+1-(this.traders.length+1)/2),c=this.traders[n].interaction(i,r,d);if(c!==!1){for(var h=0,f=this.traders.length;f>h;h++)t=this.traders[h],t.open&&t.clicked();return c}}return!1},this.preDraw=function(e,t){this.drawable.show&&(e.strokeStyle=this.lineColor,e.lineWidth=.5,e.beginPath(),e.moveTo(0,0),e.lineTo(this.drawable.pos.x,this.drawable.pos.y),e.closePath(),e.stroke())},this.draw=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var r=180/(this.traders.length+1),a=0,o=this.traders.length;o>a;a++){var i=r*(a+1-(this.traders.length+1)/2);this.traders[a].draw(e,t,i)}this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e,t),this.drawable.drawText(e,t),e.restore()}},this.postDraw=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var r=180/(this.traders.length+1),a=0,o=this.traders.length;o>a;a++){var i=r*(a+1-(this.traders.length+1)/2);this.traders[a].postDraw(e,t,i)}e.restore()}},this.partial=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var r=180/(this.traders.length+1),a=0,o=this.traders.length;o>a;a++){var i=r*(a+1-(this.traders.length+1)/2);this.traders[a].postDraw(e,t,i)}this.drawable.textSize*t>=this.drawable.textMinSize&&this.drawable.drawText(e,t),e.restore()}},this.clicked=function(){var e=0,t=0,r=null,a=this;if(this.open){for(t=this.traders.length;t>e;e++)r=this.traders[e],r.open&&r.clicked(),r.drawable.animateVector("pos",new Vector2D(0,0),300,"easeInOut",null);this.drawable.animateVector("textPadding",new Vector2D(0,0),150,"easeIn",function(e,t){t.animateVector("textPadding",new Vector2D(10,10),150,"easeOut",null)}),this.drawable.animate("textSize",0,150,"easeIn",function(e,t){t.setText(a.difference.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),a.difference>=0?t.textBackground="#36B5DB":t.textBackground="#E74C3C",a.open=!1,t.animate("textSize",10,150,"easeOut",null)})}else{for(t=this.traders.length;t>e;e++)r=this.traders[e],r.drawable.show=!0,r.drawable.animateVector("pos",new Vector2D(0,this.drawable.radius+r.drawable.radius+15),300,"easeInOut",null);this.drawable.animateVector("textPadding",new Vector2D(0,0),150,"easeIn",function(e,t){t.animateVector("textPadding",new Vector2D(10,10),150,"easeOut",null)}),this.drawable.animate("textSize",0,150,"easeIn",function(e,t){t.textBackground="#2C3E50",t.setText(a.stockPrice.toLocaleString("be-NL",{style:"currency",currency:"EUR"})),a.open=!0,t.animate("textSize",10,150,"easeOut",null)})}},this.requestRedraw=function(){for(var e=0,t=this.traders.length;t>e;e++)this.traders[e].drawable.requestRedraw&&(this.drawable.requestRedraw=!0,this.traders[e].drawable.requestRedraw=!1);return this.drawable.requestRedraw?(this.drawable.requestRedraw=!1,!0):!1},this.requestPartial=function(){for(var e=0,t=this.traders.length;t>e;e++)if(this.traders[e].requestPartial)return!0;return this.reqPartial}},trades=[],traders=[],profile=new Drawable,logos=["logo0.svg","logo1.svg","logo2.svg","logo3.svg","logo4.svg"],people=[["Crazy Heffe","trader0.jpg"],["Marino Hostino","trader1.jpg"],["Nicolsh Lavanda","trader2.jpg"],["xXrobke69Xx","trader3.jpg"]];!function(){profile.setImage("dist/images/profile.jpg"),profile.radius=100,profile.color="#ffffff",profile.borderColor="#eeeeee",profile.borderScaling=!1,profile.borderWidth=2,profile.textSize=12,profile.textColor="#ffffff",profile.textFont="SourceSansPro",profile.textAnchor=new Vector2D(.5,.5),profile.textPos=new Vector2D(0,.5),profile.textPadding=new Vector2D(10,10),profile.textReplace=15,trades.push(profile);for(var e=0;4>e;e++){var t=Math.floor(50*Math.random()),r=Math.floor(2e4*Math.random())/100,a=Math.floor(2*Math.random()),o=[t,r,a];traders.push(o)}for(var i=0,s=0;5>s;s++){for(var n=Math.ceil(4*Math.random()),l=[],d=Math.floor(200*Math.random()*100)/100,c=0;n>c;c++){var h=new Trader(people[c][0],traders[c][0],traders[c][1],traders[c][2],"This looks good!\nI can even put a second line\n\nAnd even more");h.drawable.setImage("dist/images/"+people[c][1],function(){w.draw()}),h.percentage=.4*Math.random()+.1,l.push(h)}var f=new Trade(d,l);i+=f.difference,f.drawable.setImage("dist/images/"+logos[s],function(){w.draw()}),trades.push(f)}i>=0?(profile.textBackground="#36B5DB",profile.textReplaceColor="#36B5DB"):(profile.textBackground="#E74C3C",profile.textReplaceColor="#E74C3C"),profile.setText((Math.floor(100*i)/100).toLocaleString("be-NL",{style:"currency",currency:"EUR"}));var w=new Canvas(0,50,window.innerWidth,window.innerHeight-50,"trades",trades);w.partialCallback=function(){for(var e=0,t=1,r=w.objects.length;r>t;t++)e+=w.objects[t].difference;e>=0?(w.objects[0].textBackground="#36B5DB",w.objects[0].textReplaceColor="#36B5DB"):(w.objects[0].textBackground="#E74C3C",w.objects[0].textReplaceColor="#E74C3C"),w.objects[0].setText((Math.floor(100*e)/100).toLocaleString("be-NL",{style:"currency",currency:"EUR"})),w.objects[0].drawText(w.ctx,w.scale)},profile.draw=function(e,t){this.drawCircle(e),this.drawImageInCircle(e),this.drawBorderForCircle(e,t),this.drawText(e,t)},w.draw(),document.getElementById("trades").addEventListener("mousedown",function(e){u(e)}),document.getElementById("trades").addEventListener("touchstart",function(e){var t=e.touches[0];u(t)});var u=function(e){w.interactionStart(e,function(e,t){if(e instanceof Trade){var r=w.objects.indexOf(e);w.objects.push(w.objects.splice(r,1)[0])}w.selected=e,w.mousePos=t})};document.getElementById("trades").addEventListener("mousemove",function(e){b(e)}),document.getElementById("trades").addEventListener("touchmove",function(e){var t=e.touches[0];b(t)});var b=function(e){w.interactionMove(e,function(e,t){e instanceof Trade&&(e.drawable.pos=t,w.draw())})};document.getElementById("trades").addEventListener("mouseup",function(){p()}),document.getElementById("trades").addEventListener("touchend",function(){p()}),document.body.addEventListener("touchstart",function(e){e.preventDefault()});var p=function(){w.interactionStop(function(e){if(null!==e){var t,r;if(e instanceof Trade)for(t=0,r=w.objects.length;r>t;t++)w.objects[t].open&&w.objects[t]!==e&&w.objects[t].clicked();if("self"===e)for(t=0,r=w.objects.length;r>t;t++)w.objects[t].open&&w.objects[t].clicked();"function"==typeof e.clicked&&e.clicked()}})};document.getElementById("resetOffset").addEventListener("click",function(){w.moveToCenter()}),document.getElementById("scaleCanvas").addEventListener("mousemove",function(){w.scale=this.value,w.draw()})}(),function(){"use strict";var e=angular.module("app",["ngRoute"]);e.config(function(e){e.when("/home",{templateUrl:"pages/home.html",controller:"mainController"}).when("/profile/:id",{templateUrl:"pages/profile.html",controller:"profileController"}).when("/balanceHistory/:id",{templateUrl:"pages/balanceHistory.html",controller:"balanceController"}).when("/deposit/:id",{templateUrl:"pages/deposit.html",controller:"balanceController"}).when("/withdraw/:id",{templateUrl:"pages/withdraw.html",controller:"balanceController"}).otherwise({redirectTo:"/home"})})}(),function(){"use strict";var e=function(e,t,r){e.user={},e.user.userId="1",e.user.firstName="Marijn",e.user.lastName="Hosten",e.user.depositAmount=0,e.user.currentAmount=2e3,e.deposit=function(t){e.user.currentAmount+=t.depositAmount,r.location.hash="/home"},e.isEnabled=function(){return 0===e.user.depositAmount||"undefined"==typeof e.user.depositAmount?!0:!1}};angular.module("app").controller("balanceController",["$scope","$routeParams","$window",e])}(),function(){"use strict";var e=function(e){e.user={},e.user.userId="1",e.user.firstName="Marijn",e.user.lastName="Hosten",e.user.currentAmount=2e3;var t={id:9,firstName:"Anna",lastName:"Abcd",followers:27},r={id:2,firstName:"Bob",lastName:"Abcd",followers:28},a={id:3,firstName:"Christine",lastName:"Abcd",followers:105},o={id:4,firstName:"Dave",lastName:"Abcd",followers:30},i={id:5,firstName:"Eric",lastName:"Abcd",followers:2},s={id:6,firstName:"Francis",lastName:"Abcd",followers:0},n={id:7,firstName:"Gaben",lastName:"Abcd",followers:299},l={id:8,firstName:"Harold",lastName:"Abcd",followers:4};e.traders=[t,r,a,o,i,s,n,l]};angular.module("app").controller("mainController",["$scope",e])}(),function(){"use strict";var e=function(e,t,r,a){var o=t.id;e.user=a.getById(o),e.isEnabled=function(){return!1},e.submitForm=function(e){alert("changes saved"),r.location.hash="/home"}};angular.module("app").controller("profileController",["$scope","$routeParams","$window","userService",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlci5qcyIsInRyYWRlLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiLCJiYWxhbmNlQ29udHJvbGxlci5qcyIsIm1haW5Db250cm9sbGVyLmpzIiwicHJvZmlsZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiVHJhZGVyIiwibmFtZSIsImFtb3VudCIsImluQXQiLCJ0eXBlIiwiY29tbWVudCIsInRoaXMiLCJkaWZmZXJlbmNlIiwiZHJhd2FibGUiLCJEcmF3YWJsZSIsImNvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImJvcmRlclNjYWxpbmciLCJ0ZXh0Rm9udCIsInRleHRBbmNob3IiLCJWZWN0b3IyRCIsInRleHRCYWNrZ3JvdW5kIiwidGV4dFBhZGRpbmciLCJ0ZXh0U2NhbGluZyIsInRleHRQb3MiLCJ0ZXh0Q29sb3IiLCJwb3MiLCJyYWRpdXMiLCJzaG93Iiwib3BlbiIsInJlcXVlc3RQYXJ0aWFsIiwiY2hhbmdlU3RvY2tQcmljZSIsInN0b2NrUHJpY2UiLCJwcmVzZXQiLCJkaWZmIiwiTWF0aCIsImZsb29yIiwibmVnIiwidG9Mb2NhbGVTdHJpbmciLCJzdHlsZSIsImN1cnJlbmN5Iiwic2V0VGV4dCIsImRyYXciLCJjdHgiLCJzY2FsZSIsImFscGhhIiwicCIsInJvdGF0ZSIsInNhdmUiLCJ0cmFuc2xhdGUiLCJ4IiwieSIsImRyYXdDaXJjbGUiLCJkcmF3SW1hZ2VJbkNpcmNsZSIsImRyYXdCb3JkZXJGb3JDaXJjbGUiLCJyZXN0b3JlIiwicG9zdERyYXciLCJkcmF3VGV4dCIsImNsaWNrZWQiLCJtZSIsImFuaW1hdGUiLCJhbmltYXRlVmVjdG9yIiwiZmluaXNoZWQiLCJlbGVtZW50IiwiaW50ZXJhY3Rpb24iLCJtb3VzZVBvcyIsIm1vdXNlRGlmZmVyZW5jZSIsInN1YlZlY3RvciIsIm11bCIsInNpemUiLCJsZW5ndGgiLCJUcmFkZSIsInRyYWRlcnMiLCJpIiwibCIsInRleHRSZXBsYWNlQ29sb3IiLCJyZXFQYXJ0aWFsIiwibGluZUNvbG9yIiwidGV4dFNpemUiLCJpbWdGaWxsIiwicmFuZG9tIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwidGV4dFJlcGxhY2UiLCJzZXRJbnRlcnZhbCIsImQiLCJwT20iLCJyZWxQb3MiLCJhbmdsZSIsIm8iLCJqIiwibSIsInQiLCJwcmVEcmF3Iiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJwYXJ0aWFsIiwidGV4dE1pblNpemUiLCJkb25lIiwicmVxdWVzdFJlZHJhdyIsInRyYWRlcyIsInByb2ZpbGUiLCJsb2dvcyIsInBlb3BsZSIsInNldEltYWdlIiwicHVzaCIsInRyYWRlciIsInIiLCJjZWlsIiwicHBsIiwiayIsImNhbnZhcyIsInBlcmNlbnRhZ2UiLCJ0cmFkZSIsIkNhbnZhcyIsInBhcnRpYWxDYWxsYmFjayIsIm9iamVjdHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJpbnRlcmFjdGlvblN0YXJ0IiwidG91Y2giLCJ0b3VjaGVzIiwib2JqZWN0IiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwic2VsZWN0ZWQiLCJpbnRlcmFjdGlvbk1vdmUiLCJpbnRlcmFjdGlvblN0b3AiLCJib2R5IiwicHJldmVudERlZmF1bHQiLCJtb3ZlVG9DZW50ZXIiLCJ2YWx1ZSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiYmFsYW5jZUNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkcm91dGVQYXJhbXMiLCIkd2luZG93IiwidXNlciIsInVzZXJJZCIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwiZGVwb3NpdEFtb3VudCIsImN1cnJlbnRBbW91bnQiLCJkZXBvc2l0IiwibG9jYXRpb24iLCJoYXNoIiwiaXNFbmFibGVkIiwibWFpbkNvbnRyb2xsZXIiLCJBbm5hIiwiaWQiLCJmb2xsb3dlcnMiLCJCb2IiLCJDaHJpc3RpbmUiLCJEYXZlIiwiRXJpYyIsIkZyYW5jaXMiLCJHYWJlbiIsIkhhcm9sZCIsInByb2ZpbGVDb250cm9sbGVyIiwidXNlclNlcnZpY2UiLCJnZXRCeUlkIiwic3VibWl0Rm9ybSIsImFsZXJ0Il0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxRQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBQyxLQUFBTCxLQUFBQSxFQUNBSyxLQUFBSixPQUFBQSxFQUNBSSxLQUFBSCxLQUFBQSxFQUNBRyxLQUFBRCxRQUFBQSxFQUNBQyxLQUFBRixLQUFBQSxFQUNBRSxLQUFBQyxXQUFBLEVBQ0FELEtBQUFFLFNBQUEsR0FBQUMsVUFFQUgsS0FBQUUsU0FBQUUsTUFBQSxVQUVBSixLQUFBRSxTQUFBRyxZQUFBLFVBQ0FMLEtBQUFFLFNBQUFJLFlBQUEsRUFDQU4sS0FBQUUsU0FBQUssZUFBQSxFQUNBUCxLQUFBRSxTQUFBTSxTQUFBLGdCQUNBUixLQUFBRSxTQUFBTyxXQUFBLEdBQUFDLFVBQUEsRUFBQSxHQUNBVixLQUFBRSxTQUFBUyxlQUFBLFVBQ0FYLEtBQUFFLFNBQUFVLFlBQUEsR0FBQUYsVUFBQSxFQUFBLEdBQ0FWLEtBQUFFLFNBQUFXLGFBQUEsRUFDQWIsS0FBQUUsU0FBQVksUUFBQSxHQUFBSixVQUFBLEVBQUEsSUFDQVYsS0FBQUUsU0FBQWEsVUFBQSxVQUVBZixLQUFBRSxTQUFBYyxJQUFBLEdBQUFOLFVBQUEsRUFBQSxHQUVBVixLQUFBRSxTQUFBZSxPQUFBLEdBRUFqQixLQUFBRSxTQUFBZ0IsTUFBQSxFQUVBbEIsS0FBQW1CLE1BQUEsRUFDQW5CLEtBQUFvQixnQkFBQSxFQUVBcEIsS0FBQXFCLGlCQUFBLFNBQUFDLEdBQ0EsR0FBQUMsR0FBQSxNQUFBdkIsS0FBQUwsS0FBQSwyQkFDQTZCLEVBQUFDLEtBQUFDLE9BQUFKLEVB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QUFBLE9BQUFDLFNBQUEsT0FBQVUsVUFBQSxHQUNBSyxHQUFBTixHQUFBLEVBQUFWLFVBQUEsVUFBQUMsU0FBQSxPQUFBVSxVQUFBLEdBQ0FNLEdBQUFQLEdBQUEsRUFBQVYsVUFBQSxRQUFBQyxTQUFBLE9BQUFVLFVBQUEsS0FDQU8sR0FBQVIsR0FBQSxFQUFBVixVQUFBLFNBQUFDLFNBQUEsT0FBQVUsVUFBQSxFQUVBaEIsR0FBQWhGLFNBQUE4RixFQUFBRyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUdBakMsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLGtCQUFBLFNBQUFpQixPQ3ZCQSxXQUNBLFlBSUEsSUFBQVcsR0FBQSxTQUFBeEIsRUFBQUMsRUFBQUMsRUFBQXVCLEdBR0EsR0FBQXJCLEdBQUFILEVBQUFjLEVBQ0FmLEdBQUFHLEtBQUFzQixFQUFBQyxRQUFBdEIsR0FXQUosRUFBQVksVUFBQSxXQUNBLE9BQUEsR0FHQVosRUFBQTJCLFdBQUEsU0FBQXhCLEdBQ0F5QixNQUFBLGlCQUNBMUIsRUFBQVEsU0FBQUMsS0FBQSxTQUlBckIsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLHFCQUFBLFNBQUEsZUFBQSxVQUFBLGNBQUE0QiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gVHJhZGVyKG5hbWUsIGFtb3VudCwgaW5BdCwgdHlwZSwgY29tbWVudCkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5hbW91bnQgPSBhbW91bnQ7XG4gICAgdGhpcy5pbkF0ID0gaW5BdDtcbiAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5kaWZmZXJlbmNlID0gMDtcbiAgICB0aGlzLmRyYXdhYmxlID0gbmV3IERyYXdhYmxlKCk7XG5cbiAgICB0aGlzLmRyYXdhYmxlLmNvbG9yID0gXCIjZmZmZmZmXCI7XG5cbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJTY2FsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0Rm9udCA9IFwiU291cmNlU2Fuc1Byb1wiO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dEFuY2hvciA9IG5ldyBWZWN0b3IyRCgwLCAxKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjZmZmZmZmXCI7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UGFkZGluZyA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRTY2FsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UG9zID0gbmV3IFZlY3RvcjJEKDEsIC0xKTtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRDb2xvciA9IFwiIzJDM0U1MFwiO1xuXG4gICAgdGhpcy5kcmF3YWJsZS5wb3MgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG5cbiAgICB0aGlzLmRyYXdhYmxlLnJhZGl1cyA9IDI1O1xuXG4gICAgdGhpcy5kcmF3YWJsZS5zaG93ID0gZmFsc2U7XG5cbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICB0aGlzLnJlcXVlc3RQYXJ0aWFsID0gZmFsc2U7XG5cbiAgICB0aGlzLmNoYW5nZVN0b2NrUHJpY2UgPSBmdW5jdGlvbihzdG9ja1ByaWNlKSB7XG4gICAgICAgIHZhciBwcmVzZXQgPSBcIltiXVwiICsgdGhpcy5uYW1lICsgXCJbL2JdW2FsaWduPXJpZ2h0XVtjb2xvcj1cIjtcbiAgICAgICAgdmFyIGRpZmYgPSBNYXRoLmZsb29yKChzdG9ja1ByaWNlIC0gdGhpcy5pbkF0KSAqIHRoaXMuYW1vdW50ICogMTAwKSAvIDEwMDtcbiAgICAgICAgdmFyIHBvcyA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB2YXIgbmVnID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIGlmKHRoaXMudHlwZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5kaWZmZXJlbmNlID0gZGlmZjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmVyZW5jZSA9IC1kaWZmO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuZGlmZmVyZW5jZSA+PSAwKSB7XG4gICAgICAgICAgICBwcmVzZXQgKz0gcG9zICsgXCJdXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcmVzZXQgKz0gbmVnICsgXCJdXCI7XG4gICAgICAgIH1cbiAgICAgICAgcHJlc2V0ICs9IHRoaXMuZGlmZmVyZW5jZS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7c3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnRVVSJ30pICsgXCJbL2NvbG9yXVsvYWxpZ25dXFxuW2ldW2NvbG9yPVwiO1xuICAgICAgICBpZih0aGlzLnR5cGUgPT09IDApIHtcbiAgICAgICAgICAgIHByZXNldCArPSBwb3MgKyBcIl1cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByZXNldCArPSBuZWcgKyBcIl1cIjtcbiAgICAgICAgfVxuICAgICAgICBwcmVzZXQgKz0gYW1vdW50O1xuICAgICAgICBpZih0aGlzLnR5cGUgPT09IDApIHtcbiAgICAgICAgICAgIHByZXNldCArPSBcIiBsb25nIGF0IFwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJlc2V0ICs9IFwiIHNob3J0IGF0IFwiO1xuICAgICAgICB9XG4gICAgICAgIHByZXNldCArPSBpbkF0LnRvTG9jYWxlU3RyaW5nKCdiZS1OTCcsIHtzdHlsZTogJ2N1cnJlbmN5JywgY3VycmVuY3k6ICdFVVInfSkgKyBcIlsvY29sb3JdWy9pXVxcblwiO1xuICAgICAgICB0aGlzLmRyYXdhYmxlLnNldFRleHQocHJlc2V0ICsgdGhpcy5jb21tZW50KTtcbiAgICB9O1xuXG4gICAgdGhpcy5kcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSwgYWxwaGEpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRoaXMuZHJhd2FibGUucG9zO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5wb3MgPSB0aGlzLmRyYXdhYmxlLnBvcy5yb3RhdGUoYWxwaGEgLSA5MCk7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd0NpcmNsZShjdHgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3SW1hZ2VJbkNpcmNsZShjdHgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3Qm9yZGVyRm9yQ2lyY2xlKGN0eCwgc2NhbGUpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUucG9zID0gcDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnBvc3REcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSwgYWxwaGEpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRoaXMuZHJhd2FibGUucG9zO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5wb3MgPSB0aGlzLmRyYXdhYmxlLnBvcy5yb3RhdGUoYWxwaGEgLSA5MCk7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd1RleHQoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5wb3MgPSBwO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICBpZighdGhpcy5vcGVuKSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0U2l6ZVwiLCAxMiwgMjAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgxMCwgMTApLCAyMDAsIFwiZWFzZUluT3V0XCIsIGZ1bmN0aW9uKGZpbmlzaGVkLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYoZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWUub3BlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGUoXCJ0ZXh0U2l6ZVwiLCAwLCAyMDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwidGV4dFBhZGRpbmdcIiwgbmV3IFZlY3RvcjJEKDAsIDApLCAyMDAsIFwiZWFzZUluT3V0XCIsIGZ1bmN0aW9uKGZpbmlzaGVkLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYoZmluaXNoZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbWUub3BlbiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuaW50ZXJhY3Rpb24gPSBmdW5jdGlvbihtb3VzZVBvcywgc2NhbGUsIGFscGhhKSB7XG4gICAgICAgIHZhciBtb3VzZURpZmZlcmVuY2UgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5kcmF3YWJsZS5wb3Mucm90YXRlKGFscGhhIC0gOTApLm11bChzY2FsZSkpO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IDA7XG4gICAgICAgIGlmICh0aGlzLmRyYXdhYmxlLnJhZGl1cyAhPT0gMCkge1xuICAgICAgICAgICAgZGlmZmVyZW5jZSA9IHRoaXMuZHJhd2FibGUucmFkaXVzICogc2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAhPT0gMCkge1xuICAgICAgICAgICAgZGlmZmVyZW5jZSA9IHRoaXMuZHJhd2FibGUuc2l6ZS5sZW5ndGgoKSAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtb3VzZURpZmZlcmVuY2UubGVuZ3RoKCkgPD0gZGlmZmVyZW5jZSAmJiB0aGlzLmRyYXdhYmxlLnNob3cpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcbn0iLCJ2YXIgVHJhZGUgPSBmdW5jdGlvbihzdG9ja1ByaWNlLCB0cmFkZXJzKSB7XG4gICAgdGhpcy5zdG9ja1ByaWNlID0gc3RvY2tQcmljZTtcbiAgICB0aGlzLnRyYWRlcnMgPSB0cmFkZXJzO1xuICAgIHRoaXMuZHJhd2FibGUgPSBuZXcgRHJhd2FibGUoKTtcblxuICAgIHRoaXMuZGlmZmVyZW5jZSA9IDA7XG4gICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy50cmFkZXJzW2ldLmNoYW5nZVN0b2NrUHJpY2UodGhpcy5zdG9ja1ByaWNlKTtcbiAgICAgICAgdGhpcy5kaWZmZXJlbmNlICs9IHRoaXMudHJhZGVyc1tpXS5kaWZmZXJlbmNlO1xuICAgIH1cbiAgICB0aGlzLmRpZmZlcmVuY2UgPSBNYXRoLmZsb29yKHRoaXMuZGlmZmVyZW5jZSAqIDEwMCkgLyAxMDA7XG4gICAgdGhpcy5kcmF3YWJsZS5zZXRUZXh0KHRoaXMuZGlmZmVyZW5jZS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUid9KSk7XG4gICAgaWYodGhpcy5kaWZmZXJlbmNlID49IDApIHtcbiAgICAgICAgdGhpcy5kcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB0aGlzLmRyYXdhYmxlLnRleHRSZXBsYWNlQ29sb3IgPSBcIiMzNkI1REJcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIHRoaXMuZHJhd2FibGUudGV4dFJlcGxhY2VDb2xvciA9IFwiI0U3NEMzQ1wiO1xuICAgIH1cbiAgICB0aGlzLnJlcVBhcnRpYWwgPSBmYWxzZTtcbiAgICB0aGlzLm5ldyA9IHRydWU7XG4gICAgdGhpcy5saW5lQ29sb3IgPSBcIiNCM0IzNjlcIjtcbiAgICB0aGlzLm9wZW4gPSBmYWxzZTtcblxuICAgIHRoaXMuZHJhd2FibGUudGV4dFNpemUgPSAxMDtcbiAgICB0aGlzLmRyYXdhYmxlLmltZ0ZpbGwgPSBmYWxzZTtcbiAgICB2YXIgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lcldpZHRoIC0gKHdpbmRvdy5pbm5lcldpZHRoIC8gMikpO1xuICAgIHZhciB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAtICgod2luZG93LmlubmVySGVpZ2h0IC0gNTApIC8gMikpO1xuICAgIHRoaXMuZHJhd2FibGUucG9zID0gbmV3IFZlY3RvcjJEKHgsIHkpO1xuICAgIHRoaXMuZHJhd2FibGUucmFkaXVzID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIDM1KSArIDM1KTtcbiAgICB0aGlzLmRyYXdhYmxlLmNvbG9yID0gXCIjZmZmZmZmXCI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJDb2xvciA9IFwiI0IzQjM2OVwiO1xuICAgIHRoaXMuZHJhd2FibGUuYm9yZGVyU2NhbGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dENvbG9yID0gXCIjZmZmZmZmXCI7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0Rm9udCA9IFwiU291cmNlU2Fuc1Byb1wiO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dEFuY2hvciA9IG5ldyBWZWN0b3IyRCgwLjUsIDAuNSk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UG9zID0gbmV3IFZlY3RvcjJEKDAsIDAuNSk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0UGFkZGluZyA9IG5ldyBWZWN0b3IyRCgxMCwgMTApO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dFJlcGxhY2UgPSAxNTtcblxuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBkID0gTWF0aC5yYW5kb20oKSAvIDEwO1xuICAgICAgICB2YXIgcE9tID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMik7XG4gICAgICAgIGlmKHBPbSA9PT0gMSkge1xuICAgICAgICAgICAgZCA9IC1kO1xuICAgICAgICB9XG4gICAgICAgIG1lLnN0b2NrUHJpY2UgPSBNYXRoLmZsb29yKChtZS5zdG9ja1ByaWNlICsgZCkgKiAxMDApIC8gMTAwO1xuICAgICAgICBtZS5kaWZmZXJlbmNlID0gMDtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IG1lLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBtZS50cmFkZXJzW2ldLmNoYW5nZVN0b2NrUHJpY2UobWUuc3RvY2tQcmljZSk7XG4gICAgICAgICAgICBtZS5kaWZmZXJlbmNlICs9IG1lLnRyYWRlcnNbaV0uZGlmZmVyZW5jZTtcbiAgICAgICAgfVxuICAgICAgICBtZS5kaWZmZXJlbmNlID0gTWF0aC5mbG9vcihtZS5kaWZmZXJlbmNlICogMTAwKSAvIDEwMDtcbiAgICAgICAgaWYoIW1lLm9wZW4pIHtcbiAgICAgICAgICAgIG1lLmRyYXdhYmxlLnNldFRleHQobWUuZGlmZmVyZW5jZS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7IHN0eWxlOiAnY3VycmVuY3knLCBjdXJyZW5jeTogJ0VVUid9KSk7XG4gICAgICAgICAgICBpZihtZS5kaWZmZXJlbmNlID49IDApIHtcbiAgICAgICAgICAgICAgICBtZS5kcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiIzM2QjVEQlwiO1xuICAgICAgICAgICAgICAgIG1lLmRyYXdhYmxlLnRleHRSZXBsYWNlQ29sb3IgPSBcIiMzNkI1REJcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWUuZHJhd2FibGUudGV4dEJhY2tncm91bmQgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgICAgICBtZS5kcmF3YWJsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjRTc0QzNDXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZihtZS5kaWZmZXJlbmNlID49IDApIHtcbiAgICAgICAgICAgICAgICBtZS5kcmF3YWJsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjMzZCNURCXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lLmRyYXdhYmxlLnRleHRSZXBsYWNlQ29sb3IgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjMkMzRTUwXCI7XG4gICAgICAgICAgICBtZS5kcmF3YWJsZS5zZXRUZXh0KG1lLnN0b2NrUHJpY2UudG9Mb2NhbGVTdHJpbmcoJ2JlLU5MJywgeyBzdHlsZTogJ2N1cnJlbmN5JywgY3VycmVuY3k6ICdFVVInfSkpO1xuICAgICAgICB9XG4gICAgICAgIG1lLnJlcVBhcnRpYWwgPSB0cnVlO1xuICAgIH0sIDIwMDApO1xuXG4gICAgdGhpcy5pbnRlcmFjdGlvbiA9IGZ1bmN0aW9uKG1vdXNlUG9zLCBzY2FsZSkge1xuICAgICAgICB2YXIgbW91c2VEaWZmZXJlbmNlID0gbW91c2VQb3Muc3ViVmVjdG9yKHRoaXMuZHJhd2FibGUucG9zLm11bChzY2FsZSkpO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IDA7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUucmFkaXVzICE9PSAwKSB7XG4gICAgICAgICAgICBkaWZmZXJlbmNlID0gdGhpcy5kcmF3YWJsZS5yYWRpdXMgKiBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgIT09IDApIHtcbiAgICAgICAgICAgIGRpZmZlcmVuY2UgPSB0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgKiBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VEaWZmZXJlbmNlLmxlbmd0aCgpIDw9IGRpZmZlcmVuY2UpIHtcbiAgICAgICAgICAgIGlmKHRoaXMubmV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5saW5lQ29sb3IgPSBcIiMyQzNFNTBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWxQb3MgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5kcmF3YWJsZS5wb3MubXVsKHNjYWxlKSk7XG4gICAgICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLnRyYWRlcnNbaV0uaW50ZXJhY3Rpb24ocmVsUG9zLCBzY2FsZSwgYWxwaGEpO1xuICAgICAgICAgICAgaWYobyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwLCBtID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHRoaXMucHJlRHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmxpbmVDb2xvcjtcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAwLjU7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHgubW92ZVRvKDAsIDApO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbihjdHgsIHNjYWxlKSB7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUuc2hvdykge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy5kcmF3YWJsZS5wb3MueCwgdGhpcy5kcmF3YWJsZS5wb3MueSk7XG4gICAgICAgICAgICB2YXIgYW5nbGUgPSAxODAgLyAodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5kcmF3KGN0eCwgc2NhbGUsIGFscGhhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd0NpcmNsZShjdHgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3SW1hZ2VJbkNpcmNsZShjdHgpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3Qm9yZGVyRm9yQ2lyY2xlKGN0eCwgc2NhbGUpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3VGV4dChjdHgsIHNjYWxlKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5wb3N0RHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFkZXJzW2ldLnBvc3REcmF3KGN0eCwgc2NhbGUsIGFscGhhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5wYXJ0aWFsID0gZnVuY3Rpb24oY3R4LCBzY2FsZSkge1xuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnNob3cpIHtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMuZHJhd2FibGUucG9zLngsIHRoaXMuZHJhd2FibGUucG9zLnkpO1xuICAgICAgICAgICAgdmFyIGFuZ2xlID0gMTgwIC8gKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFscGhhID0gYW5nbGUgKiAoaSArIDEgLSAoKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKSAvIDIpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYWRlcnNbaV0ucG9zdERyYXcoY3R4LCBzY2FsZSwgYWxwaGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoKHRoaXMuZHJhd2FibGUudGV4dFNpemUgKiBzY2FsZSkgPj0gdGhpcy5kcmF3YWJsZS50ZXh0TWluU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd1RleHQoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDAsIGwgPSAwLCB0ID0gbnVsbCwgbWUgPSB0aGlzO1xuICAgICAgICBpZighdGhpcy5vcGVuKSB7XG4gICAgICAgICAgICBmb3IobCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgICAgIHQuZHJhd2FibGUuc2hvdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdC5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwicG9zXCIsIG5ldyBWZWN0b3IyRCgwLCB0aGlzLmRyYXdhYmxlLnJhZGl1cyArIHQuZHJhd2FibGUucmFkaXVzICsgMTUpLCAzMDAsIFwiZWFzZUluT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwidGV4dFBhZGRpbmdcIiwgbmV3IFZlY3RvcjJEKDAsIDApLCAxNTAsIFwiZWFzZUluXCIsIGZ1bmN0aW9uKGRvbmUsIGRyYXdhYmxlKSB7XG4gICAgICAgICAgICAgICAgZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgxMCwgMTApLCAxNTAsIFwiZWFzZU91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlKFwidGV4dFNpemVcIiwgMCwgMTUwLCBcImVhc2VJblwiLCBmdW5jdGlvbihkb25lLCBkcmF3YWJsZSkge1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjMkMzRTUwXCI7XG4gICAgICAgICAgICAgICAgZHJhd2FibGUuc2V0VGV4dChtZS5zdG9ja1ByaWNlLnRvTG9jYWxlU3RyaW5nKCdiZS1OTCcsIHsgc3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnRVVSJ30pKTtcbiAgICAgICAgICAgICAgICBtZS5vcGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBkcmF3YWJsZS5hbmltYXRlKFwidGV4dFNpemVcIiwgMTAsIDE1MCwgXCJlYXNlT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IobCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmKHQub3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdC5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwicG9zXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMzAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMTUwLCBcImVhc2VJblwiLCBmdW5jdGlvbihkb25lLCBkcmF3YWJsZSkge1xuICAgICAgICAgICAgICAgIGRyYXdhYmxlLmFuaW1hdGVWZWN0b3IoXCJ0ZXh0UGFkZGluZ1wiLCBuZXcgVmVjdG9yMkQoMTAsIDEwKSwgMTUwLCBcImVhc2VPdXRcIiwgbnVsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZShcInRleHRTaXplXCIsIDAsIDE1MCwgXCJlYXNlSW5cIiwgZnVuY3Rpb24oZG9uZSwgZHJhd2FibGUpIHtcbiAgICAgICAgICAgICAgICBkcmF3YWJsZS5zZXRUZXh0KG1lLmRpZmZlcmVuY2UudG9Mb2NhbGVTdHJpbmcoJ2JlLU5MJywgeyBzdHlsZTogJ2N1cnJlbmN5JywgY3VycmVuY3k6ICdFVVInfSkpO1xuICAgICAgICAgICAgICAgIGlmKG1lLmRpZmZlcmVuY2UgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICBkcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiIzM2QjVEQlwiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjRTc0QzNDXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1lLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBkcmF3YWJsZS5hbmltYXRlKFwidGV4dFNpemVcIiwgMTAsIDE1MCwgXCJlYXNlT3V0XCIsIG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5yZXF1ZXN0UmVkcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBpZih0aGlzLnRyYWRlcnNbaV0uZHJhd2FibGUucmVxdWVzdFJlZHJhdykge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd2FibGUucmVxdWVzdFJlZHJhdyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFkZXJzW2ldLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcpIHtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUucmVxdWVzdFJlZHJhdyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICB0aGlzLnJlcXVlc3RQYXJ0aWFsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBpZih0aGlzLnRyYWRlcnNbaV0ucmVxdWVzdFBhcnRpYWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZXFQYXJ0aWFsO1xuICAgIH1cbn07IiwidmFyIHRyYWRlcyA9IFtdO1xudmFyIHRyYWRlcnMgPSBbXTtcbnZhciBwcm9maWxlID0gbmV3IERyYXdhYmxlKCk7XG52YXIgbG9nb3MgPSBbXCJsb2dvMC5zdmdcIiwgXCJsb2dvMS5zdmdcIiwgXCJsb2dvMi5zdmdcIiwgXCJsb2dvMy5zdmdcIiwgXCJsb2dvNC5zdmdcIl07XG52YXIgcGVvcGxlID0gW1tcIkNyYXp5IEhlZmZlXCIsIFwidHJhZGVyMC5qcGdcIl0sIFtcIk1hcmlubyBIb3N0aW5vXCIsIFwidHJhZGVyMS5qcGdcIl0sIFtcIk5pY29sc2ggTGF2YW5kYVwiLCBcInRyYWRlcjIuanBnXCJdLCBbXCJ4WHJvYmtlNjlYeFwiLCBcInRyYWRlcjMuanBnXCJdXTtcblxuKGZ1bmN0aW9uKCkge1xuICAgIHByb2ZpbGUuc2V0SW1hZ2UoXCJkaXN0L2ltYWdlcy9wcm9maWxlLmpwZ1wiKTtcbiAgICBwcm9maWxlLnJhZGl1cyA9IDEwMDtcbiAgICBwcm9maWxlLmNvbG9yID0gXCIjZmZmZmZmXCI7XG4gICAgcHJvZmlsZS5ib3JkZXJDb2xvciA9IFwiI2VlZWVlZVwiO1xuICAgIHByb2ZpbGUuYm9yZGVyU2NhbGluZyA9IGZhbHNlO1xuICAgIHByb2ZpbGUuYm9yZGVyV2lkdGggPSAyO1xuICAgIHByb2ZpbGUudGV4dFNpemUgPSAxMjtcbiAgICBwcm9maWxlLnRleHRDb2xvciA9IFwiI2ZmZmZmZlwiO1xuICAgIHByb2ZpbGUudGV4dEZvbnQgPSBcIlNvdXJjZVNhbnNQcm9cIjtcbiAgICBwcm9maWxlLnRleHRBbmNob3IgPSBuZXcgVmVjdG9yMkQoMC41LCAwLjUpO1xuICAgIHByb2ZpbGUudGV4dFBvcyA9IG5ldyBWZWN0b3IyRCgwLCAwLjUpO1xuICAgIHByb2ZpbGUudGV4dFBhZGRpbmcgPSBuZXcgVmVjdG9yMkQoMTAsIDEwKTtcbiAgICBwcm9maWxlLnRleHRSZXBsYWNlID0gMTU7XG4gICAgdHJhZGVzLnB1c2gocHJvZmlsZSk7XG4gICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICB2YXIgYW1vdW50ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTApO1xuICAgICAgICB2YXIgaW5BdCA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAyMDAwMCkpIC8gMTAwO1xuICAgICAgICB2YXIgdHlwZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDIpO1xuICAgICAgICB2YXIgdHJhZGVyID0gW2Ftb3VudCwgaW5BdCwgdHlwZV07XG4gICAgICAgIHRyYWRlcnMucHVzaCh0cmFkZXIpO1xuICAgIH1cbiAgICB2YXIgZGlmZiA9IDA7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICB2YXIgciA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogNCk7XG4gICAgICAgIHZhciBwcGwgPSBbXTtcbiAgICAgICAgdmFyIHN0b2NrUHJpY2UgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMjAwKSAqIDEwMCkgLyAxMDA7XG4gICAgICAgIGZvcih2YXIgayA9IDA7IGsgPCByOyBrKyspIHtcbiAgICAgICAgICAgIHZhciB0ID0gbmV3IFRyYWRlcihwZW9wbGVba11bMF0sIHRyYWRlcnNba11bMF0sIHRyYWRlcnNba11bMV0sIHRyYWRlcnNba11bMl0sIFwiVGhpcyBsb29rcyBnb29kIVxcbkkgY2FuIGV2ZW4gcHV0IGEgc2Vjb25kIGxpbmVcXG5cXG5BbmQgZXZlbiBtb3JlXCIpO1xuICAgICAgICAgICAgdC5kcmF3YWJsZS5zZXRJbWFnZShcImRpc3QvaW1hZ2VzL1wiICsgcGVvcGxlW2tdWzFdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LnBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuNCkgKyAwLjE7XG4gICAgICAgICAgICBwcGwucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhZGUgPSBuZXcgVHJhZGUoc3RvY2tQcmljZSwgcHBsKTtcbiAgICAgICAgZGlmZiArPSB0cmFkZS5kaWZmZXJlbmNlO1xuICAgICAgICB0cmFkZS5kcmF3YWJsZS5zZXRJbWFnZShcImRpc3QvaW1hZ2VzL1wiICsgbG9nb3NbaV0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2FudmFzLmRyYXcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRyYWRlcy5wdXNoKHRyYWRlKTtcbiAgICB9XG4gICAgaWYoZGlmZiA+PSAwKSB7XG4gICAgICAgIHByb2ZpbGUudGV4dEJhY2tncm91bmQgPSBcIiMzNkI1REJcIjtcbiAgICAgICAgcHJvZmlsZS50ZXh0UmVwbGFjZUNvbG9yID0gXCIjMzZCNURCXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcHJvZmlsZS50ZXh0QmFja2dyb3VuZCA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICBwcm9maWxlLnRleHRSZXBsYWNlQ29sb3IgPSBcIiNFNzRDM0NcIjtcbiAgICB9XG4gICAgcHJvZmlsZS5zZXRUZXh0KChNYXRoLmZsb29yKGRpZmYgKiAxMDApIC8gMTAwKS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7c3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnRVVSJ30pKTtcbiAgICB2YXIgY2FudmFzID0gbmV3IENhbnZhcygwLCA1MCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCAtIDUwLCBcInRyYWRlc1wiLCB0cmFkZXMpO1xuICAgIGNhbnZhcy5wYXJ0aWFsQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpZmYgPSAwO1xuICAgICAgICBmb3IodmFyIGkgPSAxLCBsID0gY2FudmFzLm9iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBkaWZmICs9IGNhbnZhcy5vYmplY3RzW2ldLmRpZmZlcmVuY2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYoZGlmZiA+PSAwKSB7XG4gICAgICAgICAgICBjYW52YXMub2JqZWN0c1swXS50ZXh0QmFja2dyb3VuZCA9IFwiIzM2QjVEQlwiO1xuICAgICAgICAgICAgY2FudmFzLm9iamVjdHNbMF0udGV4dFJlcGxhY2VDb2xvciA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FudmFzLm9iamVjdHNbMF0udGV4dEJhY2tncm91bmQgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzWzBdLnRleHRSZXBsYWNlQ29sb3IgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgfVxuICAgICAgICBjYW52YXMub2JqZWN0c1swXS5zZXRUZXh0KChNYXRoLmZsb29yKGRpZmYgKiAxMDApIC8gMTAwKS50b0xvY2FsZVN0cmluZygnYmUtTkwnLCB7c3R5bGU6ICdjdXJyZW5jeScsIGN1cnJlbmN5OiAnRVVSJ30pKTtcbiAgICAgICAgY2FudmFzLm9iamVjdHNbMF0uZHJhd1RleHQoY2FudmFzLmN0eCwgY2FudmFzLnNjYWxlKTtcbiAgICB9O1xuICAgIHByb2ZpbGUuZHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgdGhpcy5kcmF3Q2lyY2xlKGN0eCk7XG4gICAgICAgIHRoaXMuZHJhd0ltYWdlSW5DaXJjbGUoY3R4KTtcbiAgICAgICAgdGhpcy5kcmF3Qm9yZGVyRm9yQ2lyY2xlKGN0eCwgc2NhbGUpO1xuICAgICAgICB0aGlzLmRyYXdUZXh0KGN0eCwgc2NhbGUpO1xuICAgIH07XG4gICAgY2FudmFzLmRyYXcoKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYWRlc1wiKS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25TdGFydChlKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYWRlc1wiKS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIHZhciB0b3VjaCA9IGUudG91Y2hlc1swXTtcbiAgICAgICAgaW50ZXJhY3Rpb25TdGFydCh0b3VjaCk7XG4gICAgfSk7XG4gICAgdmFyIGludGVyYWN0aW9uU3RhcnQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNhbnZhcy5pbnRlcmFjdGlvblN0YXJ0KGUsIGZ1bmN0aW9uKG9iamVjdCwgbW91c2VQb3MpIHtcbiAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gY2FudmFzLm9iamVjdHMuaW5kZXhPZihvYmplY3QpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzLnB1c2goY2FudmFzLm9iamVjdHMuc3BsaWNlKGluZGV4LCAxKVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYW52YXMuc2VsZWN0ZWQgPSBvYmplY3Q7XG4gICAgICAgICAgICBjYW52YXMubW91c2VQb3MgPSBtb3VzZVBvcztcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYWRlc1wiKS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgaW50ZXJhY3Rpb25Nb3ZlKGUpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIgdG91Y2ggPSBlLnRvdWNoZXNbMF07XG4gICAgICAgIGludGVyYWN0aW9uTW92ZSh0b3VjaCk7XG4gICAgfSk7XG4gICAgdmFyIGludGVyYWN0aW9uTW92ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY2FudmFzLmludGVyYWN0aW9uTW92ZShlLCBmdW5jdGlvbihvYmplY3QsIG1vdXNlUG9zKSB7XG4gICAgICAgICAgICBpZihvYmplY3QgaW5zdGFuY2VvZiBUcmFkZSkge1xuICAgICAgICAgICAgICAgIG9iamVjdC5kcmF3YWJsZS5wb3MgPSBtb3VzZVBvcztcbiAgICAgICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpbnRlcmFjdGlvblN0b3AoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYWRlc1wiKS5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGludGVyYWN0aW9uU3RvcCgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHZhciBpbnRlcmFjdGlvblN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgY2FudmFzLmludGVyYWN0aW9uU3RvcChmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgICAgIGlmKG9iamVjdCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBsO1xuICAgICAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBjYW52YXMub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYW52YXMub2JqZWN0c1tpXS5vcGVuICYmIGNhbnZhcy5vYmplY3RzW2ldICE9PSBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMub2JqZWN0c1tpXS5jbGlja2VkKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYob2JqZWN0ID09PSBcInNlbGZcIikge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gY2FudmFzLm9iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FudmFzLm9iamVjdHNbaV0ub3Blbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5vYmplY3RzW2ldLmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0eXBlb2Ygb2JqZWN0LmNsaWNrZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXNldE9mZnNldFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbnZhcy5tb3ZlVG9DZW50ZXIoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjYWxlQ2FudmFzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbnZhcy5zY2FsZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNhbnZhcy5kcmF3KCk7XG4gICAgfSlcbn0pKCk7IiwiKGZ1bmN0aW9uICgpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcIm5nUm91dGVcIl0pO1xuXG4gICAgYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKFwiL2hvbWVcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL2hvbWUuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwibWFpbkNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL3Byb2ZpbGUvOmlkXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9wcm9maWxlLmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcInByb2ZpbGVDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9iYWxhbmNlSGlzdG9yeS86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL2JhbGFuY2VIaXN0b3J5Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcImJhbGFuY2VDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9kZXBvc2l0LzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvZGVwb3NpdC5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJiYWxhbmNlQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvd2l0aGRyYXcvOmlkXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy93aXRoZHJhdy5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJiYWxhbmNlQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm90aGVyd2lzZSh7XG4gICAgICAgICAgICAgICAgcmVkaXJlY3RUbzogXCIvaG9tZVwiXG4gICAgICAgICAgICB9KTtcbiAgICB9KTtcblxufSkoKTsiLCIoZnVuY3Rpb24gKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYmFsYW5jZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcywgJHdpbmRvdyl7XG4gICAgICAgIC8vbmV3IGNvZGUgZ29lcyBoZXJlXG5cbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcbiAgICAgICAgJHNjb3BlLnVzZXIudXNlcklkID0gXCIxXCI7XG4gICAgICAgICRzY29wZS51c2VyLmZpcnN0TmFtZSA9IFwiTWFyaWpuXCI7XG4gICAgICAgICRzY29wZS51c2VyLmxhc3ROYW1lID0gXCJIb3N0ZW5cIjtcbiAgICAgICAgJHNjb3BlLnVzZXIuZGVwb3NpdEFtb3VudCA9IDA7XG4gICAgICAgICRzY29wZS51c2VyLmN1cnJlbnRBbW91bnQgPSAyMDAwO1xuXG4gICAgICAgICRzY29wZS5kZXBvc2l0ID0gZnVuY3Rpb24odXNlcil7XG4gICAgICAgICAgICAkc2NvcGUudXNlci5jdXJyZW50QW1vdW50ICs9IHVzZXIuZGVwb3NpdEFtb3VudDtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaGFzaCA9IFwiL2hvbWVcIjtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaXNFbmFibGVkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKCRzY29wZS51c2VyLmRlcG9zaXRBbW91bnQgPT09IDAgfHwgdHlwZW9mICRzY29wZS51c2VyLmRlcG9zaXRBbW91bnQgPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiYmFsYW5jZUNvbnRyb2xsZXJcIiwgWyBcIiRzY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiR3aW5kb3dcIiwgYmFsYW5jZUNvbnRyb2xsZXJdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpe1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIG1haW5Db250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlKXtcbiAgICAgICAgLy9uZXcgY29kZSBnb2VzIGhlcmVcbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcbiAgICAgICAgJHNjb3BlLnVzZXIudXNlcklkID0gXCIxXCI7XG4gICAgICAgICRzY29wZS51c2VyLmZpcnN0TmFtZSA9IFwiTWFyaWpuXCI7XG4gICAgICAgICRzY29wZS51c2VyLmxhc3ROYW1lID0gXCJIb3N0ZW5cIjtcbiAgICAgICAgJHNjb3BlLnVzZXIuY3VycmVudEFtb3VudCA9IDIwMDA7XG5cbiAgICAgICAgdmFyIEFubmEgPSB7aWQ6IDksIGZpcnN0TmFtZTogXCJBbm5hXCIsIGxhc3ROYW1lOiBcIkFiY2RcIiwgZm9sbG93ZXJzOiAyN307XG4gICAgICAgIHZhciBCb2IgPSB7aWQ6IDIsIGZpcnN0TmFtZTogXCJCb2JcIiwgbGFzdE5hbWU6IFwiQWJjZFwiLCBmb2xsb3dlcnM6IDI4fTtcbiAgICAgICAgdmFyIENocmlzdGluZSA9IHtpZDogMywgZmlyc3ROYW1lOiBcIkNocmlzdGluZVwiLCBsYXN0TmFtZTogXCJBYmNkXCIsIGZvbGxvd2VyczogMTA1fTtcbiAgICAgICAgdmFyIERhdmUgPSB7aWQ6IDQsIGZpcnN0TmFtZTogXCJEYXZlXCIsIGxhc3ROYW1lOiBcIkFiY2RcIiwgZm9sbG93ZXJzOiAzMH07XG4gICAgICAgIHZhciBFcmljID0ge2lkIDogNSwgZmlyc3ROYW1lOiBcIkVyaWNcIiwgbGFzdE5hbWU6IFwiQWJjZFwiLCBmb2xsb3dlcnM6IDJ9O1xuICAgICAgICB2YXIgRnJhbmNpcyA9IHtpZDogNixmaXJzdE5hbWU6IFwiRnJhbmNpc1wiLCBsYXN0TmFtZTogXCJBYmNkXCIsIGZvbGxvd2VyczogMH07XG4gICAgICAgIHZhciBHYWJlbiA9IHtpZDogNyxmaXJzdE5hbWU6IFwiR2FiZW5cIiwgbGFzdE5hbWU6IFwiQWJjZFwiLCBmb2xsb3dlcnM6IDI5OX07XG4gICAgICAgIHZhciBIYXJvbGQgPSB7aWQ6IDgsZmlyc3ROYW1lOiBcIkhhcm9sZFwiLCBsYXN0TmFtZTogXCJBYmNkXCIsIGZvbGxvd2VyczogNH07XG5cbiAgICAgICAgJHNjb3BlLnRyYWRlcnMgPSBbQW5uYSwgQm9iLCBDaHJpc3RpbmUsIERhdmUsIEVyaWMsIEZyYW5jaXMsIEdhYmVuLCBIYXJvbGRdO1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwibWFpbkNvbnRyb2xsZXJcIiwgWyBcIiRzY29wZVwiLCBtYWluQ29udHJvbGxlcl0pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cblxuXG4gICAgdmFyIHByb2ZpbGVDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm91dGVQYXJhbXMsICR3aW5kb3csIHVzZXJTZXJ2aWNlKXtcbiAgICAgICAgLy9uZXcgY29kZSBnb2VzIGhlcmVcblxuICAgICAgICB2YXIgdXNlcklkID0gJHJvdXRlUGFyYW1zLmlkO1xuICAgICAgICAkc2NvcGUudXNlciA9IHVzZXJTZXJ2aWNlLmdldEJ5SWQodXNlcklkKTtcblxuICAgICAgICAvKiRzY29wZS51c2VyID0ge1xuICAgICAgICAgICAgXCJpZFwiOiAxLFxuICAgICAgICAgICAgXCJmaXJzdE5hbWVcIjogXCJNYXJpam5cIixcbiAgICAgICAgICAgIFwibGFzdE5hbWVcIjogXCJIb3N0ZW5cIixcbiAgICAgICAgICAgIFwicGFzc3cxXCI6IFwiMTIzNDU2XCIsXG4gICAgICAgICAgICBcInBhc3N3MlwiOiBcIjEyMzQ1NlwiLFxuICAgICAgICAgICAgXCJjdXJyZW50QW1vdW50XCI6IDIwMDBcbiAgICAgICAgfTsqL1xuXG4gICAgICAgICRzY29wZS5pc0VuYWJsZWQgPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiY2hhbmdlcyBzYXZlZFwiKTtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaGFzaCA9IFwiL2hvbWVcIjtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcInByb2ZpbGVDb250cm9sbGVyXCIsIFsgXCIkc2NvcGVcIiwgXCIkcm91dGVQYXJhbXNcIiwgXCIkd2luZG93XCIsIFwidXNlclNlcnZpY2VcIiwgcHJvZmlsZUNvbnRyb2xsZXJdKTtcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
