function Trade(t,e,a){this.img=null,this.imgSrc=t,this.savedPos=e,this.actualPos=null,this.traders=a,this.percentage=0;for(var r=0;r<this.traders.length;r++)this.percentage+=this.traders[r].totalPercentage*this.traders[r].percentage;this.rad=50+100*this.percentage;var s=this,l=new Image;l.src=this.imgSrc,l.onload=function(){s.img=l}}function Trader(t,e,a,r,s,l){this.name=t,this.img=null,this.imgSrc=e,this.totalPercentage=a,this.percentage=0,this.difference=r,this.actualPos=null,this.comment=s,this.type=l;var o=this,i=new Image;i.src=this.imgSrc,i.onload=function(){o.img=i}}Trade.prototype.reverse=function(t){var e=this.actualPos;e=e.subVector(t.offset),e=e.subVector(t.center),e=e.div(t.scale),this.savedPos=e;for(var a=180/(this.traders.length+1),r=0;r<this.traders.length;r++){var s=a*(r+1-(this.traders.length+1)/2);this.traders[r].calculate(t.scale,this.rad,s,this.actualPos)}},Trade.prototype.calculate=function(t){var e=this.savedPos;e=e.mul(t.scale),e=e.addVector(t.center),e=e.addVector(t.offset),this.actualPos=e;for(var a=180/(this.traders.length+1),r=0;r<this.traders.length;r++){var s=a*(r+1-(this.traders.length+1)/2);this.traders[r].calculate(t.scale,this.rad,s,e)}},Trade.prototype.preDraw=function(t){if(null!==this.img){t.ctx.strokeStyle="#2c3e50",t.ctx.lineWidth=.5*t.scale,t.ctx.beginPath();var e=t.center.addVector(t.offset);t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(this.actualPos.x,this.actualPos.y),t.ctx.stroke(),t.ctx.closePath()}},Trade.prototype.draw=function(t){if(null!==this.img){t.cirLogo(this.actualPos.x,this.actualPos.y,this.rad,this.img);for(var e=0,a=0;a<this.traders.length;a++){var r=this.traders[a];e+=r.totalPercentage*r.percentage*r.difference,r.draw(t)}var s=Math.floor(e*t.startingBudget*100)/100,l=t.startingBudget/1e3;-l>s?t.ctx.fillStyle="#E74C3C":s>l?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",s=0>s?"- € "+Math.abs(s):"€ "+s;var o=12*t.scale;if(o>=8){t.ctx.font=o+"pt SourceSansPro";var i=t.ctx.measureText(s).width;t.ctx.beginPath(),t.ctx.rect(this.actualPos.x-i/2-10*t.scale,this.actualPos.y+this.rad*t.scale/2-o/2-10*t.scale,i+20*t.scale,o+20*t.scale),t.ctx.closePath(),t.ctx.fill(),t.ctx.fillStyle="#ffffff",t.ctx.fillText(s,this.actualPos.x-i/2,this.actualPos.y+this.rad*t.scale/2+o/2)}else t.cir(this.actualPos.x,this.actualPos.y+this.rad*t.scale/2,this.rad*t.scale*Math.abs(e)*10+this.rad*t.scale*.1)}},Trader.prototype.calculate=function(t,e,a,r){var s=new Vector2D(0,30);s=s.addVector(new Vector2D(0,e)),s=s.mul(t),s=s.rotate(a-90),s=s.addVector(r),this.actualPos=s},Trader.prototype.draw=function(t){if(null!==this.img){t.cirImg(this.actualPos.x,this.actualPos.y,25,this.img);var e=t.startingBudget/1e3,a=Math.floor(t.startingBudget*this.totalPercentage*this.percentage*this.difference*100)/100;-e>a?t.ctx.fillStyle="#E74C3C":a>e?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.cir(this.actualPos.x,this.actualPos.y,20*Math.abs(this.difference)+5)}},Trader.prototype.postDraw=function(t,e){var a=12*e;t.ctx.font="bold "+a+"pt SourceSansPro";var r=0,s=this.comment.split("\n");0===this.type?s.unshift("xx long at € xx,xx"):1===this.type&&s.unshift("xx short at € xx,xx");var l=Math.floor(t.startingBudget*this.totalPercentage*this.percentage*this.difference*100)/100;s.unshift(this.name+"p€ "+Math.abs(l));for(var o=0;o<s.length;o++){var i=t.ctx.measureText(s[o]).width;i>r&&(r=i)}t.ctx.fillStyle="#ffffff",t.ctx.beginPath(),t.ctx.rect(this.actualPos.x+25*t.scale,this.actualPos.y-a*s.length-a*(s.length-1)*1.2-25*t.scale-20,r+20,a*s.length+a*(s.length-1)*1.2+20),t.ctx.closePath(),t.ctx.fill();for(var n=0;n<s.length;n++)if(n>0&&(t.ctx.font=a+"pt SourceSansPro"),1===n&&0===this.type?t.ctx.fillStyle="#36B5DB":1===n&&1===this.type?t.ctx.fillStyle="#E74C3C":t.ctx.fillStyle="#2C3E50",0===n){var c=t.startingBudget/1e3,h=s[n].split("p");t.ctx.fillText(h[0],this.actualPos.x+25*t.scale+10,this.actualPos.y-a*(s.length-n)-a*(s.length-1)*1.2+1.2*n*a-25*t.scale),-c>l?(t.ctx.fillStyle="#E74C3C",h[1]="- "+h[1]):l>c?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.ctx.fillText(h[1],this.actualPos.x+25*t.scale+10+r-t.ctx.measureText(h[1]).width,this.actualPos.y-a*(s.length-n)-a*(s.length-1)*1.2+1.2*n*a-25*t.scale)}else t.ctx.fillText(s[n],this.actualPos.x+25*t.scale+10,this.actualPos.y-a*(s.length-n)-a*(s.length-1)*1.2+1.2*n*a-25*t.scale)};var trades=[],traders=[],logos=["logo0.svg","logo1.svg","logo2.svg","logo3.svg","logo4.svg"],people=[["Crazy Heffe","trader0.jpg"],["Marino Hostino","trader1.jpg"],["Nicolsh Lavanda","trader2.jpg"],["xXrobke69Xx","trader3.jpg"]];!function(){for(var t=0;4>t;t++){var e=.15*Math.random()+.1,a=Math.random()-.5,r=Math.floor(2*Math.random());traders.push(new Trader(people[t][0],"dist/images/"+people[t][1],e,a,"This just looks good!\nI can even put a second line here\n\nMultiline spaces are supported",r))}for(var s=0;5>s;s++){for(var l=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),o=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2),i=Math.ceil(4*Math.random()),n=[],c=0;i>c;c++){var h=new Trader(traders[c].name,traders[c].imgSrc,traders[c].totalPercentage,traders[c].difference,traders[c].comment,traders[c].type);h.percentage=.4*Math.random()+.1,n.push(h)}trades.push(new Trade("dist/images/"+logos[s],new Vector2D(l,o),n))}for(var d=new Canvas(window.innerWidth,window.innerHeight-50,"trades","#eeeeee",trades),u=0;u<d.objs.length;u++)d.objs[u].calculate(d);d.drawCanvas()}(),function(){"use strict";var t=angular.module("app",["ngRoute"]);t.config(function(t){t.when("/home",{templateUrl:"pages/home.html",controller:"mainController"}).when("/profile/:id",{templateUrl:"pages/profile.html",controller:"profileController"}).when("/balanceHistory/:id",{templateUrl:"pages/balanceHistory.html",controller:"balanceController"}).when("/deposit/:id",{templateUrl:"pages/deposit.html",controller:"balanceController"}).when("/withdraw/:id",{templateUrl:"pages/withdraw.html",controller:"balanceController"}).otherwise({redirectTo:"/home"})})}(),function(){"use strict";var t=function(t,e){t.user={},t.user.userId="1",t.user.firstName="Marijn",t.user.lastName="Hosten"};angular.module("app").controller("balanceController",["$scope","$routeParams",t])}(),function(){"use strict";var t=function(t){t.user={},t.user.userId="1",t.user.firstName="Marijn",t.user.lastName="Hosten"};angular.module("app").controller("mainController",["$scope",t])}(),function(){"use strict";var t=function(t,e,a){t.user={firstName:"Marijn",lastName:"Hosten",passw1:"123456",passw2:"123456"},t.isEnabled=function(){return!1},t.submitForm=function(t){alert("changes saved"),a.location.hash="/home.html"}};angular.module("app").controller("profileController",["$scope","$routeParams","$window",t])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwidHJhZGVyLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiLCJiYWxhbmNlQ29udHJvbGxlci5qcyIsIm1haW5Db250cm9sbGVyLmpzIiwicHJvZmlsZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiVHJhZGUiLCJpbWdTcmMiLCJ2ZWN0b3IiLCJ0cmFkZXJzIiwidGhpcyIsImltZyIsInNhdmVkUG9zIiwiYWN0dWFsUG9zIiwicGVyY2VudGFnZSIsImkiLCJsZW5ndGgiLCJ0b3RhbFBlcmNlbnRhZ2UiLCJyYWQiLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJUcmFkZXIiLCJuYW1lIiwiZGlmZmVyZW5jZSIsImNvbW1lbnQiLCJ0eXBlIiwicHJvdG90eXBlIiwicmV2ZXJzZSIsImMiLCJwb3MiLCJzdWJWZWN0b3IiLCJvZmZzZXQiLCJjZW50ZXIiLCJkaXYiLCJzY2FsZSIsImFuZ2xlIiwiYWxwaGEiLCJjYWxjdWxhdGUiLCJtdWwiLCJhZGRWZWN0b3IiLCJwcmVEcmF3IiwiY3R4Iiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJ4IiwieSIsImxpbmVUbyIsInN0cm9rZSIsImNsb3NlUGF0aCIsImRyYXciLCJjaXJMb2dvIiwib3ZlcmFsbCIsInQiLCJ0ZXh0IiwiTWF0aCIsImZsb29yIiwic3RhcnRpbmdCdWRnZXQiLCJvbmVQcm9taWxsZSIsImZpbGxTdHlsZSIsImFicyIsInNpemUiLCJmb250IiwidHh0U2l6ZSIsIm1lYXN1cmVUZXh0Iiwid2lkdGgiLCJyZWN0IiwiZmlsbCIsImZpbGxUZXh0IiwiY2lyIiwiZnJvbSIsIlZlY3RvcjJEIiwicm90YXRlIiwiY2lySW1nIiwiZGlmZiIsInBvc3REcmF3IiwidGljayIsInNwbGl0IiwidW5zaGlmdCIsInMiLCJqIiwiaW50cm8iLCJ0cmFkZXMiLCJsb2dvcyIsInBlb3BsZSIsInJhbmRvbSIsImQiLCJwdXNoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiciIsImNlaWwiLCJwcGwiLCJrIiwiY2FudmFzIiwiQ2FudmFzIiwibCIsIm9ianMiLCJkcmF3Q2FudmFzIiwiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJiYWxhbmNlQ29udHJvbGxlciIsIiRzY29wZSIsIiRyb3V0ZVBhcmFtcyIsInVzZXIiLCJ1c2VySWQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsIm1haW5Db250cm9sbGVyIiwicHJvZmlsZUNvbnRyb2xsZXIiLCIkd2luZG93IiwicGFzc3cxIiwicGFzc3cyIiwiaXNFbmFibGVkIiwic3VibWl0Rm9ybSIsImFsZXJ0IiwibG9jYXRpb24iLCJoYXNoIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxPQUFBQyxFQUFBQyxFQUFBQyxHQUNBQyxLQUFBQyxJQUFBLEtBQ0FELEtBQUFILE9BQUFBLEVBQ0FHLEtBQUFFLFNBQUFKLEVBQ0FFLEtBQUFHLFVBQUEsS0FDQUgsS0FBQUQsUUFBQUEsRUFDQUMsS0FBQUksV0FBQSxDQUNBLEtBQUEsR0FBQUMsR0FBQSxFQUFBQSxFQUFBTCxLQUFBRCxRQUFBTyxPQUFBRCxJQUNBTCxLQUFBSSxZQUFBSixLQUFBRCxRQUFBTSxHQUFBRSxnQkFBQVAsS0FBQUQsUUFBQU0sR0FBQUQsVUFFQUosTUFBQVEsSUFBQSxHQUFBLElBQUFSLEtBQUFJLFVBQ0EsSUFBQUssR0FBQVQsS0FDQVUsRUFBQSxHQUFBQyxNQUNBRCxHQUFBRSxJQUFBWixLQUFBSCxPQUNBYSxFQUFBRyxPQUFBLFdBQ0FKLEVBQUFSLElBQUFTLEdDZkEsUUFBQUksUUFBQUMsRUFBQWxCLEVBQUFVLEVBQUFTLEVBQUFDLEVBQUFDLEdBQ0FsQixLQUFBZSxLQUFBQSxFQUNBZixLQUFBQyxJQUFBLEtBQ0FELEtBQUFILE9BQUFBLEVBQ0FH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Q0FDLFdBQUEsc0JBRUFDLFdBQ0FDLFdBQUEsZUM1QkEsV0FDQSxZQUVBLElBQUFDLEdBQUEsU0FBQUMsRUFBQUMsR0FHQUQsRUFBQUUsUUFDQUYsRUFBQUUsS0FBQUMsT0FBQSxJQUNBSCxFQUFBRSxLQUFBRSxVQUFBLFNBQ0FKLEVBQUFFLEtBQUFHLFNBQUEsU0FLQWYsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLHFCQUFBLFNBQUEsZUFBQUcsT0NkQSxXQUNBLFlBRUEsSUFBQU8sR0FBQSxTQUFBTixHQUdBQSxFQUFBRSxRQUNBRixFQUFBRSxLQUFBQyxPQUFBLElBQ0FILEVBQUFFLEtBQUFFLFVBQUEsU0FDQUosRUFBQUUsS0FBQUcsU0FBQSxTQUtBZixTQUFBQyxPQUFBLE9BQUFLLFdBQUEsa0JBQUEsU0FBQVUsT0NkQSxXQUNBLFlBRUEsSUFBQUMsR0FBQSxTQUFBUCxFQUFBQyxFQUFBTyxHQUdBUixFQUFBRSxNQUNBRSxVQUFBLFNBQ0FDLFNBQUEsU0FDQUksT0FBQSxTQUNBQyxPQUFBLFVBR0FWLEVBQUFXLFVBQUEsV0FDQSxPQUFBLEdBR0FYLEVBQUFZLFdBQUEsU0FBQVYsR0FDQVcsTUFBQSxpQkFDQUwsRUFBQU0sU0FBQUMsS0FBQSxjQUlBekIsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLHFCQUFBLFNBQUEsZUFBQSxVQUFBVyIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gVHJhZGUoaW1nU3JjLCB2ZWN0b3IsIHRyYWRlcnMpIHtcbiAgICB0aGlzLmltZyA9IG51bGw7XG4gICAgdGhpcy5pbWdTcmMgPSBpbWdTcmM7XG4gICAgdGhpcy5zYXZlZFBvcyA9IHZlY3RvcjtcbiAgICB0aGlzLmFjdHVhbFBvcyA9IG51bGw7XG4gICAgdGhpcy50cmFkZXJzID0gdHJhZGVycztcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5wZXJjZW50YWdlICs9IHRoaXMudHJhZGVyc1tpXS50b3RhbFBlcmNlbnRhZ2UgKiB0aGlzLnRyYWRlcnNbaV0ucGVyY2VudGFnZTtcbiAgICB9XG4gICAgdGhpcy5yYWQgPSA1MCArICh0aGlzLnBlcmNlbnRhZ2UgKiAxMDApO1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHRodW1iSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGh1bWJJbWcuc3JjID0gdGhpcy5pbWdTcmM7XG4gICAgdGh1bWJJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1lLmltZyA9IHRodW1iSW1nO1xuICAgIH07XG59XG5cblRyYWRlLnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24oYykge1xuICAgIHZhciBwb3MgPSB0aGlzLmFjdHVhbFBvcztcbiAgICBwb3MgPSBwb3Muc3ViVmVjdG9yKGMub2Zmc2V0KTtcbiAgICBwb3MgPSBwb3Muc3ViVmVjdG9yKGMuY2VudGVyKTtcbiAgICBwb3MgPSBwb3MuZGl2KGMuc2NhbGUpO1xuICAgIHRoaXMuc2F2ZWRQb3MgPSBwb3M7XG4gICAgdmFyIGFuZ2xlID0gMTgwIC8gKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgIHRoaXMudHJhZGVyc1tpXS5jYWxjdWxhdGUoYy5zY2FsZSwgdGhpcy5yYWQsIGFscGhhLCB0aGlzLmFjdHVhbFBvcyk7XG4gICAgfVxufTtcblxuVHJhZGUucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5zYXZlZFBvcztcbiAgICBwb3MgPSBwb3MubXVsKGMuc2NhbGUpO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoYy5jZW50ZXIpO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoYy5vZmZzZXQpO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gcG9zO1xuICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICB0aGlzLnRyYWRlcnNbaV0uY2FsY3VsYXRlKGMuc2NhbGUsIHRoaXMucmFkLCBhbHBoYSwgcG9zKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUucHJlRHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmN0eC5zdHJva2VTdHlsZSA9IFwiIzJjM2U1MFwiO1xuICAgICAgICBjLmN0eC5saW5lV2lkdGggPSAwLjUgKiBjLnNjYWxlO1xuICAgICAgICBjLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdmFyIGNlbnRlciA9IGMuY2VudGVyLmFkZFZlY3RvcihjLm9mZnNldCk7XG4gICAgICAgIGMuY3R4Lm1vdmVUbyhjZW50ZXIueCwgY2VudGVyLnkpO1xuICAgICAgICBjLmN0eC5saW5lVG8odGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSk7XG4gICAgICAgIGMuY3R4LnN0cm9rZSgpO1xuICAgICAgICBjLmN0eC5jbG9zZVBhdGgoKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmNpckxvZ28odGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgdGhpcy5yYWQsIHRoaXMuaW1nKTtcbiAgICAgICAgdmFyIG92ZXJhbGwgPSAwO1xuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdCA9IHRoaXMudHJhZGVyc1tpXTtcbiAgICAgICAgICAgIG92ZXJhbGwgKz0gdC50b3RhbFBlcmNlbnRhZ2UgKiB0LnBlcmNlbnRhZ2UgKiB0LmRpZmZlcmVuY2U7XG4gICAgICAgICAgICB0LmRyYXcoYyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRleHQgPSBNYXRoLmZsb29yKG92ZXJhbGwgKiBjLnN0YXJ0aW5nQnVkZ2V0ICogMTAwKSAvIDEwMDtcbiAgICAgICAgdmFyIG9uZVByb21pbGxlID0gYy5zdGFydGluZ0J1ZGdldCAvIDEwMDA7XG4gICAgICAgIGlmKHRleHQgPCAtb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICB9IGVsc2UgaWYodGV4dCA+IG9uZVByb21pbGxlKSB7XG4gICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiMzNkI1REJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzJDM0U1MFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRleHQgPCAwKSB7XG4gICAgICAgICAgICB0ZXh0ID0gXCItIOKCrCBcIiArIE1hdGguYWJzKHRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dCA9IFwi4oKsIFwiICsgdGV4dDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2l6ZSA9IDEyICogYy5zY2FsZTtcbiAgICAgICAgaWYoc2l6ZSA+PSA4KSB7XG4gICAgICAgICAgICBjLmN0eC5mb250ID0gc2l6ZSArIFwicHQgU291cmNlU2Fuc1Byb1wiO1xuICAgICAgICAgICAgdmFyIHR4dFNpemUgPSBjLmN0eC5tZWFzdXJlVGV4dCh0ZXh0KS53aWR0aDtcbiAgICAgICAgICAgIGMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgYy5jdHgucmVjdCh0aGlzLmFjdHVhbFBvcy54IC0gKHR4dFNpemUgLyAyKSAtICgxMCAqIGMuc2NhbGUpLCB0aGlzLmFjdHVhbFBvcy55ICsgKCh0aGlzLnJhZCAqIGMuc2NhbGUpIC8gMikgLSAoc2l6ZSAvIDIpIC0gKDEwICogYy5zY2FsZSksIHR4dFNpemUgKyAoMjAgKiBjLnNjYWxlKSwgc2l6ZSArICgyMCAqIGMuc2NhbGUpKTtcbiAgICAgICAgICAgIGMuY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgYy5jdHguZmlsbCgpO1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjZmZmZmZmXCI7XG4gICAgICAgICAgICBjLmN0eC5maWxsVGV4dCh0ZXh0LCB0aGlzLmFjdHVhbFBvcy54IC0gKHR4dFNpemUgLyAyKSwgdGhpcy5hY3R1YWxQb3MueSArICgodGhpcy5yYWQgKiBjLnNjYWxlKSAvIDIpICsgKHNpemUgLyAyKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjLmNpcih0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55ICsgKCh0aGlzLnJhZCAqIGMuc2NhbGUpIC8gMiksICh0aGlzLnJhZCAqIGMuc2NhbGUgKiBNYXRoLmFicyhvdmVyYWxsKSAqIDEwKSArICh0aGlzLnJhZCAqIGMuc2NhbGUgKiAwLjEpKTtcbiAgICAgICAgfVxuICAgIH1cbn07IiwiZnVuY3Rpb24gVHJhZGVyKG5hbWUsIGltZ1NyYywgdG90YWxQZXJjZW50YWdlLCBkaWZmZXJlbmNlLCBjb21tZW50LCB0eXBlKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmltZyA9IG51bGw7XG4gICAgdGhpcy5pbWdTcmMgPSBpbWdTcmM7XG4gICAgdGhpcy50b3RhbFBlcmNlbnRhZ2UgPSB0b3RhbFBlcmNlbnRhZ2U7XG4gICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICB0aGlzLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gbnVsbDtcbiAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgdGh1bWJJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aHVtYkltZy5zcmMgPSB0aGlzLmltZ1NyYztcbiAgICB0aHVtYkltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbWUuaW1nID0gdGh1bWJJbWc7XG4gICAgfTtcbn1cblxuVHJhZGVyLnByb3RvdHlwZS5jYWxjdWxhdGUgPSBmdW5jdGlvbihzY2FsZSwgcmFkLCBhbHBoYSwgZnJvbSkge1xuICAgIHZhciBwb3MgPSBuZXcgVmVjdG9yMkQoMCwgMzApO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IobmV3IFZlY3RvcjJEKDAsIHJhZCkpO1xuICAgIHBvcyA9IHBvcy5tdWwoc2NhbGUpO1xuICAgIHBvcyA9IHBvcy5yb3RhdGUoYWxwaGEgLSA5MCk7XG4gICAgcG9zID0gcG9zLmFkZFZlY3Rvcihmcm9tKTtcbiAgICB0aGlzLmFjdHVhbFBvcyA9IHBvcztcbn07XG5cblRyYWRlci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGMpIHtcbiAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICBjLmNpckltZyh0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55LCAyNSwgdGhpcy5pbWcpO1xuICAgICAgICB2YXIgb25lUHJvbWlsbGUgPSBjLnN0YXJ0aW5nQnVkZ2V0IC8gMTAwMDtcbiAgICAgICAgdmFyIGRpZmYgPSBNYXRoLmZsb29yKGMuc3RhcnRpbmdCdWRnZXQgKiB0aGlzLnRvdGFsUGVyY2VudGFnZSAqIHRoaXMucGVyY2VudGFnZSAqIHRoaXMuZGlmZmVyZW5jZSAqIDEwMCkgLyAxMDA7XG4gICAgICAgIGlmKGRpZmYgPCAtb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICB9IGVsc2UgaWYoZGlmZiA+IG9uZVByb21pbGxlKSB7XG4gICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiMzNkI1REJcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzJDM0U1MFwiO1xuICAgICAgICB9XG4gICAgICAgIGMuY2lyKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnksIChNYXRoLmFicyh0aGlzLmRpZmZlcmVuY2UpICogMjApICsgNSk7XG4gICAgfVxufTtcblxuVHJhZGVyLnByb3RvdHlwZS5wb3N0RHJhdyA9IGZ1bmN0aW9uKGMsIHRpY2spIHtcbiAgICB2YXIgc2l6ZSA9IDEyICogdGljaztcbiAgICBjLmN0eC5mb250ID0gXCJib2xkIFwiICsgc2l6ZSArIFwicHQgU291cmNlU2Fuc1Byb1wiO1xuICAgIHZhciB0eHRTaXplID0gMDtcbiAgICB2YXIgdGV4dCA9IHRoaXMuY29tbWVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYodGhpcy50eXBlID09PSAwKSB7XG4gICAgICAgIHRleHQudW5zaGlmdChcInh4IGxvbmcgYXQg4oKsIHh4LHh4XCIpO1xuICAgIH0gZWxzZSBpZih0aGlzLnR5cGUgPT09IDEpIHtcbiAgICAgICAgdGV4dC51bnNoaWZ0KFwieHggc2hvcnQgYXQg4oKsIHh4LHh4XCIpO1xuICAgIH1cbiAgICB2YXIgZGlmZiA9IE1hdGguZmxvb3IoYy5zdGFydGluZ0J1ZGdldCAqIHRoaXMudG90YWxQZXJjZW50YWdlICogdGhpcy5wZXJjZW50YWdlICogdGhpcy5kaWZmZXJlbmNlICogMTAwKSAvIDEwMDtcbiAgICB0ZXh0LnVuc2hpZnQodGhpcy5uYW1lICsgXCJcXHDigqwgXCIgKyBNYXRoLmFicyhkaWZmKSk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHMgPSBjLmN0eC5tZWFzdXJlVGV4dCh0ZXh0W2ldKS53aWR0aDtcbiAgICAgICAgaWYodHh0U2l6ZSA8IHMpIHtcbiAgICAgICAgICAgIHR4dFNpemUgPSBzO1xuICAgICAgICB9XG4gICAgfVxuICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiI2ZmZmZmZlwiO1xuICAgIGMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIGMuY3R4LnJlY3QodGhpcy5hY3R1YWxQb3MueCArICgyNSAqIGMuc2NhbGUpLCB0aGlzLmFjdHVhbFBvcy55IC0gKHNpemUgKiB0ZXh0Lmxlbmd0aCkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIDEpICogMS4yKSAtICgyNSAqIGMuc2NhbGUpIC0gMjAsIHR4dFNpemUgKyAyMCwgKHNpemUgKiB0ZXh0Lmxlbmd0aCkgKyAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIDEpICogMS4yKSArIDIwKTtcbiAgICBjLmN0eC5jbG9zZVBhdGgoKTtcbiAgICBjLmN0eC5maWxsKCk7XG4gICAgZm9yKHZhciBqID0gMDsgaiA8IHRleHQubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYoaiA+IDApIHtcbiAgICAgICAgICAgIGMuY3R4LmZvbnQgPSBzaXplICsgXCJwdCBTb3VyY2VTYW5zUHJvXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoaiA9PT0gMSAmJiB0aGlzLnR5cGUgPT09IDApIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2UgaWYgKGogPT09IDEgJiYgdGhpcy50eXBlID09PSAxKSB7XG4gICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzJDM0U1MFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoaiA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIG9uZVByb21pbGxlID0gYy5zdGFydGluZ0J1ZGdldCAvIDEwMDA7XG4gICAgICAgICAgICB2YXIgaW50cm8gPSB0ZXh0W2pdLnNwbGl0KCdcXHAnKTtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxUZXh0KGludHJvWzBdLCB0aGlzLmFjdHVhbFBvcy54ICsgKDI1ICogYy5zY2FsZSkgKyAxMCwgdGhpcy5hY3R1YWxQb3MueSAtIChzaXplICogKHRleHQubGVuZ3RoIC0gaikpIC0gKHNpemUgKiAodGV4dC5sZW5ndGggLSAxKSAqIDEuMikrIChqICogMS4yICogc2l6ZSkgLSAoMjUgKiBjLnNjYWxlKSk7XG4gICAgICAgICAgICBpZihkaWZmIDwgLW9uZVByb21pbGxlKSB7XG4gICAgICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjRTc0QzNDXCI7XG4gICAgICAgICAgICAgICAgaW50cm9bMV0gPSBcIi0gXCIgKyBpbnRyb1sxXTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihkaWZmID4gb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiMzNkI1REJcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjLmN0eC5maWxsVGV4dChpbnRyb1sxXSwgdGhpcy5hY3R1YWxQb3MueCArICgyNSAqIGMuc2NhbGUpICsgMTAgKyB0eHRTaXplIC0gYy5jdHgubWVhc3VyZVRleHQoaW50cm9bMV0pLndpZHRoLCB0aGlzLmFjdHVhbFBvcy55IC0gKHNpemUgKiAodGV4dC5sZW5ndGggLSBqKSkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIDEpICogMS4yKSsgKGogKiAxLjIgKiBzaXplKSAtICgyNSAqIGMuc2NhbGUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxUZXh0KHRleHRbal0sIHRoaXMuYWN0dWFsUG9zLnggKyAoMjUgKiBjLnNjYWxlKSArIDEwLCB0aGlzLmFjdHVhbFBvcy55IC0gKHNpemUgKiAodGV4dC5sZW5ndGggLSBqKSkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIDEpICogMS4yKSsgKGogKiAxLjIgKiBzaXplKSAtICgyNSAqIGMuc2NhbGUpKTtcbiAgICAgICAgfVxuICAgIH1cbn07IiwidmFyIHRyYWRlcyA9IFtdO1xudmFyIHRyYWRlcnMgPSBbXTtcbnZhciBsb2dvcyA9IFtcImxvZ28wLnN2Z1wiLCBcImxvZ28xLnN2Z1wiLCBcImxvZ28yLnN2Z1wiLCBcImxvZ28zLnN2Z1wiLCBcImxvZ280LnN2Z1wiXTtcbnZhciBwZW9wbGUgPSBbW1wiQ3JhenkgSGVmZmVcIiwgXCJ0cmFkZXIwLmpwZ1wiXSwgW1wiTWFyaW5vIEhvc3Rpbm9cIiwgXCJ0cmFkZXIxLmpwZ1wiXSwgW1wiTmljb2xzaCBMYXZhbmRhXCIsIFwidHJhZGVyMi5qcGdcIl0sIFtcInhYcm9ia2U2OVh4XCIsIFwidHJhZGVyMy5qcGdcIl1dO1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgZm9yKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICB2YXIgdG90YWxQZXJjZW50YWdlID0gKE1hdGgucmFuZG9tKCkgKiAwLjE1KSArIDAuMTtcbiAgICAgICAgdmFyIGQgPSBNYXRoLnJhbmRvbSgpIC0gMC41O1xuICAgICAgICB2YXIgdHlwZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxICsgMSkpO1xuICAgICAgICB0cmFkZXJzLnB1c2gobmV3IFRyYWRlcihwZW9wbGVbal1bMF0sIFwiZGlzdC9pbWFnZXMvXCIgKyBwZW9wbGVbal1bMV0sIHRvdGFsUGVyY2VudGFnZSwgZCwgXCJUaGlzIGp1c3QgbG9va3MgZ29vZCFcXG5JIGNhbiBldmVuIHB1dCBhIHNlY29uZCBsaW5lIGhlcmVcXG5cXG5NdWx0aWxpbmUgc3BhY2VzIGFyZSBzdXBwb3J0ZWRcIiwgdHlwZSkpO1xuICAgIH1cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVyV2lkdGggLSAod2luZG93LmlubmVyV2lkdGggLyAyKSk7XG4gICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAtICgod2luZG93LmlubmVySGVpZ2h0IC0gNTApIC8gMikpO1xuICAgICAgICB2YXIgciA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogNCk7XG4gICAgICAgIHZhciBwcGwgPSBbXTtcbiAgICAgICAgZm9yKHZhciBrID0gMDsgayA8IHI7IGsrKykge1xuICAgICAgICAgICAgdmFyIHQgPSBuZXcgVHJhZGVyKHRyYWRlcnNba10ubmFtZSwgdHJhZGVyc1trXS5pbWdTcmMsIHRyYWRlcnNba10udG90YWxQZXJjZW50YWdlLCB0cmFkZXJzW2tdLmRpZmZlcmVuY2UsIHRyYWRlcnNba10uY29tbWVudCwgdHJhZGVyc1trXS50eXBlKTtcbiAgICAgICAgICAgIHQucGVyY2VudGFnZSA9IChNYXRoLnJhbmRvbSgpICogMC40KSArIDAuMTtcbiAgICAgICAgICAgIHBwbC5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWRlcy5wdXNoKG5ldyBUcmFkZShcImRpc3QvaW1hZ2VzL1wiICsgbG9nb3NbaV0sIG5ldyBWZWN0b3IyRCh4LCB5KSwgcHBsKSk7XG4gICAgfVxuICAgIHZhciBjYW52YXMgPSBuZXcgQ2FudmFzKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCwgXCJ0cmFkZXNcIiwgXCIjZWVlZWVlXCIsIHRyYWRlcyk7XG4gICAgZm9yKHZhciBsID0gMDsgbCA8IGNhbnZhcy5vYmpzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgIGNhbnZhcy5vYmpzW2xdLmNhbGN1bGF0ZShjYW52YXMpO1xuICAgIH1cbiAgICBjYW52YXMuZHJhd0NhbnZhcygpO1xufSkoKTsiLCIoZnVuY3Rpb24gKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW1wibmdSb3V0ZVwiXSk7XG5cbiAgICBhcHAuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvaG9tZVwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvaG9tZS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJtYWluQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvcHJvZmlsZS86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL3Byb2ZpbGUuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwicHJvZmlsZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2JhbGFuY2VIaXN0b3J5LzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvYmFsYW5jZUhpc3RvcnkuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYmFsYW5jZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2RlcG9zaXQvOmlkXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9kZXBvc2l0Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcImJhbGFuY2VDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi93aXRoZHJhdy86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL3dpdGhkcmF3Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcImJhbGFuY2VDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBcIi9ob21lXCJcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYmFsYW5jZUNvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRyb3V0ZVBhcmFtcyl7XG4gICAgICAgIC8vbmV3IGNvZGUgZ29lcyBoZXJlXG5cbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcbiAgICAgICAgJHNjb3BlLnVzZXIudXNlcklkID0gXCIxXCI7XG4gICAgICAgICRzY29wZS51c2VyLmZpcnN0TmFtZSA9IFwiTWFyaWpuXCI7XG4gICAgICAgICRzY29wZS51c2VyLmxhc3ROYW1lID0gXCJIb3N0ZW5cIjtcblxuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJiYWxhbmNlQ29udHJvbGxlclwiLCBbIFwiJHNjb3BlXCIsIFwiJHJvdXRlUGFyYW1zXCIsIGJhbGFuY2VDb250cm9sbGVyXSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBtYWluQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSl7XG4gICAgICAgIC8vbmV3IGNvZGUgZ29lcyBoZXJlXG5cbiAgICAgICAgJHNjb3BlLnVzZXIgPSB7fTtcbiAgICAgICAgJHNjb3BlLnVzZXIudXNlcklkID0gXCIxXCI7XG4gICAgICAgICRzY29wZS51c2VyLmZpcnN0TmFtZSA9IFwiTWFyaWpuXCI7XG4gICAgICAgICRzY29wZS51c2VyLmxhc3ROYW1lID0gXCJIb3N0ZW5cIjtcblxuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJtYWluQ29udHJvbGxlclwiLCBbIFwiJHNjb3BlXCIsIG1haW5Db250cm9sbGVyXSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBwcm9maWxlQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgJHJvdXRlUGFyYW1zLCAkd2luZG93KXtcbiAgICAgICAgLy9uZXcgY29kZSBnb2VzIGhlcmVcblxuICAgICAgICAkc2NvcGUudXNlciA9IHtcbiAgICAgICAgICAgIFwiZmlyc3ROYW1lXCI6IFwiTWFyaWpuXCIsXG4gICAgICAgICAgICBcImxhc3ROYW1lXCI6IFwiSG9zdGVuXCIsXG4gICAgICAgICAgICBcInBhc3N3MVwiOiBcIjEyMzQ1NlwiLFxuICAgICAgICAgICAgXCJwYXNzdzJcIjogXCIxMjM0NTZcIlxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pc0VuYWJsZWQgPSBmdW5jdGlvbiAoKXtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc3VibWl0Rm9ybSA9IGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiY2hhbmdlcyBzYXZlZFwiKTtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaGFzaCA9IFwiL2hvbWUuaHRtbFwiO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwicHJvZmlsZUNvbnRyb2xsZXJcIiwgWyBcIiRzY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcIiR3aW5kb3dcIiwgcHJvZmlsZUNvbnRyb2xsZXJdKTtcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
