function Trade(t,e,r){this.img=null,this.imgSrc=t,this.savedPos=e,this.actualPos=null,this.traders=r,this.percentage=0;for(var a=0;a<this.traders.length;a++)this.percentage+=this.traders[a].totalPercentage*this.traders[a].percentage;this.rad=50+100*this.percentage;var s=this,i=new Image;i.src=this.imgSrc,i.onload=function(){s.img=i}}function Trader(t,e,r,a){this.img=null,this.imgSrc=t,this.totalPercentage=e,this.percentage=0,this.difference=r,this.actualPos=null,this.comment=a;var s=this,i=new Image;i.src=this.imgSrc,i.onload=function(){s.img=i}}Trade.prototype.reverse=function(t){var e=this.actualPos;e=e.subVector(t.offset),e=e.subVector(t.center),e=e.div(t.scale),this.savedPos=e;for(var r=180/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,this.actualPos)}},Trade.prototype.calculate=function(t){var e=this.savedPos;e=e.mul(t.scale),e=e.addVector(t.center),e=e.addVector(t.offset),this.actualPos=e;for(var r=180/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,e)}},Trade.prototype.preDraw=function(t){if(null!==this.img){t.ctx.strokeStyle="#2c3e50",t.ctx.lineWidth=.5*t.scale,t.ctx.beginPath();var e=t.center.addVector(t.offset);t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(this.actualPos.x,this.actualPos.y),t.ctx.stroke(),t.ctx.closePath()}},Trade.prototype.draw=function(t){if(null!==this.img){t.cirLogo(this.actualPos.x,this.actualPos.y,this.rad,this.img);for(var e=0;e<this.traders.length;e++)this.traders[e].draw(t)}},Trader.prototype.calculate=function(t,e,r,a){var s=new Vector2D(0,30);s=s.addVector(new Vector2D(0,e)),s=s.mul(t),s=s.rotate(r-90),s=s.addVector(a),this.actualPos=s},Trader.prototype.draw=function(t){null!==this.img&&(t.cirImg(this.actualPos.x,this.actualPos.y,25,this.img),this.difference<-.1?t.ctx.fillStyle="#E74C3C":this.difference>.1?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.ctx.fillStyle=t.cir(this.actualPos.x,this.actualPos.y,15*Math.abs(this.difference)+5))};var trades=[],traders=[],logos=["logo0.png","logo1.svg","logo2.jpg","logo3.png","logo4.png"],people=["trader0.jpg","trader1.jpg","trader2.jpg","trader3.jpg"];!function(){for(var t=0;4>t;t++){var e=.15*Math.random()+.1;traders.push(new Trader("dist/images/"+people[t],e))}for(var r=0;5>r;r++){for(var a=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),s=Math.floor(Math.random()*(window.innerHeight-100)-(window.innerHeight-100)/2),i=Math.floor(3*Math.random()+1),o=Math.random()-.5,n=[],l=0;i>l;l++){var c=new Trader(traders[l].imgSrc,traders[l].totalPercentage,o,"This just looks good!");c.percentage=.4*Math.random()+.1,n.push(c)}trades.push(new Trade("dist/images/"+logos[r],new Vector2D(a,s),n))}for(var h=new Canvas(window.innerWidth,window.innerHeight-100,"trades","#eeeeee",trades),d=0;d<h.objs.length;d++)h.objs[d].calculate(h);h.drawCanvas()}(),function(){"use strict";var t=angular.module("app",["ngRoute"]);t.config(function(t){t.when("/",{templateUrl:"index.html",controller:"headerController"}).otherwise({redirectTo:"index.html"})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwidHJhZGVyLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiVHJhZGUiLCJpbWdTcmMiLCJ2ZWN0b3IiLCJ0cmFkZXJzIiwidGhpcyIsImltZyIsInNhdmVkUG9zIiwiYWN0dWFsUG9zIiwicGVyY2VudGFnZSIsImkiLCJsZW5ndGgiLCJ0b3RhbFBlcmNlbnRhZ2UiLCJyYWQiLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJUcmFkZXIiLCJkaWZmZXJlbmNlIiwiY29tbWVudCIsInByb3RvdHlwZSIsInJldmVyc2UiLCJjIiwicG9zIiwic3ViVmVjdG9yIiwib2Zmc2V0IiwiY2VudGVyIiwiZGl2Iiwic2NhbGUiLCJhbmdsZSIsImFscGhhIiwiY2FsY3VsYXRlIiwibXVsIiwiYWRkVmVjdG9yIiwicHJlRHJhdyIsImN0eCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwieCIsInkiLCJsaW5lVG8iLCJzdHJva2UiLCJjbG9zZVBhdGgiLCJkcmF3IiwiY2lyTG9nbyIsImZyb20iLCJWZWN0b3IyRCIsInJvdGF0ZSIsImNpckltZyIsImZpbGxTdHlsZSIsImNpciIsIk1hdGgiLCJhYnMiLCJ0cmFkZXMiLCJsb2dvcyIsInBlb3BsZSIsImoiLCJyYW5kb20iLCJwdXNoIiwiZmxvb3IiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyIiwiZCIsInBwbCIsImsiLCJ0IiwiY2FudmFzIiwiQ2FudmFzIiwibCIsIm9ianMiLCJkcmF3Q2FudmFzIiwiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iXSwibWFwcGluZ3MiOiJBQUFBLFFBQUFBLE9BQUFDLEVBQUFDLEVBQUFDLEdBQ0FDLEtBQUFD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QUEsSUFBQSxDQU1BLElBQUEsR0FMQWdDLEdBQUFhLEtBQUFRLE1BQUFSLEtBQUFNLFNBQUFHLE9BQUFDLFdBQUFELE9BQUFDLFdBQUEsR0FDQXRCLEVBQUFZLEtBQUFRLE1BQUFSLEtBQUFNLFVBQUFHLE9BQUFFLFlBQUEsTUFBQUYsT0FBQUUsWUFBQSxLQUFBLEdBQ0FDLEVBQUFaLEtBQUFRLE1BQUEsRUFBQVIsS0FBQU0sU0FBQSxHQUNBTyxFQUFBYixLQUFBTSxTQUFBLEdBQ0FRLEtBQ0FDLEVBQUEsRUFBQUgsRUFBQUcsRUFBQUEsSUFBQSxDQUNBLEdBQUFDLEdBQUEsR0FBQXBELFFBQUFmLFFBQUFrRSxHQUFBcEUsT0FBQUUsUUFBQWtFLEdBQUExRCxnQkFBQXdELEVBQUEsd0JBQ0FHLEdBQUE5RCxXQUFBLEdBQUE4QyxLQUFBTSxTQUFBLEdBQ0FRLEVBQUFQLEtBQUFTLEdBRUFkLE9BQUFLLEtBQUEsR0FBQTdELE9BQUEsZUFBQXlELE1BQUFoRCxHQUFBLEdBQUF3QyxVQUFBUixFQUFBQyxHQUFBMEIsSUFHQSxJQUFBLEdBREFHLEdBQUEsR0FBQUMsUUFBQVQsT0FBQUMsV0FBQUQsT0FBQUUsWUFBQSxJQUFBLFNBQUEsVUFBQVQsUUFDQWlCLEVBQUEsRUFBQUEsRUFBQUYsRUFBQUcsS0FBQWhFLE9BQUErRCxJQUNBRixFQUFBRyxLQUFBRCxHQUFBekMsVUFBQXVDLEVBRUFBLEdBQUFJLGdCQzNCQSxXQUNBLFlBRUEsSUFBQUMsR0FBQUMsUUFBQUMsT0FBQSxPQUFBLFdBRUFGLEdBQUFHLE9BQUEsU0FBQUMsR0FDQUEsRUFDQUMsS0FBQSxLQUNBQyxZQUFBLGFBQ0FDLFdBQUEscUJBRUFDLFdBQ0FDLFdBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIFRyYWRlKGltZ1NyYywgdmVjdG9yLCB0cmFkZXJzKSB7XG4gICAgdGhpcy5pbWcgPSBudWxsO1xuICAgIHRoaXMuaW1nU3JjID0gaW1nU3JjO1xuICAgIHRoaXMuc2F2ZWRQb3MgPSB2ZWN0b3I7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBudWxsO1xuICAgIHRoaXMudHJhZGVycyA9IHRyYWRlcnM7XG4gICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMucGVyY2VudGFnZSArPSB0aGlzLnRyYWRlcnNbaV0udG90YWxQZXJjZW50YWdlICogdGhpcy50cmFkZXJzW2ldLnBlcmNlbnRhZ2U7XG4gICAgfVxuICAgIHRoaXMucmFkID0gNTAgKyAodGhpcy5wZXJjZW50YWdlICogMTAwKTtcbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciB0aHVtYkltZyA9IG5ldyBJbWFnZSgpO1xuICAgIHRodW1iSW1nLnNyYyA9IHRoaXMuaW1nU3JjO1xuICAgIHRodW1iSW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtZS5pbWcgPSB0aHVtYkltZztcbiAgICB9O1xufVxuXG5UcmFkZS5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5hY3R1YWxQb3M7XG4gICAgcG9zID0gcG9zLnN1YlZlY3RvcihjLm9mZnNldCk7XG4gICAgcG9zID0gcG9zLnN1YlZlY3RvcihjLmNlbnRlcik7XG4gICAgcG9zID0gcG9zLmRpdihjLnNjYWxlKTtcbiAgICB0aGlzLnNhdmVkUG9zID0gcG9zO1xuICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICB0aGlzLnRyYWRlcnNbaV0uY2FsY3VsYXRlKGMuc2NhbGUsIHRoaXMucmFkLCBhbHBoYSwgdGhpcy5hY3R1YWxQb3MpO1xuICAgIH1cbn07XG5cblRyYWRlLnByb3RvdHlwZS5jYWxjdWxhdGUgPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuc2F2ZWRQb3M7XG4gICAgcG9zID0gcG9zLm11bChjLnNjYWxlKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKGMuY2VudGVyKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKGMub2Zmc2V0KTtcbiAgICB0aGlzLmFjdHVhbFBvcyA9IHBvcztcbiAgICB2YXIgYW5nbGUgPSAxODAgLyAodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGFscGhhID0gYW5nbGUgKiAoaSArIDEgLSAoKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKSAvIDIpKTtcbiAgICAgICAgdGhpcy50cmFkZXJzW2ldLmNhbGN1bGF0ZShjLnNjYWxlLCB0aGlzLnJhZCwgYWxwaGEsIHBvcyk7XG4gICAgfVxufTtcblxuVHJhZGUucHJvdG90eXBlLnByZURyYXcgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYodGhpcy5pbWcgIT09IG51bGwpIHtcbiAgICAgICAgYy5jdHguc3Ryb2tlU3R5bGUgPSBcIiMyYzNlNTBcIjtcbiAgICAgICAgYy5jdHgubGluZVdpZHRoID0gMC41ICogYy5zY2FsZTtcbiAgICAgICAgYy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSBjLmNlbnRlci5hZGRWZWN0b3IoYy5vZmZzZXQpO1xuICAgICAgICBjLmN0eC5tb3ZlVG8oY2VudGVyLngsIGNlbnRlci55KTtcbiAgICAgICAgYy5jdHgubGluZVRvKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnkpO1xuICAgICAgICBjLmN0eC5zdHJva2UoKTtcbiAgICAgICAgYy5jdHguY2xvc2VQYXRoKCk7XG4gICAgfVxufTtcblxuVHJhZGUucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYodGhpcy5pbWcgIT09IG51bGwpIHtcbiAgICAgICAgYy5jaXJMb2dvKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnksIHRoaXMucmFkLCB0aGlzLmltZyk7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5kcmF3KGMpO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJmdW5jdGlvbiBUcmFkZXIoaW1nU3JjLCB0b3RhbFBlcmNlbnRhZ2UsIGRpZmZlcmVuY2UsIGNvbW1lbnQpIHtcbiAgICB0aGlzLmltZyA9IG51bGw7XG4gICAgdGhpcy5pbWdTcmMgPSBpbWdTcmM7XG4gICAgdGhpcy50b3RhbFBlcmNlbnRhZ2UgPSB0b3RhbFBlcmNlbnRhZ2U7XG4gICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICB0aGlzLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gbnVsbDtcbiAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHRodW1iSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGh1bWJJbWcuc3JjID0gdGhpcy5pbWdTcmM7XG4gICAgdGh1bWJJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1lLmltZyA9IHRodW1iSW1nO1xuICAgIH07XG59XG5cblRyYWRlci5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oc2NhbGUsIHJhZCwgYWxwaGEsIGZyb20pIHtcbiAgICB2YXIgcG9zID0gbmV3IFZlY3RvcjJEKDAsIDMwKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKG5ldyBWZWN0b3IyRCgwLCByYWQpKTtcbiAgICBwb3MgPSBwb3MubXVsKHNjYWxlKTtcbiAgICBwb3MgPSBwb3Mucm90YXRlKGFscGhhIC0gOTApO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoZnJvbSk7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBwb3M7XG59O1xuXG5UcmFkZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYodGhpcy5pbWcgIT09IG51bGwpIHtcbiAgICAgICAgYy5jaXJJbWcodGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgMjUsIHRoaXMuaW1nKTtcbiAgICAgICAgaWYodGhpcy5kaWZmZXJlbmNlIDwgLTAuMSkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmRpZmZlcmVuY2UgPiAwLjEpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cbiAgICAgICAgYy5jdHguZmlsbFN0eWxlID1cbiAgICAgICAgYy5jaXIodGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgKE1hdGguYWJzKHRoaXMuZGlmZmVyZW5jZSkgKiAxNSkgKyA1KTtcbiAgICB9XG59OyIsInZhciB0cmFkZXMgPSBbXTtcbnZhciB0cmFkZXJzID0gW107XG52YXIgbG9nb3MgPSBbXCJsb2dvMC5wbmdcIiwgXCJsb2dvMS5zdmdcIiwgXCJsb2dvMi5qcGdcIiwgXCJsb2dvMy5wbmdcIiwgXCJsb2dvNC5wbmdcIl07XG52YXIgcGVvcGxlID0gW1widHJhZGVyMC5qcGdcIiwgXCJ0cmFkZXIxLmpwZ1wiLCBcInRyYWRlcjIuanBnXCIsIFwidHJhZGVyMy5qcGdcIl07XG5cbihmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuMTUpICsgMC4xO1xuICAgICAgICB0cmFkZXJzLnB1c2gobmV3IFRyYWRlcihcImRpc3QvaW1hZ2VzL1wiICsgcGVvcGxlW2pdLCB0b3RhbFBlcmNlbnRhZ2UpKTtcbiAgICB9XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lcldpZHRoIC0gKHdpbmRvdy5pbm5lcldpZHRoIC8gMikpO1xuICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMDApIC0gKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSAxMDApIC8gMikpO1xuICAgICAgICB2YXIgciA9IE1hdGguZmxvb3IoKE1hdGgucmFuZG9tKCkgKiAzKSArIDEpO1xuICAgICAgICB2YXIgZCA9IE1hdGgucmFuZG9tKCkgLSAwLjU7XG4gICAgICAgIHZhciBwcGwgPSBbXTtcbiAgICAgICAgZm9yKHZhciBrID0gMDsgayA8IHI7IGsrKykge1xuICAgICAgICAgICAgdmFyIHQgPSBuZXcgVHJhZGVyKHRyYWRlcnNba10uaW1nU3JjLCB0cmFkZXJzW2tdLnRvdGFsUGVyY2VudGFnZSwgZCwgXCJUaGlzIGp1c3QgbG9va3MgZ29vZCFcIik7XG4gICAgICAgICAgICB0LnBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuNCkgKyAwLjE7XG4gICAgICAgICAgICBwcGwucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICB0cmFkZXMucHVzaChuZXcgVHJhZGUoXCJkaXN0L2ltYWdlcy9cIiArIGxvZ29zW2ldLCBuZXcgVmVjdG9yMkQoeCwgeSksIHBwbCkpO1xuICAgIH1cbiAgICB2YXIgY2FudmFzID0gbmV3IENhbnZhcyh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0IC0gMTAwLCBcInRyYWRlc1wiLCBcIiNlZWVlZWVcIiwgdHJhZGVzKTtcbiAgICBmb3IodmFyIGwgPSAwOyBsIDwgY2FudmFzLm9ianMubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgY2FudmFzLm9ianNbbF0uY2FsY3VsYXRlKGNhbnZhcyk7XG4gICAgfVxuICAgIGNhbnZhcy5kcmF3Q2FudmFzKCk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXCJuZ1JvdXRlXCJdKTtcblxuICAgIGFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbihcIi9cIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImluZGV4Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnaGVhZGVyQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBcImluZGV4Lmh0bWxcIlxuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
