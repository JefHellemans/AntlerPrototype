function Trade(t,e,r){this.img=null,this.imgSrc=t,this.savedPos=e,this.actualPos=null,this.traders=r,this.percentage=0;for(var a=0;a<this.traders.length;a++)this.percentage+=this.traders[a].totalPercentage*this.traders[a].percentage;this.rad=50+100*this.percentage;var s=this,o=new Image;o.src=this.imgSrc,o.onload=function(){s.img=o}}function Trader(t,e,r,a){this.img=null,this.imgSrc=t,this.totalPercentage=e,this.percentage=0,this.difference=r,this.actualPos=null,this.comment=a;var s=this,o=new Image;o.src=this.imgSrc,o.onload=function(){s.img=o}}Trade.prototype.reverse=function(t){var e=this.actualPos;e=e.subVector(t.offset),e=e.subVector(t.center),e=e.div(t.scale),this.savedPos=e;for(var r=180/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,this.actualPos)}},Trade.prototype.calculate=function(t){var e=this.savedPos;e=e.mul(t.scale),e=e.addVector(t.center),e=e.addVector(t.offset),this.actualPos=e;for(var r=180/(this.traders.length+1),a=0;a<this.traders.length;a++){var s=r*(a+1-(this.traders.length+1)/2);this.traders[a].calculate(t.scale,this.rad,s,e)}},Trade.prototype.preDraw=function(t){if(null!==this.img){t.ctx.strokeStyle="#2c3e50",t.ctx.lineWidth=.5*t.scale,t.ctx.beginPath();var e=t.center.addVector(t.offset);t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(this.actualPos.x,this.actualPos.y),t.ctx.stroke(),t.ctx.closePath()}},Trade.prototype.draw=function(t){if(null!==this.img){t.cirLogo(this.actualPos.x,this.actualPos.y,this.rad,this.img);for(var e=0;e<this.traders.length;e++)this.traders[e].draw(t)}},Trader.prototype.calculate=function(t,e,r,a){var s=new Vector2D(0,30);s=s.addVector(new Vector2D(0,e)),s=s.mul(t),s=s.rotate(r-90),s=s.addVector(a),this.actualPos=s},Trader.prototype.draw=function(t){null!==this.img&&(t.cirImg(this.actualPos.x,this.actualPos.y,25,this.img),this.difference<-.1?t.ctx.fillStyle="#E74C3C":this.difference>.1?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.ctx.fillStyle=t.cir(this.actualPos.x,this.actualPos.y,20*Math.abs(this.difference)+5))},Trader.prototype.postDraw=function(t,e){var r=12*e;t.ctx.font=r+"pt SourceSansPro";var a=t.ctx.measureText(this.comment).width;t.ctx.fillStyle="#ffffff",t.ctx.beginPath(),t.ctx.rect(this.actualPos.x+25*t.scale,this.actualPos.y-r-25*t.scale-20,a+20,r+20),t.ctx.closePath(),t.ctx.fill(),t.ctx.fillStyle="#2C3E50",t.ctx.fillText(this.comment,this.actualPos.x+25*t.scale+10,this.actualPos.y-r-25*t.scale)};var trades=[],traders=[],logos=["logo0.png","logo1.svg","logo2.jpg","logo3.png","logo4.png"],people=["trader0.jpg","trader1.jpg","trader2.jpg","trader3.jpg"];!function(){for(var t=0;4>t;t++){var e=.15*Math.random()+.1;traders.push(new Trader("dist/images/"+people[t],e))}for(var r=0;5>r;r++){for(var a=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),s=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2),o=Math.floor(3*Math.random()+1),i=[],l=0;o>l;l++){var c=Math.random()-.5,n=new Trader(traders[l].imgSrc,traders[l].totalPercentage,c,"This just looks good!");n.percentage=.4*Math.random()+.1,i.push(n)}trades.push(new Trade("dist/images/"+logos[r],new Vector2D(a,s),i))}for(var h=new Canvas(window.innerWidth,window.innerHeight-50,"trades","#eeeeee",trades),d=0;d<h.objs.length;d++)h.objs[d].calculate(h);h.drawCanvas()}(),function(){"use strict";var t=angular.module("app",["ngRoute"]);t.config(function(t){t.when("/home",{templateUrl:"pages/home.html",controller:"mainController"}).when("/profile/:id",{templateUrl:"pages/profile.html",controller:"profileController"}).otherwise({redirectTo:"/home"})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwidHJhZGVyLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiVHJhZGUiLCJpbWdTcmMiLCJ2ZWN0b3IiLCJ0cmFkZXJzIiwidGhpcyIsImltZyIsInNhdmVkUG9zIiwiYWN0dWFsUG9zIiwicGVyY2VudGFnZSIsImkiLCJsZW5ndGgiLCJ0b3RhbFBlcmNlbnRhZ2UiLCJyYWQiLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJUcmFkZXIiLCJkaWZmZXJlbmNlIiwiY29tbWVudCIsInByb3RvdHlwZSIsInJldmVyc2UiLCJjIiwicG9zIiwic3ViVmVjdG9yIiwib2Zmc2V0IiwiY2VudGVyIiwiZGl2Iiwic2NhbGUiLCJhbmdsZSIsImFscGhhIiwiY2FsY3VsYXRlIiwibXVsIiwiYWRkVmVjdG9yIiwicHJlRHJhdyIsImN0eCIsInN0cm9rZVN0eWxlIiwibGluZVdpZHRoIiwiYmVnaW5QYXRoIiwibW92ZVRvIiwieCIsInkiLCJsaW5lVG8iLCJzdHJva2UiLCJjbG9zZVBhdGgiLCJkcmF3IiwiY2lyTG9nbyIsImZyb20iLCJWZWN0b3IyRCIsInJvdGF0ZSIsImNpckltZyIsImZpbGxTdHlsZSIsImNpciIsIk1hdGgiLCJhYnMiLCJwb3N0RHJhdyIsInRpY2siLCJzaXplIiwiZm9udCIsInR4dFNpemUiLCJtZWFzdXJlVGV4dCIsIndpZHRoIiwicmVjdCIsImZpbGwiLCJmaWxsVGV4dCIsInRyYWRlcyIsImxvZ29zIiwicGVvcGxlIiwiaiIsInJhbmRvbSIsInB1c2giLCJmbG9vciIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJpbm5lckhlaWdodCIsInIiLCJwcGwiLCJrIiwiZCIsInQiLCJjYW52YXMiLCJDYW52YXMiLCJsIiwib2JqcyIsImRyYXdDYW52YXMiLCJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJj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LE9BQUFFLFFBQUEyRSxHQUFBbkUsZ0JBQUFvRSxFQUFBLHdCQUNBQyxHQUFBeEUsV0FBQSxHQUFBOEMsS0FBQWdCLFNBQUEsR0FDQU8sRUFBQU4sS0FBQVMsR0FFQWQsT0FBQUssS0FBQSxHQUFBdkUsT0FBQSxlQUFBbUUsTUFBQTFELEdBQUEsR0FBQXdDLFVBQUFSLEVBQUFDLEdBQUFtQyxJQUdBLElBQUEsR0FEQUksR0FBQSxHQUFBQyxRQUFBVCxPQUFBQyxXQUFBRCxPQUFBRSxZQUFBLEdBQUEsU0FBQSxVQUFBVCxRQUNBaUIsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxLQUFBMUUsT0FBQXlFLElBQ0FGLEVBQUFHLEtBQUFELEdBQUFuRCxVQUFBaUQsRUFFQUEsR0FBQUksZ0JDM0JBLFdBQ0EsWUFFQSxJQUFBQyxHQUFBQyxRQUFBQyxPQUFBLE9BQUEsV0FFQUYsR0FBQUcsT0FBQSxTQUFBQyxHQUNBQSxFQUNBQyxLQUFBLFNBQ0FDLFlBQUEsa0JBQ0FDLFdBQUEsbUJBRUFGLEtBQUEsZ0JBQ0FDLFlBQUEscUJBQ0FDLFdBQUEsc0JBRUFDLFdBQ0FDLFdBQUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIFRyYWRlKGltZ1NyYywgdmVjdG9yLCB0cmFkZXJzKSB7XG4gICAgdGhpcy5pbWcgPSBudWxsO1xuICAgIHRoaXMuaW1nU3JjID0gaW1nU3JjO1xuICAgIHRoaXMuc2F2ZWRQb3MgPSB2ZWN0b3I7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBudWxsO1xuICAgIHRoaXMudHJhZGVycyA9IHRyYWRlcnM7XG4gICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMucGVyY2VudGFnZSArPSB0aGlzLnRyYWRlcnNbaV0udG90YWxQZXJjZW50YWdlICogdGhpcy50cmFkZXJzW2ldLnBlcmNlbnRhZ2U7XG4gICAgfVxuICAgIHRoaXMucmFkID0gNTAgKyAodGhpcy5wZXJjZW50YWdlICogMTAwKTtcbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciB0aHVtYkltZyA9IG5ldyBJbWFnZSgpO1xuICAgIHRodW1iSW1nLnNyYyA9IHRoaXMuaW1nU3JjO1xuICAgIHRodW1iSW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtZS5pbWcgPSB0aHVtYkltZztcbiAgICB9O1xufVxuXG5UcmFkZS5wcm90b3R5cGUucmV2ZXJzZSA9IGZ1bmN0aW9uKGMpIHtcbiAgICB2YXIgcG9zID0gdGhpcy5hY3R1YWxQb3M7XG4gICAgcG9zID0gcG9zLnN1YlZlY3RvcihjLm9mZnNldCk7XG4gICAgcG9zID0gcG9zLnN1YlZlY3RvcihjLmNlbnRlcik7XG4gICAgcG9zID0gcG9zLmRpdihjLnNjYWxlKTtcbiAgICB0aGlzLnNhdmVkUG9zID0gcG9zO1xuICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICB0aGlzLnRyYWRlcnNbaV0uY2FsY3VsYXRlKGMuc2NhbGUsIHRoaXMucmFkLCBhbHBoYSwgdGhpcy5hY3R1YWxQb3MpO1xuICAgIH1cbn07XG5cblRyYWRlLnByb3RvdHlwZS5jYWxjdWxhdGUgPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuc2F2ZWRQb3M7XG4gICAgcG9zID0gcG9zLm11bChjLnNjYWxlKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKGMuY2VudGVyKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKGMub2Zmc2V0KTtcbiAgICB0aGlzLmFjdHVhbFBvcyA9IHBvcztcbiAgICB2YXIgYW5nbGUgPSAxODAgLyAodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGFscGhhID0gYW5nbGUgKiAoaSArIDEgLSAoKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKSAvIDIpKTtcbiAgICAgICAgdGhpcy50cmFkZXJzW2ldLmNhbGN1bGF0ZShjLnNjYWxlLCB0aGlzLnJhZCwgYWxwaGEsIHBvcyk7XG4gICAgfVxufTtcblxuVHJhZGUucHJvdG90eXBlLnByZURyYXcgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYodGhpcy5pbWcgIT09IG51bGwpIHtcbiAgICAgICAgYy5jdHguc3Ryb2tlU3R5bGUgPSBcIiMyYzNlNTBcIjtcbiAgICAgICAgYy5jdHgubGluZVdpZHRoID0gMC41ICogYy5zY2FsZTtcbiAgICAgICAgYy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHZhciBjZW50ZXIgPSBjLmNlbnRlci5hZGRWZWN0b3IoYy5vZmZzZXQpO1xuICAgICAgICBjLmN0eC5tb3ZlVG8oY2VudGVyLngsIGNlbnRlci55KTtcbiAgICAgICAgYy5jdHgubGluZVRvKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnkpO1xuICAgICAgICBjLmN0eC5zdHJva2UoKTtcbiAgICAgICAgYy5jdHguY2xvc2VQYXRoKCk7XG4gICAgfVxufTtcblxuVHJhZGUucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYodGhpcy5pbWcgIT09IG51bGwpIHtcbiAgICAgICAgYy5jaXJMb2dvKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnksIHRoaXMucmFkLCB0aGlzLmltZyk7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5kcmF3KGMpO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJmdW5jdGlvbiBUcmFkZXIoaW1nU3JjLCB0b3RhbFBlcmNlbnRhZ2UsIGRpZmZlcmVuY2UsIGNvbW1lbnQpIHtcbiAgICB0aGlzLmltZyA9IG51bGw7XG4gICAgdGhpcy5pbWdTcmMgPSBpbWdTcmM7XG4gICAgdGhpcy50b3RhbFBlcmNlbnRhZ2UgPSB0b3RhbFBlcmNlbnRhZ2U7XG4gICAgdGhpcy5wZXJjZW50YWdlID0gMDtcbiAgICB0aGlzLmRpZmZlcmVuY2UgPSBkaWZmZXJlbmNlO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gbnVsbDtcbiAgICB0aGlzLmNvbW1lbnQgPSBjb21tZW50O1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdmFyIHRodW1iSW1nID0gbmV3IEltYWdlKCk7XG4gICAgdGh1bWJJbWcuc3JjID0gdGhpcy5pbWdTcmM7XG4gICAgdGh1bWJJbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1lLmltZyA9IHRodW1iSW1nO1xuICAgIH07XG59XG5cblRyYWRlci5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oc2NhbGUsIHJhZCwgYWxwaGEsIGZyb20pIHtcbiAgICB2YXIgcG9zID0gbmV3IFZlY3RvcjJEKDAsIDMwKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKG5ldyBWZWN0b3IyRCgwLCByYWQpKTtcbiAgICBwb3MgPSBwb3MubXVsKHNjYWxlKTtcbiAgICBwb3MgPSBwb3Mucm90YXRlKGFscGhhIC0gOTApO1xuICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IoZnJvbSk7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBwb3M7XG59O1xuXG5UcmFkZXIucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihjKSB7XG4gICAgaWYodGhpcy5pbWcgIT09IG51bGwpIHtcbiAgICAgICAgYy5jaXJJbWcodGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgMjUsIHRoaXMuaW1nKTtcbiAgICAgICAgaWYodGhpcy5kaWZmZXJlbmNlIDwgLTAuMSkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIH0gZWxzZSBpZih0aGlzLmRpZmZlcmVuY2UgPiAwLjEpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cbiAgICAgICAgYy5jdHguZmlsbFN0eWxlID1cbiAgICAgICAgYy5jaXIodGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgKE1hdGguYWJzKHRoaXMuZGlmZmVyZW5jZSkgKiAyMCkgKyA1KTtcbiAgICB9XG59O1xuXG5UcmFkZXIucHJvdG90eXBlLnBvc3REcmF3ID0gZnVuY3Rpb24oYywgdGljaykge1xuICAgIHZhciBzaXplID0gMTIgKiB0aWNrO1xuICAgIGMuY3R4LmZvbnQgPSBzaXplICsgXCJwdCBTb3VyY2VTYW5zUHJvXCI7XG4gICAgdmFyIHR4dFNpemUgPSBjLmN0eC5tZWFzdXJlVGV4dCh0aGlzLmNvbW1lbnQpLndpZHRoO1xuICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiI2ZmZmZmZlwiO1xuICAgIGMuY3R4LmJlZ2luUGF0aCgpO1xuICAgIGMuY3R4LnJlY3QodGhpcy5hY3R1YWxQb3MueCArICgyNSAqIGMuc2NhbGUpLCB0aGlzLmFjdHVhbFBvcy55IC0gc2l6ZSAtICgyNSAqIGMuc2NhbGUpIC0gMjAsIHR4dFNpemUgKyAyMCwgc2l6ZSArIDIwKTtcbiAgICBjLmN0eC5jbG9zZVBhdGgoKTtcbiAgICBjLmN0eC5maWxsKCk7XG4gICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgYy5jdHguZmlsbFRleHQodGhpcy5jb21tZW50LCB0aGlzLmFjdHVhbFBvcy54ICsgKDI1ICogYy5zY2FsZSkgKyAxMCwgdGhpcy5hY3R1YWxQb3MueSAtIHNpemUgLSAoMjUgKiBjLnNjYWxlKSk7XG59OyIsInZhciB0cmFkZXMgPSBbXTtcbnZhciB0cmFkZXJzID0gW107XG52YXIgbG9nb3MgPSBbXCJsb2dvMC5wbmdcIiwgXCJsb2dvMS5zdmdcIiwgXCJsb2dvMi5qcGdcIiwgXCJsb2dvMy5wbmdcIiwgXCJsb2dvNC5wbmdcIl07XG52YXIgcGVvcGxlID0gW1widHJhZGVyMC5qcGdcIiwgXCJ0cmFkZXIxLmpwZ1wiLCBcInRyYWRlcjIuanBnXCIsIFwidHJhZGVyMy5qcGdcIl07XG5cbihmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuMTUpICsgMC4xO1xuICAgICAgICB0cmFkZXJzLnB1c2gobmV3IFRyYWRlcihcImRpc3QvaW1hZ2VzL1wiICsgcGVvcGxlW2pdLCB0b3RhbFBlcmNlbnRhZ2UpKTtcbiAgICB9XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lcldpZHRoIC0gKHdpbmRvdy5pbm5lcldpZHRoIC8gMikpO1xuICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCkgLSAoKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAvIDIpKTtcbiAgICAgICAgdmFyIHIgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMykgKyAxKTtcbiAgICAgICAgdmFyIHBwbCA9IFtdO1xuICAgICAgICBmb3IodmFyIGsgPSAwOyBrIDwgcjsgaysrKSB7XG4gICAgICAgICAgICB2YXIgZCA9IE1hdGgucmFuZG9tKCkgLSAwLjU7XG4gICAgICAgICAgICB2YXIgdCA9IG5ldyBUcmFkZXIodHJhZGVyc1trXS5pbWdTcmMsIHRyYWRlcnNba10udG90YWxQZXJjZW50YWdlLCBkLCBcIlRoaXMganVzdCBsb29rcyBnb29kIVwiKTtcbiAgICAgICAgICAgIHQucGVyY2VudGFnZSA9IChNYXRoLnJhbmRvbSgpICogMC40KSArIDAuMTtcbiAgICAgICAgICAgIHBwbC5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHRyYWRlcy5wdXNoKG5ldyBUcmFkZShcImRpc3QvaW1hZ2VzL1wiICsgbG9nb3NbaV0sIG5ldyBWZWN0b3IyRCh4LCB5KSwgcHBsKSk7XG4gICAgfVxuICAgIHZhciBjYW52YXMgPSBuZXcgQ2FudmFzKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCwgXCJ0cmFkZXNcIiwgXCIjZWVlZWVlXCIsIHRyYWRlcyk7XG4gICAgZm9yKHZhciBsID0gMDsgbCA8IGNhbnZhcy5vYmpzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgIGNhbnZhcy5vYmpzW2xdLmNhbGN1bGF0ZShjYW52YXMpO1xuICAgIH1cbiAgICBjYW52YXMuZHJhd0NhbnZhcygpO1xufSkoKTsiLCIoZnVuY3Rpb24gKCl7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW1wibmdSb3V0ZVwiXSk7XG5cbiAgICBhcHAuY29uZmlnKGZ1bmN0aW9uICgkcm91dGVQcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvaG9tZVwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvaG9tZS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJtYWluQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvcHJvZmlsZS86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL3Byb2ZpbGUuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwicHJvZmlsZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL2hvbWVcIlxuICAgICAgICAgICAgfSk7XG4gICAgfSk7XG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
