function Trade(t,e,a){this.img=null,this.imgSrc=t,this.savedPos=e,this.actualPos=null,this.traders=a,this.percentage=0;for(var r=0;r<this.traders.length;r++)this.percentage+=this.traders[r].totalPercentage*this.traders[r].percentage;this.rad=50+100*this.percentage;var s=this,l=new Image;l.src=this.imgSrc,l.onload=function(){s.img=l}}function Trader(t,e,a,r,s,l){this.name=t,this.img=null,this.imgSrc=e,this.totalPercentage=a,this.percentage=0,this.difference=r,this.actualPos=null,this.comment=s,this.type=l;var i=this,o=new Image;o.src=this.imgSrc,o.onload=function(){i.img=o}}Trade.prototype.reverse=function(t){var e=this.actualPos;e=e.subVector(t.offset),e=e.subVector(t.center),e=e.div(t.scale),this.savedPos=e;for(var a=180/(this.traders.length+1),r=0;r<this.traders.length;r++){var s=a*(r+1-(this.traders.length+1)/2);this.traders[r].calculate(t.scale,this.rad,s,this.actualPos)}},Trade.prototype.calculate=function(t){var e=this.savedPos;e=e.mul(t.scale),e=e.addVector(t.center),e=e.addVector(t.offset),this.actualPos=e;for(var a=180/(this.traders.length+1),r=0;r<this.traders.length;r++){var s=a*(r+1-(this.traders.length+1)/2);this.traders[r].calculate(t.scale,this.rad,s,e)}},Trade.prototype.preDraw=function(t){if(null!==this.img){t.ctx.strokeStyle="#2c3e50",t.ctx.lineWidth=.5*t.scale,t.ctx.beginPath();var e=t.center.addVector(t.offset);t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(this.actualPos.x,this.actualPos.y),t.ctx.stroke(),t.ctx.closePath()}},Trade.prototype.draw=function(t){if(null!==this.img){t.cirLogo(this.actualPos.x,this.actualPos.y,this.rad,this.img);for(var e=0,a=0;a<this.traders.length;a++){var r=this.traders[a];e+=r.totalPercentage*r.percentage*r.difference,r.draw(t)}var s=Math.floor(e*t.startingBudget*100)/100,l=t.startingBudget/1e3;-l>s?t.ctx.fillStyle="#E74C3C":s>l?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",s=0>s?"- € "+Math.abs(s):"€ "+s;var i=12*t.scale;if(i>=8){t.ctx.font=i+"pt SourceSansPro";var o=t.ctx.measureText(s).width;t.ctx.beginPath(),t.ctx.rect(this.actualPos.x-o/2-10*t.scale,this.actualPos.y+this.rad*t.scale/2-i/2-10*t.scale,o+20*t.scale,i+20*t.scale),t.ctx.closePath(),t.ctx.fill(),t.ctx.fillStyle="#ffffff",t.ctx.fillText(s,this.actualPos.x-o/2,this.actualPos.y+this.rad*t.scale/2+i/2)}else t.cir(this.actualPos.x,this.actualPos.y+this.rad*t.scale/2,this.rad*t.scale*Math.abs(e)*10+this.rad*t.scale*.1)}},Trader.prototype.calculate=function(t,e,a,r){var s=new Vector2D(0,30);s=s.addVector(new Vector2D(0,e)),s=s.mul(t),s=s.rotate(a-90),s=s.addVector(r),this.actualPos=s},Trader.prototype.draw=function(t){if(null!==this.img){t.cirImg(this.actualPos.x,this.actualPos.y,25,this.img);var e=t.startingBudget/1e3,a=Math.floor(t.startingBudget*this.totalPercentage*this.percentage*this.difference*100)/100;-e>a?t.ctx.fillStyle="#E74C3C":a>e?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.cir(this.actualPos.x,this.actualPos.y,20*Math.abs(this.difference)+5)}},Trader.prototype.postDraw=function(t,e){var a=12*e;t.ctx.font="bold "+a+"pt SourceSansPro";var r=0,s=this.comment.split("\n");0===this.type?s.unshift("xx long at € xx,xx"):1===this.type&&s.unshift("xx short at € xx,xx");var l=Math.floor(t.startingBudget*this.totalPercentage*this.percentage*this.difference*100)/100;s.unshift(this.name+"p€ "+Math.abs(l));for(var i=0;i<s.length;i++){var o=t.ctx.measureText(s[i]).width;o>r&&(r=o)}t.ctx.fillStyle="#ffffff",t.ctx.beginPath(),t.ctx.rect(this.actualPos.x+25*t.scale,this.actualPos.y-a*s.length-a*(s.length-1)*1.2-25*t.scale-20,r+20,a*s.length+a*(s.length-1)*1.2+20),t.ctx.closePath(),t.ctx.fill();for(var c=0;c<s.length;c++)if(c>0&&(t.ctx.font=a+"pt SourceSansPro"),1===c&&0===this.type?t.ctx.fillStyle="#36B5DB":1===c&&1===this.type?t.ctx.fillStyle="#E74C3C":t.ctx.fillStyle="#2C3E50",0===c){var n=t.startingBudget/1e3,h=s[c].split("p");t.ctx.fillText(h[0],this.actualPos.x+25*t.scale+10,this.actualPos.y-a*(s.length-c)-a*(s.length-1)*1.2+1.2*c*a-25*t.scale),-n>l?(t.ctx.fillStyle="#E74C3C",h[1]="- "+h[1]):l>n?t.ctx.fillStyle="#36B5DB":t.ctx.fillStyle="#2C3E50",t.ctx.fillText(h[1],this.actualPos.x+25*t.scale+10+r-t.ctx.measureText(h[1]).width,this.actualPos.y-a*(s.length-c)-a*(s.length-1)*1.2+1.2*c*a-25*t.scale)}else t.ctx.fillText(s[c],this.actualPos.x+25*t.scale+10,this.actualPos.y-a*(s.length-c)-a*(s.length-1)*1.2+1.2*c*a-25*t.scale)};var trades=[],traders=[],logos=["logo0.svg","logo1.svg","logo2.svg","logo3.svg","logo4.svg"],people=[["Crazy Heffe","trader0.jpg"],["Marino Hostino","trader1.jpg"],["Nicolsh Lavanda","trader2.jpg"],["xXrobke69Xx","trader3.jpg"]];!function(){for(var t=0;4>t;t++){var e=.15*Math.random()+.1,a=Math.random()-.5,r=Math.floor(2*Math.random());traders.push(new Trader(people[t][0],"dist/images/"+people[t][1],e,a,"This just looks good!\nI can even put a second line here\n\nMultiline spaces are supported",r))}for(var s=0;5>s;s++){for(var l=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),i=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2),o=Math.ceil(4*Math.random()),c=[],n=0;o>n;n++){var h=new Trader(traders[n].name,traders[n].imgSrc,traders[n].totalPercentage,traders[n].difference,traders[n].comment,traders[n].type);h.percentage=.4*Math.random()+.1,c.push(h)}trades.push(new Trade("dist/images/"+logos[s],new Vector2D(l,i),c))}for(var d=new Canvas(window.innerWidth,window.innerHeight-50,"trades","#eeeeee",trades),g=0;g<d.objs.length;g++)d.objs[g].calculate(d);d.drawCanvas()}(),function(){"use strict";var t=angular.module("app",["ngRoute"]);t.config(function(t,e){t.when("/home",{templateUrl:"pages/home.html",controller:"mainController"}).when("/profile/:id",{templateUrl:"pages/profile.html",controller:"profileController"}).when("/balanceHistory/:id",{templateUrl:"pages/balanceHistory.html",controller:"balanceController"}).when("/deposit/:id",{templateUrl:"pages/deposit.html",controller:"balanceController"}).when("/withdraw/:id",{templateUrl:"pages/withdraw.html",controller:"balanceController"}).otherwise({redirectTo:"/home"})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlLmpzIiwidHJhZGVyLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiVHJhZGUiLCJpbWdTcmMiLCJ2ZWN0b3IiLCJ0cmFkZXJzIiwidGhpcyIsImltZyIsInNhdmVkUG9zIiwiYWN0dWFsUG9zIiwicGVyY2VudGFnZSIsImkiLCJsZW5ndGgiLCJ0b3RhbFBlcmNlbnRhZ2UiLCJyYWQiLCJtZSIsInRodW1iSW1nIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJUcmFkZXIiLCJuYW1lIiwiZGlmZmVyZW5jZSIsImNvbW1lbnQiLCJ0eXBlIiwicHJvdG90eXBlIiwicmV2ZXJzZSIsImMiLCJwb3MiLCJzdWJWZWN0b3IiLCJvZmZzZXQiLCJjZW50ZXIiLCJkaXYiLCJzY2FsZSIsImFuZ2xlIiwiYWxwaGEiLCJjYWxjdWxhdGUiLCJtdWwiLCJhZGRWZWN0b3IiLCJwcmVEcmF3IiwiY3R4Iiwic3Ryb2tlU3R5bGUiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJ4IiwieSIsImxpbmVUbyIsInN0cm9rZSIsImNsb3NlUGF0aCIsImRyYXciLCJjaXJMb2dvIiwib3ZlcmFsbCIsInQiLCJ0ZXh0IiwiTWF0aCIsImZsb29yIiwic3RhcnRpbmdCdWRnZXQiLCJvbmVQcm9taWxsZSIsImZpbGxTdHlsZSIsImFicyIsInNpemUiLCJmb250IiwidHh0U2l6ZSIsIm1lYXN1cmVUZXh0Iiwid2lkdGgiLCJyZWN0IiwiZmlsbCIsImZpbGxUZXh0IiwiY2lyIiwiZnJvbSIsIlZlY3RvcjJEIiwicm90YXRlIiwiY2lySW1nIiwiZGlmZiIsInBvc3REcmF3IiwidGljayIsInNwbGl0IiwidW5zaGlmdCIsInMiLCJqIiwiaW50cm8iLCJ0cmFkZXMiLCJsb2dvcyIsInBlb3BsZSIsInJhbmRvbSIsImQiLCJwdXNoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiciIsImNlaWwiLCJwcGwiLCJrIiwiY2FudmFzIiwiQ2FudmFzIiwibCIsIm9ianMiLCJkcmF3Q2FudmFzIiwiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBQUEsT0FBQUMsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQUMsSUFBQSxLQUNBRCxLQUFBSCxPQUFBQSxFQUNBRyxLQUFBRSxTQUFBSixFQUNBRSxLQUFBRyxVQUFBLEtBQ0FILEtBQUFELFFBQUFBLEVBQ0FDLEtBQUFJLFdBQUEsQ0FDQSxLQUFBLEdBQUFDLEdBQUEsRUFBQUEsRUFBQUwsS0FBQUQsUUFBQU8sT0FBQUQsSUFDQUwsS0FBQUksWUFBQUosS0FBQUQsUUFBQU0sR0FBQUUsZ0JBQUFQLEtBQUFELFFBQUFNLEdBQUFELFVBRUFKLE1BQUFRLElBQUEsR0FBQSxJQUFBUixLQUFBSSxVQUNBLElBQUFLLEdBQUFULEtBQ0FVLEVBQUEsR0FBQUMsTUFDQUQsR0FBQUUsSUFBQVosS0FBQUgsT0FDQWEsRUFBQUcsT0FBQSxXQUNBSixFQUFBUixJQUFBUyxHQ2ZBLFFBQUFJLFFBQUFDLEVBQUFsQixFQUFBVSxFQUFBUyxFQUFBQyxFQUFBQyxHQUNBbEIsS0FBQWUsS0FBQUEsRUFDQWYsS0FBQUMsSUFBQSxLQUNBRCxLQUFBSCxPQUFBQSxFQUNBRyxLQUFBTyxnQkFBQUEsRUFDQVAsS0FBQUksV0FBQSxFQUNBSixLQUFBZ0IsV0FBQUEsRUFDQWhCLEtBQUFHLFVBQUEsS0FDQUgsS0FBQWlCLFFBQUFBLEVBQ0FqQixLQUFBa0IsS0FBQUEsQ0FDQSxJQUFBVCxHQUFBVCxLQUNBVSxFQUFBLEdBQUFDLE1BQ0FELEdBQUFFLElBQUFaLEtBQUFILE9BQ0FhLEVBQUFHLE9BQUEsV0FDQUosRUFBQVIsSUFBQVMsR0RLQWQsTUFBQXVCLFVBQUFDLFFBQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFB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ZixRQUFBeUYsR0FBQXpFLEtBQUFoQixRQUFBeUYsR0FBQTNGLE9BQUFFLFFBQUF5RixHQUFBakYsZ0JBQUFSLFFBQUF5RixHQUFBeEUsV0FBQWpCLFFBQUF5RixHQUFBdkUsUUFBQWxCLFFBQUF5RixHQUFBdEUsS0FDQTZCLEdBQUEzQyxXQUFBLEdBQUE2QyxLQUFBOEIsU0FBQSxHQUNBUSxFQUFBTixLQUFBbEMsR0FFQTZCLE9BQUFLLEtBQUEsR0FBQXJGLE9BQUEsZUFBQWlGLE1BQUF4RSxHQUFBLEdBQUE0RCxVQUFBMUIsRUFBQUMsR0FBQStDLElBR0EsSUFBQSxHQURBRSxHQUFBLEdBQUFDLFFBQUFSLE9BQUFDLFdBQUFELE9BQUFFLFlBQUEsR0FBQSxTQUFBLFVBQUFSLFFBQ0FlLEVBQUEsRUFBQUEsRUFBQUYsRUFBQUcsS0FBQXRGLE9BQUFxRixJQUNBRixFQUFBRyxLQUFBRCxHQUFBN0QsVUFBQTJELEVBRUFBLEdBQUFJLGdCQzVCQSxXQUNBLFlBRUEsSUFBQUMsR0FBQUMsUUFBQUMsT0FBQSxPQUFBLFdBRUFGLEdBQUFHLE9BQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFDQUUsS0FBQSxTQUNBQyxZQUFBLGtCQUNBQyxXQUFBLG1CQUVBRixLQUFBLGdCQUNBQyxZQUFBLHFCQUNBQyxXQUFBLHNCQUVBRixLQUFBLHVCQUNBQyxZQUFBLDRCQUNBQyxXQUFBLHNCQUVBRixLQUFBLGdCQUNBQyxZQUFBLHFCQUNBQyxXQUFBLHNCQUVBRixLQUFBLGlCQUNBQyxZQUFBLHNCQUNBQyxXQUFBLHNCQUVBQyxXQUNBQyxXQUFBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBUcmFkZShpbWdTcmMsIHZlY3RvciwgdHJhZGVycykge1xuICAgIHRoaXMuaW1nID0gbnVsbDtcbiAgICB0aGlzLmltZ1NyYyA9IGltZ1NyYztcbiAgICB0aGlzLnNhdmVkUG9zID0gdmVjdG9yO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gbnVsbDtcbiAgICB0aGlzLnRyYWRlcnMgPSB0cmFkZXJzO1xuICAgIHRoaXMucGVyY2VudGFnZSA9IDA7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMudHJhZGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnBlcmNlbnRhZ2UgKz0gdGhpcy50cmFkZXJzW2ldLnRvdGFsUGVyY2VudGFnZSAqIHRoaXMudHJhZGVyc1tpXS5wZXJjZW50YWdlO1xuICAgIH1cbiAgICB0aGlzLnJhZCA9IDUwICsgKHRoaXMucGVyY2VudGFnZSAqIDEwMCk7XG4gICAgdmFyIG1lID0gdGhpcztcbiAgICB2YXIgdGh1bWJJbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aHVtYkltZy5zcmMgPSB0aGlzLmltZ1NyYztcbiAgICB0aHVtYkltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbWUuaW1nID0gdGh1bWJJbWc7XG4gICAgfTtcbn1cblxuVHJhZGUucHJvdG90eXBlLnJldmVyc2UgPSBmdW5jdGlvbihjKSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuYWN0dWFsUG9zO1xuICAgIHBvcyA9IHBvcy5zdWJWZWN0b3IoYy5vZmZzZXQpO1xuICAgIHBvcyA9IHBvcy5zdWJWZWN0b3IoYy5jZW50ZXIpO1xuICAgIHBvcyA9IHBvcy5kaXYoYy5zY2FsZSk7XG4gICAgdGhpcy5zYXZlZFBvcyA9IHBvcztcbiAgICB2YXIgYW5nbGUgPSAxODAgLyAodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGFscGhhID0gYW5nbGUgKiAoaSArIDEgLSAoKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKSAvIDIpKTtcbiAgICAgICAgdGhpcy50cmFkZXJzW2ldLmNhbGN1bGF0ZShjLnNjYWxlLCB0aGlzLnJhZCwgYWxwaGEsIHRoaXMuYWN0dWFsUG9zKTtcbiAgICB9XG59O1xuXG5UcmFkZS5wcm90b3R5cGUuY2FsY3VsYXRlID0gZnVuY3Rpb24oYykge1xuICAgIHZhciBwb3MgPSB0aGlzLnNhdmVkUG9zO1xuICAgIHBvcyA9IHBvcy5tdWwoYy5zY2FsZSk7XG4gICAgcG9zID0gcG9zLmFkZFZlY3RvcihjLmNlbnRlcik7XG4gICAgcG9zID0gcG9zLmFkZFZlY3RvcihjLm9mZnNldCk7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBwb3M7XG4gICAgdmFyIGFuZ2xlID0gMTgwIC8gKHRoaXMudHJhZGVycy5sZW5ndGggKyAxKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgIHRoaXMudHJhZGVyc1tpXS5jYWxjdWxhdGUoYy5zY2FsZSwgdGhpcy5yYWQsIGFscGhhLCBwb3MpO1xuICAgIH1cbn07XG5cblRyYWRlLnByb3RvdHlwZS5wcmVEcmF3ID0gZnVuY3Rpb24oYykge1xuICAgIGlmKHRoaXMuaW1nICE9PSBudWxsKSB7XG4gICAgICAgIGMuY3R4LnN0cm9rZVN0eWxlID0gXCIjMmMzZTUwXCI7XG4gICAgICAgIGMuY3R4LmxpbmVXaWR0aCA9IDAuNSAqIGMuc2NhbGU7XG4gICAgICAgIGMuY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICB2YXIgY2VudGVyID0gYy5jZW50ZXIuYWRkVmVjdG9yKGMub2Zmc2V0KTtcbiAgICAgICAgYy5jdHgubW92ZVRvKGNlbnRlci54LCBjZW50ZXIueSk7XG4gICAgICAgIGMuY3R4LmxpbmVUbyh0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55KTtcbiAgICAgICAgYy5jdHguc3Ryb2tlKCk7XG4gICAgICAgIGMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIH1cbn07XG5cblRyYWRlLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oYykge1xuICAgIGlmKHRoaXMuaW1nICE9PSBudWxsKSB7XG4gICAgICAgIGMuY2lyTG9nbyh0aGlzLmFjdHVhbFBvcy54LCB0aGlzLmFjdHVhbFBvcy55LCB0aGlzLnJhZCwgdGhpcy5pbWcpO1xuICAgICAgICB2YXIgb3ZlcmFsbCA9IDA7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgb3ZlcmFsbCArPSB0LnRvdGFsUGVyY2VudGFnZSAqIHQucGVyY2VudGFnZSAqIHQuZGlmZmVyZW5jZTtcbiAgICAgICAgICAgIHQuZHJhdyhjKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4dCA9IE1hdGguZmxvb3Iob3ZlcmFsbCAqIGMuc3RhcnRpbmdCdWRnZXQgKiAxMDApIC8gMTAwO1xuICAgICAgICB2YXIgb25lUHJvbWlsbGUgPSBjLnN0YXJ0aW5nQnVkZ2V0IC8gMTAwMDtcbiAgICAgICAgaWYodGV4dCA8IC1vbmVQcm9taWxsZSkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIH0gZWxzZSBpZih0ZXh0ID4gb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYodGV4dCA8IDApIHtcbiAgICAgICAgICAgIHRleHQgPSBcIi0g4oKsIFwiICsgTWF0aC5hYnModGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0ZXh0ID0gXCLigqwgXCIgKyB0ZXh0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaXplID0gMTIgKiBjLnNjYWxlO1xuICAgICAgICBpZihzaXplID49IDgpIHtcbiAgICAgICAgICAgIGMuY3R4LmZvbnQgPSBzaXplICsgXCJwdCBTb3VyY2VTYW5zUHJvXCI7XG4gICAgICAgICAgICB2YXIgdHh0U2l6ZSA9IGMuY3R4Lm1lYXN1cmVUZXh0KHRleHQpLndpZHRoO1xuICAgICAgICAgICAgYy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjLmN0eC5yZWN0KHRoaXMuYWN0dWFsUG9zLnggLSAodHh0U2l6ZSAvIDIpIC0gKDEwICogYy5zY2FsZSksIHRoaXMuYWN0dWFsUG9zLnkgKyAoKHRoaXMucmFkICogYy5zY2FsZSkgLyAyKSAtIChzaXplIC8gMikgLSAoMTAgKiBjLnNjYWxlKSwgdHh0U2l6ZSArICgyMCAqIGMuc2NhbGUpLCBzaXplICsgKDIwICogYy5zY2FsZSkpO1xuICAgICAgICAgICAgYy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICBjLmN0eC5maWxsKCk7XG4gICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiNmZmZmZmZcIjtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxUZXh0KHRleHQsIHRoaXMuYWN0dWFsUG9zLnggLSAodHh0U2l6ZSAvIDIpLCB0aGlzLmFjdHVhbFBvcy55ICsgKCh0aGlzLnJhZCAqIGMuc2NhbGUpIC8gMikgKyAoc2l6ZSAvIDIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGMuY2lyKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnkgKyAoKHRoaXMucmFkICogYy5zY2FsZSkgLyAyKSwgKHRoaXMucmFkICogYy5zY2FsZSAqIE1hdGguYWJzKG92ZXJhbGwpICogMTApICsgKHRoaXMucmFkICogYy5zY2FsZSAqIDAuMSkpO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJmdW5jdGlvbiBUcmFkZXIobmFtZSwgaW1nU3JjLCB0b3RhbFBlcmNlbnRhZ2UsIGRpZmZlcmVuY2UsIGNvbW1lbnQsIHR5cGUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaW1nID0gbnVsbDtcbiAgICB0aGlzLmltZ1NyYyA9IGltZ1NyYztcbiAgICB0aGlzLnRvdGFsUGVyY2VudGFnZSA9IHRvdGFsUGVyY2VudGFnZTtcbiAgICB0aGlzLnBlcmNlbnRhZ2UgPSAwO1xuICAgIHRoaXMuZGlmZmVyZW5jZSA9IGRpZmZlcmVuY2U7XG4gICAgdGhpcy5hY3R1YWxQb3MgPSBudWxsO1xuICAgIHRoaXMuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHZhciB0aHVtYkltZyA9IG5ldyBJbWFnZSgpO1xuICAgIHRodW1iSW1nLnNyYyA9IHRoaXMuaW1nU3JjO1xuICAgIHRodW1iSW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtZS5pbWcgPSB0aHVtYkltZztcbiAgICB9O1xufVxuXG5UcmFkZXIucHJvdG90eXBlLmNhbGN1bGF0ZSA9IGZ1bmN0aW9uKHNjYWxlLCByYWQsIGFscGhhLCBmcm9tKSB7XG4gICAgdmFyIHBvcyA9IG5ldyBWZWN0b3IyRCgwLCAzMCk7XG4gICAgcG9zID0gcG9zLmFkZFZlY3RvcihuZXcgVmVjdG9yMkQoMCwgcmFkKSk7XG4gICAgcG9zID0gcG9zLm11bChzY2FsZSk7XG4gICAgcG9zID0gcG9zLnJvdGF0ZShhbHBoYSAtIDkwKTtcbiAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKGZyb20pO1xuICAgIHRoaXMuYWN0dWFsUG9zID0gcG9zO1xufTtcblxuVHJhZGVyLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oYykge1xuICAgIGlmKHRoaXMuaW1nICE9PSBudWxsKSB7XG4gICAgICAgIGMuY2lySW1nKHRoaXMuYWN0dWFsUG9zLngsIHRoaXMuYWN0dWFsUG9zLnksIDI1LCB0aGlzLmltZyk7XG4gICAgICAgIHZhciBvbmVQcm9taWxsZSA9IGMuc3RhcnRpbmdCdWRnZXQgLyAxMDAwO1xuICAgICAgICB2YXIgZGlmZiA9IE1hdGguZmxvb3IoYy5zdGFydGluZ0J1ZGdldCAqIHRoaXMudG90YWxQZXJjZW50YWdlICogdGhpcy5wZXJjZW50YWdlICogdGhpcy5kaWZmZXJlbmNlICogMTAwKSAvIDEwMDtcbiAgICAgICAgaWYoZGlmZiA8IC1vbmVQcm9taWxsZSkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjRTc0QzNDXCI7XG4gICAgICAgIH0gZWxzZSBpZihkaWZmID4gb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cbiAgICAgICAgYy5jaXIodGhpcy5hY3R1YWxQb3MueCwgdGhpcy5hY3R1YWxQb3MueSwgKE1hdGguYWJzKHRoaXMuZGlmZmVyZW5jZSkgKiAyMCkgKyA1KTtcbiAgICB9XG59O1xuXG5UcmFkZXIucHJvdG90eXBlLnBvc3REcmF3ID0gZnVuY3Rpb24oYywgdGljaykge1xuICAgIHZhciBzaXplID0gMTIgKiB0aWNrO1xuICAgIGMuY3R4LmZvbnQgPSBcImJvbGQgXCIgKyBzaXplICsgXCJwdCBTb3VyY2VTYW5zUHJvXCI7XG4gICAgdmFyIHR4dFNpemUgPSAwO1xuICAgIHZhciB0ZXh0ID0gdGhpcy5jb21tZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZih0aGlzLnR5cGUgPT09IDApIHtcbiAgICAgICAgdGV4dC51bnNoaWZ0KFwieHggbG9uZyBhdCDigqwgeHgseHhcIik7XG4gICAgfSBlbHNlIGlmKHRoaXMudHlwZSA9PT0gMSkge1xuICAgICAgICB0ZXh0LnVuc2hpZnQoXCJ4eCBzaG9ydCBhdCDigqwgeHgseHhcIik7XG4gICAgfVxuICAgIHZhciBkaWZmID0gTWF0aC5mbG9vcihjLnN0YXJ0aW5nQnVkZ2V0ICogdGhpcy50b3RhbFBlcmNlbnRhZ2UgKiB0aGlzLnBlcmNlbnRhZ2UgKiB0aGlzLmRpZmZlcmVuY2UgKiAxMDApIC8gMTAwO1xuICAgIHRleHQudW5zaGlmdCh0aGlzLm5hbWUgKyBcIlxccOKCrCBcIiArIE1hdGguYWJzKGRpZmYpKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgcyA9IGMuY3R4Lm1lYXN1cmVUZXh0KHRleHRbaV0pLndpZHRoO1xuICAgICAgICBpZih0eHRTaXplIDwgcykge1xuICAgICAgICAgICAgdHh0U2l6ZSA9IHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYy5jdHguZmlsbFN0eWxlID0gXCIjZmZmZmZmXCI7XG4gICAgYy5jdHguYmVnaW5QYXRoKCk7XG4gICAgYy5jdHgucmVjdCh0aGlzLmFjdHVhbFBvcy54ICsgKDI1ICogYy5zY2FsZSksIHRoaXMuYWN0dWFsUG9zLnkgLSAoc2l6ZSAqIHRleHQubGVuZ3RoKSAtIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpIC0gKDI1ICogYy5zY2FsZSkgLSAyMCwgdHh0U2l6ZSArIDIwLCAoc2l6ZSAqIHRleHQubGVuZ3RoKSArIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpICsgMjApO1xuICAgIGMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIGMuY3R4LmZpbGwoKTtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgdGV4dC5sZW5ndGg7IGorKykge1xuICAgICAgICBpZihqID4gMCkge1xuICAgICAgICAgICAgYy5jdHguZm9udCA9IHNpemUgKyBcInB0IFNvdXJjZVNhbnNQcm9cIjtcbiAgICAgICAgfVxuICAgICAgICBpZihqID09PSAxICYmIHRoaXMudHlwZSA9PT0gMCkge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMzZCNURCXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaiA9PT0gMSAmJiB0aGlzLnR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiI0U3NEMzQ1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFN0eWxlID0gXCIjMkMzRTUwXCI7XG4gICAgICAgIH1cblxuICAgICAgICBpZihqID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgb25lUHJvbWlsbGUgPSBjLnN0YXJ0aW5nQnVkZ2V0IC8gMTAwMDtcbiAgICAgICAgICAgIHZhciBpbnRybyA9IHRleHRbal0uc3BsaXQoJ1xccCcpO1xuICAgICAgICAgICAgYy5jdHguZmlsbFRleHQoaW50cm9bMF0sIHRoaXMuYWN0dWFsUG9zLnggKyAoMjUgKiBjLnNjYWxlKSArIDEwLCB0aGlzLmFjdHVhbFBvcy55IC0gKHNpemUgKiAodGV4dC5sZW5ndGggLSBqKSkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIDEpICogMS4yKSsgKGogKiAxLjIgKiBzaXplKSAtICgyNSAqIGMuc2NhbGUpKTtcbiAgICAgICAgICAgIGlmKGRpZmYgPCAtb25lUHJvbWlsbGUpIHtcbiAgICAgICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiNFNzRDM0NcIjtcbiAgICAgICAgICAgICAgICBpbnRyb1sxXSA9IFwiLSBcIiArIGludHJvWzFdO1xuICAgICAgICAgICAgfSBlbHNlIGlmKGRpZmYgPiBvbmVQcm9taWxsZSkge1xuICAgICAgICAgICAgICAgIGMuY3R4LmZpbGxTdHlsZSA9IFwiIzM2QjVEQlwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjLmN0eC5maWxsU3R5bGUgPSBcIiMyQzNFNTBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGMuY3R4LmZpbGxUZXh0KGludHJvWzFdLCB0aGlzLmFjdHVhbFBvcy54ICsgKDI1ICogYy5zY2FsZSkgKyAxMCArIHR4dFNpemUgLSBjLmN0eC5tZWFzdXJlVGV4dChpbnRyb1sxXSkud2lkdGgsIHRoaXMuYWN0dWFsUG9zLnkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIGopKSAtIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpKyAoaiAqIDEuMiAqIHNpemUpIC0gKDI1ICogYy5zY2FsZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYy5jdHguZmlsbFRleHQodGV4dFtqXSwgdGhpcy5hY3R1YWxQb3MueCArICgyNSAqIGMuc2NhbGUpICsgMTAsIHRoaXMuYWN0dWFsUG9zLnkgLSAoc2l6ZSAqICh0ZXh0Lmxlbmd0aCAtIGopKSAtIChzaXplICogKHRleHQubGVuZ3RoIC0gMSkgKiAxLjIpKyAoaiAqIDEuMiAqIHNpemUpIC0gKDI1ICogYy5zY2FsZSkpO1xuICAgICAgICB9XG4gICAgfVxufTsiLCJ2YXIgdHJhZGVzID0gW107XG52YXIgdHJhZGVycyA9IFtdO1xudmFyIGxvZ29zID0gW1wibG9nbzAuc3ZnXCIsIFwibG9nbzEuc3ZnXCIsIFwibG9nbzIuc3ZnXCIsIFwibG9nbzMuc3ZnXCIsIFwibG9nbzQuc3ZnXCJdO1xudmFyIHBlb3BsZSA9IFtbXCJDcmF6eSBIZWZmZVwiLCBcInRyYWRlcjAuanBnXCJdLCBbXCJNYXJpbm8gSG9zdGlub1wiLCBcInRyYWRlcjEuanBnXCJdLCBbXCJOaWNvbHNoIExhdmFuZGFcIiwgXCJ0cmFkZXIyLmpwZ1wiXSwgW1wieFhyb2JrZTY5WHhcIiwgXCJ0cmFkZXIzLmpwZ1wiXV07XG5cbihmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuMTUpICsgMC4xO1xuICAgICAgICB2YXIgZCA9IE1hdGgucmFuZG9tKCkgLSAwLjU7XG4gICAgICAgIHZhciB0eXBlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEgKyAxKSk7XG4gICAgICAgIHRyYWRlcnMucHVzaChuZXcgVHJhZGVyKHBlb3BsZVtqXVswXSwgXCJkaXN0L2ltYWdlcy9cIiArIHBlb3BsZVtqXVsxXSwgdG90YWxQZXJjZW50YWdlLCBkLCBcIlRoaXMganVzdCBsb29rcyBnb29kIVxcbkkgY2FuIGV2ZW4gcHV0IGEgc2Vjb25kIGxpbmUgaGVyZVxcblxcbk11bHRpbGluZSBzcGFjZXMgYXJlIHN1cHBvcnRlZFwiLCB0eXBlKSk7XG4gICAgfVxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuaW5uZXJXaWR0aCAtICh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpKTtcbiAgICAgICAgdmFyIHkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAod2luZG93LmlubmVySGVpZ2h0IC0gNTApIC0gKCh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCkgLyAyKSk7XG4gICAgICAgIHZhciByID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkgKiA0KTtcbiAgICAgICAgdmFyIHBwbCA9IFtdO1xuICAgICAgICBmb3IodmFyIGsgPSAwOyBrIDwgcjsgaysrKSB7XG4gICAgICAgICAgICB2YXIgdCA9IG5ldyBUcmFkZXIodHJhZGVyc1trXS5uYW1lLCB0cmFkZXJzW2tdLmltZ1NyYywgdHJhZGVyc1trXS50b3RhbFBlcmNlbnRhZ2UsIHRyYWRlcnNba10uZGlmZmVyZW5jZSwgdHJhZGVyc1trXS5jb21tZW50LCB0cmFkZXJzW2tdLnR5cGUpO1xuICAgICAgICAgICAgdC5wZXJjZW50YWdlID0gKE1hdGgucmFuZG9tKCkgKiAwLjQpICsgMC4xO1xuICAgICAgICAgICAgcHBsLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJhZGVzLnB1c2gobmV3IFRyYWRlKFwiZGlzdC9pbWFnZXMvXCIgKyBsb2dvc1tpXSwgbmV3IFZlY3RvcjJEKHgsIHkpLCBwcGwpKTtcbiAgICB9XG4gICAgdmFyIGNhbnZhcyA9IG5ldyBDYW52YXMod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCAtIDUwLCBcInRyYWRlc1wiLCBcIiNlZWVlZWVcIiwgdHJhZGVzKTtcbiAgICBmb3IodmFyIGwgPSAwOyBsIDwgY2FudmFzLm9ianMubGVuZ3RoOyBsKyspIHtcbiAgICAgICAgY2FudmFzLm9ianNbbF0uY2FsY3VsYXRlKGNhbnZhcyk7XG4gICAgfVxuICAgIGNhbnZhcy5kcmF3Q2FudmFzKCk7XG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXCJuZ1JvdXRlXCJdKTtcblxuICAgIGFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvaG9tZVwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvaG9tZS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJtYWluQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvcHJvZmlsZS86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL3Byb2ZpbGUuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwicHJvZmlsZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2JhbGFuY2VIaXN0b3J5LzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvYmFsYW5jZUhpc3RvcnkuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYmFsYW5jZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2RlcG9zaXQvOmlkXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9kZXBvc2l0Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcImJhbGFuY2VDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi93aXRoZHJhdy86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL3dpdGhkcmF3Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcImJhbGFuY2VDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBcIi9ob21lXCJcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
