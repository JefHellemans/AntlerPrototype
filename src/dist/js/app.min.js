function Trader(e,t,a,r,s,i){this.name=e,this.totalPercentage=t,this.percentage=r,this.inAt=a,this.comment=s,this.type=i,this.drawable=new Drawable,this.drawable.color="#ffffff",this.drawable.borderColor="#eeeeee",this.drawable.borderWidth=2,this.drawable.borderScaling=!1,this.drawable.setText("[b]"+this.name+"[/b][align=right]Test[/align]\n"+s),this.drawable.textFont="SourceSansPro",this.drawable.textAnchor=new Vector2D(0,1),this.drawable.textBackground="#ffffff",this.drawable.textPadding=new Vector2D(0,0),this.drawable.textScaling=!1,this.drawable.textPos=new Vector2D(1,-1),this.drawable.textColor="#36B5DB",this.drawable.pos=new Vector2D(0,0),this.drawable.radius=25,this.drawable.show=!1,this.open=!1,this.draw=function(e,t,a){if(this.drawable.show){var r=this.drawable.pos;this.drawable.pos=this.drawable.pos.rotate(a-90),e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y),this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e),e.restore(),this.drawable.pos=r}},this.postDraw=function(e,t,a){if(this.drawable.show){var r=this.drawable.pos;this.drawable.pos=this.drawable.pos.rotate(a-90),e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y),this.drawable.drawText(e,t),e.restore(),this.drawable.pos=r}},this.clicked=function(){var e=this;this.open?(this.drawable.animate("textSize",0,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(0,0),200,"easeInOut",function(t,a){t&&(e.open=!1)})):(this.drawable.animate("textSize",12,200,"easeInOut",null),this.drawable.animateVector("textPadding",new Vector2D(10,10),200,"easeInOut",function(t,a){t&&(e.open=!0)}))},this.interaction=function(e,t,a){var r=e.subVector(this.drawable.pos.rotate(a-90).mul(t)),s=0;return 0!==this.drawable.radius&&(s=this.drawable.radius*t),0!==this.drawable.size.length()&&(s=this.drawable.size.length()*t),r.length()<=s&&this.drawable.show?this:!1}}var Trade=function(e,t){this.stockPrice=e,this.roi=0,this.traders=t,this.drawable=new Drawable,this.percentage=0;for(var a=0,r=this.traders.length;r>a;a++){var s=this.traders[a];this.percentage+=s.totalPercentage*s.percentage,s.pos=new Vector2D(0,0)}this.open=!1,this.drawable.textSize=12,this.drawable.imgFill=!1,this.interaction=function(e,t){var a=e.subVector(this.drawable.pos.mul(t)),r=0;if(0!==this.drawable.radius&&(r=this.drawable.radius*t),0!==this.drawable.size.length()&&(r=this.drawable.size.length()*t),a.length()<=r)return this;for(var i=e.subVector(this.drawable.pos.mul(t)),o=180/(this.traders.length+1),n=0,d=this.traders.length;d>n;n++){var l=o*(n+1-(this.traders.length+1)/2),h=this.traders[n].interaction(i,t,l);if(h!==!1){for(var w=0,c=this.traders.length;c>w;w++)s=this.traders[w],s.open&&s.clicked();return h}}return!1},this.draw=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var a=180/(this.traders.length+1),r=0,s=this.traders.length;s>r;r++){var i=a*(r+1-(this.traders.length+1)/2);this.traders[r].draw(e,t,i)}this.drawable.drawCircle(e),this.drawable.drawImageInCircle(e),this.drawable.drawBorderForCircle(e),this.drawable.drawText(e,t),e.restore()}},this.postDraw=function(e,t){if(this.drawable.show){e.save(),e.translate(this.drawable.pos.x,this.drawable.pos.y);for(var a=180/(this.traders.length+1),r=0,s=this.traders.length;s>r;r++){var i=a*(r+1-(this.traders.length+1)/2);this.traders[r].postDraw(e,t,i)}e.restore()}},this.clicked=function(){var e=0,t=0,a=null;if(this.open){for(t=this.traders.length;t>e;e++)a=this.traders[e],a.open&&a.clicked(),a.drawable.animateVector("pos",new Vector2D(0,0),300,"easeInOut",null);this.open=!1}else{for(t=this.traders.length;t>e;e++)a=this.traders[e],a.drawable.show=!0,a.drawable.animateVector("pos",new Vector2D(0,this.drawable.radius+a.drawable.radius+15),300,"easeInOut",null);this.open=!0}},this.requestRedraw=function(){for(var e=0,t=this.traders.length;t>e;e++)this.traders[e].drawable.requestRedraw&&(this.drawable.requestRedraw=!0,this.traders[e].drawable.requestRedraw=!1);return this.drawable.requestRedraw?(this.drawable.requestRedraw=!1,!0):!1}},trades=[],traders=[],logos=["logo0.svg","logo1.svg","logo2.svg","logo3.svg","logo4.svg"],people=[["Crazy Heffe","trader0.jpg"],["Marino Hostino","trader1.jpg"],["Nicolsh Lavanda","trader2.jpg"],["xXrobke69Xx","trader3.jpg"]];!function(){for(var e=0;4>e;e++){var t=.15*Math.random()+.1,a=.4*Math.random()+.1,r=200*Math.random(),s=Math.floor(2*Math.random()),i=[t,a,r,s];traders.push(i)}for(var o=0;5>o;o++){for(var n=Math.floor(Math.random()*window.innerWidth-window.innerWidth/2),d=Math.floor(Math.random()*(window.innerHeight-50)-(window.innerHeight-50)/2),l=Math.ceil(4*Math.random()),h=[],w=Math.floor(200*Math.random()*100)/100,c=0;l>c;c++){var b=new Trader(people[c][0],traders[c][0],traders[c][2],traders[c][1],"This looks good!\nI can even put a second line\n\nAnd even more",traders[c][3]);b.drawable.setImage("dist/images/"+people[c][1],function(){u.draw()}),b.percentage=.4*Math.random()+.1,h.push(b)}var f=new Trade(w,h);f.drawable.pos=new Vector2D(n,d),f.drawable.radius=Math.floor(50*Math.random()+50),f.drawable.color="#ffffff",f.drawable.borderWidth=2,f.drawable.borderColor="#eeeeee",f.drawable.borderScaling=!1,f.drawable.setImage("dist/images/"+logos[o],function(){u.draw()}),f.drawable.setText(w+""),f.drawable.textColor="#ffffff",f.drawable.textFont="SourceSansPro",f.drawable.textAnchor=new Vector2D(.5,.5),f.drawable.textPos=new Vector2D(0,.5),f.drawable.textBackground="#36B5DB",f.drawable.textPadding=new Vector2D(10,10),trades.push(f)}var u=new Canvas(0,50,window.innerWidth,window.innerHeight-50,"trades",trades);u.draw(),document.getElementById("trades").addEventListener("mousedown",function(e){u.interactionStart(e,function(e,t){if(e instanceof Trade){var a=u.objects.indexOf(e);u.objects.push(u.objects.splice(a,1)[0])}u.selected=e,u.mousePos=t})}),document.getElementById("trades").addEventListener("mousemove",function(e){u.interactionMove(e,function(e,t){e instanceof Trade&&(e.drawable.pos=t,u.draw())})}),document.getElementById("trades").addEventListener("mouseup",function(){u.interactionStop(function(e){if(null!==e){if(e instanceof Trade)for(var t=0,a=u.objects.length;a>t;t++)u.objects[t].open&&u.objects[t]!==e&&u.objects[t].clicked();"function"==typeof e.clicked&&e.clicked()}})}),document.getElementById("resetOffset").addEventListener("click",function(){u.moveToCenter()}),document.getElementById("scaleCanvas").addEventListener("mousemove",function(){u.scale=this.value,u.draw()})}(),function(){"use strict";var e=angular.module("app",["ngRoute"]);e.config(function(e,t){e.when("/home",{templateUrl:"pages/home.html",controller:"mainController"}).when("/profile/:id",{templateUrl:"pages/profile.html",controller:"profileController"}).when("/balanceHistory/:id",{templateUrl:"pages/balanceHistory.html",controller:"balanceController"}).when("/deposit/:id",{templateUrl:"pages/deposit.html",controller:"balanceController"}).when("/withdraw/:id",{templateUrl:"pages/withdraw.html",controller:"balanceController"}).otherwise({redirectTo:"/home"})})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYWRlci5qcyIsInRyYWRlLmpzIiwidHJhZGVDYW52YXMuanMiLCJhcHAuanMiXSwibmFtZXMiOlsiVHJhZGVyIiwibmFtZSIsInRvdGFsUGVyY2VudGFnZSIsImluQXQiLCJwZXJjZW50YWdlIiwiY29tbWVudCIsInR5cGUiLCJ0aGlzIiwiZHJhd2FibGUiLCJEcmF3YWJsZSIsImNvbG9yIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImJvcmRlclNjYWxpbmciLCJzZXRUZXh0IiwidGV4dEZvbnQiLCJ0ZXh0QW5jaG9yIiwiVmVjdG9yMkQiLCJ0ZXh0QmFja2dyb3VuZCIsInRleHRQYWRkaW5nIiwidGV4dFNjYWxpbmciLCJ0ZXh0UG9zIiwidGV4dENvbG9yIiwicG9zIiwicmFkaXVzIiwic2hvdyIsIm9wZW4iLCJkcmF3IiwiY3R4Iiwic2NhbGUiLCJhbHBoYSIsInAiLCJyb3RhdGUiLCJzYXZlIiwidHJhbnNsYXRlIiwieCIsInkiLCJkcmF3Q2lyY2xlIiwiZHJhd0ltYWdlSW5DaXJjbGUiLCJkcmF3Qm9yZGVyRm9yQ2lyY2xlIiwicmVzdG9yZSIsInBvc3REcmF3IiwiZHJhd1RleHQiLCJjbGlja2VkIiwibWUiLCJhbmltYXRlIiwiYW5pbWF0ZVZlY3RvciIsImZpbmlzaGVkIiwiZWxlbWVudCIsImludGVyYWN0aW9uIiwibW91c2VQb3MiLCJtb3VzZURpZmZlcmVuY2UiLCJzdWJWZWN0b3IiLCJtdWwiLCJkaWZmZXJlbmNlIiwic2l6ZSIsImxlbmd0aCIsIlRyYWRlIiwic3RvY2tQcmljZSIsInRyYWRlcnMiLCJyb2kiLCJpIiwibCIsInQiLCJ0ZXh0U2l6ZSIsImltZ0ZpbGwiLCJyZWxQb3MiLCJhbmdsZSIsIm8iLCJqIiwibSIsInJlcXVlc3RSZWRyYXciLCJ0cmFkZXMiLCJsb2dvcyIsInBlb3BsZSIsIk1hdGgiLCJyYW5kb20iLCJmbG9vciIsInRyYWRlciIsInB1c2giLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJyIiwiY2VpbCIsInBwbCIsImsiLCJzZXRJbWFnZSIsImNhbnZhcyIsInRyYWRlIiwiQ2FudmFzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiaW50ZXJhY3Rpb25TdGFydCIsIm9iamVjdCIsImluZGV4Iiwib2JqZWN0cyIsImluZGV4T2YiLCJzcGxpY2UiLCJzZWxlY3RlZCIsImludGVyYWN0aW9uTW92ZSIsImludGVyYWN0aW9uU3RvcCIsIm1vdmVUb0NlbnRlciIsInZhbHVlIiwiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwib3RoZXJ3aXNlIiwicmVkaXJlY3RUbyJdLCJtYXBwaW5ncyI6IkFBQUEsUUFBQUEsUUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQUMsS0FBQU4sS0FBQUEsRUFDQU0sS0FBQUwsZ0JBQUFBLEVBQ0FLLEtBQUFILFdBQUFBLEVBQ0FHLEtBQUFKLEtBQUFBLEVBQ0FJLEtBQUFGLFFBQUFBLEVBQ0FFLEtBQUFELEtBQUFBLEVBQ0FDLEtBQUFDLFNBQUEsR0FBQUMsVUFFQUYsS0FBQUMsU0FBQUUsTUFBQSxVQUVBSCxLQUFBQyxTQUFBRyxZQUFBLFVBQ0FKLEtBQUFDLFNBQUFJLFlBQUEsRUFDQUwsS0FBQUMsU0FBQUssZUFBQSxFQUVBTixLQUFBQyxTQUFBTSxRQUFBLE1BQUFQLEtBQUFOLEtBQUEsa0NBQUFJLEdBQ0FFLEtBQUFDLFNBQUFPLFNBQUEsZ0JBQ0FSLEtBQUFDLFNBQUFRLFdBQUEsR0FBQUMsVUFBQSxFQUFBLEdBQ0FWLEtBQUFDLFNBQUFVLGVBQUEsVUFDQVgsS0FBQUMsU0FBQVcsWUFBQSxHQUFBRixVQUFBLEVBQUEsR0FDQVYsS0FBQUMsU0FBQVksYUFBQSxFQUNBYixLQUFBQyxTQUFBYSxRQUFBLEdBQUFKLFVBQUEsRUFBQSxJQUNBVixL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QWpCLEVBQUE3RCxZQ3hGQSxXQUNBLFlBRUEsSUFBQStFLEdBQUFDLFFBQUFDLE9BQUEsT0FBQSxXQUVBRixHQUFBRyxPQUFBLFNBQUFDLEVBQUFDLEdBQ0FELEVBQ0FFLEtBQUEsU0FDQUMsWUFBQSxrQkFDQUMsV0FBQSxtQkFFQUYsS0FBQSxnQkFDQUMsWUFBQSxxQkFDQUMsV0FBQSxzQkFFQUYsS0FBQSx1QkFDQUMsWUFBQSw0QkFDQUMsV0FBQSxzQkFFQUYsS0FBQSxnQkFDQUMsWUFBQSxxQkFDQUMsV0FBQSxzQkFFQUYsS0FBQSxpQkFDQUMsWUFBQSxzQkFDQUMsV0FBQSxzQkFFQUMsV0FDQUMsV0FBQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gVHJhZGVyKG5hbWUsIHRvdGFsUGVyY2VudGFnZSwgaW5BdCwgcGVyY2VudGFnZSwgY29tbWVudCwgdHlwZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy50b3RhbFBlcmNlbnRhZ2UgPSB0b3RhbFBlcmNlbnRhZ2U7XG4gICAgdGhpcy5wZXJjZW50YWdlID0gcGVyY2VudGFnZTtcbiAgICB0aGlzLmluQXQgPSBpbkF0O1xuICAgIHRoaXMuY29tbWVudCA9IGNvbW1lbnQ7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmRyYXdhYmxlID0gbmV3IERyYXdhYmxlKCk7XG5cbiAgICB0aGlzLmRyYXdhYmxlLmNvbG9yID0gXCIjZmZmZmZmXCI7XG5cbiAgICB0aGlzLmRyYXdhYmxlLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgdGhpcy5kcmF3YWJsZS5ib3JkZXJTY2FsaW5nID0gZmFsc2U7XG5cbiAgICB0aGlzLmRyYXdhYmxlLnNldFRleHQoXCJbYl1cIiArIHRoaXMubmFtZSArIFwiWy9iXVthbGlnbj1yaWdodF1UZXN0Wy9hbGlnbl1cXG5cIiArIGNvbW1lbnQpO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dEZvbnQgPSBcIlNvdXJjZVNhbnNQcm9cIjtcbiAgICB0aGlzLmRyYXdhYmxlLnRleHRBbmNob3IgPSBuZXcgVmVjdG9yMkQoMCwgMSk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0QmFja2dyb3VuZCA9IFwiI2ZmZmZmZlwiO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dFBhZGRpbmcgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0U2NhbGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZHJhd2FibGUudGV4dFBvcyA9IG5ldyBWZWN0b3IyRCgxLCAtMSk7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0Q29sb3IgPSBcIiMzNkI1REJcIjtcblxuICAgIHRoaXMuZHJhd2FibGUucG9zID0gbmV3IFZlY3RvcjJEKDAsIDApO1xuXG4gICAgdGhpcy5kcmF3YWJsZS5yYWRpdXMgPSAyNTtcblxuICAgIHRoaXMuZHJhd2FibGUuc2hvdyA9IGZhbHNlO1xuXG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG5cbiAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbihjdHgsIHNjYWxlLCBhbHBoYSkge1xuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnNob3cpIHtcbiAgICAgICAgICAgIHZhciBwID0gdGhpcy5kcmF3YWJsZS5wb3M7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnBvcyA9IHRoaXMuZHJhd2FibGUucG9zLnJvdGF0ZShhbHBoYSAtIDkwKTtcbiAgICAgICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgICAgICBjdHgudHJhbnNsYXRlKHRoaXMuZHJhd2FibGUucG9zLngsIHRoaXMuZHJhd2FibGUucG9zLnkpO1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3Q2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdJbWFnZUluQ2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdCb3JkZXJGb3JDaXJjbGUoY3R4KTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnBvcyA9IHA7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5wb3N0RHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUsIGFscGhhKSB7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUuc2hvdykge1xuICAgICAgICAgICAgdmFyIHAgPSB0aGlzLmRyYXdhYmxlLnBvcztcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUucG9zID0gdGhpcy5kcmF3YWJsZS5wb3Mucm90YXRlKGFscGhhIC0gOTApO1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy5kcmF3YWJsZS5wb3MueCwgdGhpcy5kcmF3YWJsZS5wb3MueSk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdUZXh0KGN0eCwgc2NhbGUpO1xuICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUucG9zID0gcDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgaWYoIXRoaXMub3Blbikge1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlKFwidGV4dFNpemVcIiwgMTIsIDIwMCwgXCJlYXNlSW5PdXRcIiwgbnVsbCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmFuaW1hdGVWZWN0b3IoXCJ0ZXh0UGFkZGluZ1wiLCBuZXcgVmVjdG9yMkQoMTAsIDEwKSwgMjAwLCBcImVhc2VJbk91dFwiLCBmdW5jdGlvbihmaW5pc2hlZCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLm9wZW4gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5hbmltYXRlKFwidGV4dFNpemVcIiwgMCwgMjAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInRleHRQYWRkaW5nXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMjAwLCBcImVhc2VJbk91dFwiLCBmdW5jdGlvbihmaW5pc2hlZCwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGlmKGZpbmlzaGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmludGVyYWN0aW9uID0gZnVuY3Rpb24obW91c2VQb3MsIHNjYWxlLCBhbHBoYSkge1xuICAgICAgICB2YXIgbW91c2VEaWZmZXJlbmNlID0gbW91c2VQb3Muc3ViVmVjdG9yKHRoaXMuZHJhd2FibGUucG9zLnJvdGF0ZShhbHBoYSAtIDkwKS5tdWwoc2NhbGUpKTtcbiAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSAwO1xuICAgICAgICBpZiAodGhpcy5kcmF3YWJsZS5yYWRpdXMgIT09IDApIHtcbiAgICAgICAgICAgIGRpZmZlcmVuY2UgPSB0aGlzLmRyYXdhYmxlLnJhZGl1cyAqIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgIT09IDApIHtcbiAgICAgICAgICAgIGRpZmZlcmVuY2UgPSB0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgKiBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VEaWZmZXJlbmNlLmxlbmd0aCgpIDw9IGRpZmZlcmVuY2UgJiYgdGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG59IiwidmFyIFRyYWRlID0gZnVuY3Rpb24oc3RvY2tQcmljZSwgdHJhZGVycykge1xuICAgIHRoaXMuc3RvY2tQcmljZSA9IHN0b2NrUHJpY2U7XG4gICAgdGhpcy5yb2kgPSAwO1xuICAgIHRoaXMudHJhZGVycyA9IHRyYWRlcnM7XG4gICAgdGhpcy5kcmF3YWJsZSA9IG5ldyBEcmF3YWJsZSgpO1xuICAgIHRoaXMucGVyY2VudGFnZSA9IDA7XG4gICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRyYWRlcnNbaV07XG4gICAgICAgIHRoaXMucGVyY2VudGFnZSArPSB0LnRvdGFsUGVyY2VudGFnZSAqIHQucGVyY2VudGFnZTtcbiAgICAgICAgdC5wb3MgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG4gICAgfVxuXG4gICAgdGhpcy5vcGVuID0gZmFsc2U7XG4gICAgdGhpcy5kcmF3YWJsZS50ZXh0U2l6ZSA9IDEyO1xuICAgIHRoaXMuZHJhd2FibGUuaW1nRmlsbCA9IGZhbHNlO1xuXG4gICAgdGhpcy5pbnRlcmFjdGlvbiA9IGZ1bmN0aW9uKG1vdXNlUG9zLCBzY2FsZSkge1xuICAgICAgICB2YXIgbW91c2VEaWZmZXJlbmNlID0gbW91c2VQb3Muc3ViVmVjdG9yKHRoaXMuZHJhd2FibGUucG9zLm11bChzY2FsZSkpO1xuICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IDA7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUucmFkaXVzICE9PSAwKSB7XG4gICAgICAgICAgICBkaWZmZXJlbmNlID0gdGhpcy5kcmF3YWJsZS5yYWRpdXMgKiBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgIT09IDApIHtcbiAgICAgICAgICAgIGRpZmZlcmVuY2UgPSB0aGlzLmRyYXdhYmxlLnNpemUubGVuZ3RoKCkgKiBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VEaWZmZXJlbmNlLmxlbmd0aCgpIDw9IGRpZmZlcmVuY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZWxQb3MgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5kcmF3YWJsZS5wb3MubXVsKHNjYWxlKSk7XG4gICAgICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICAgICAgdmFyIG8gPSB0aGlzLnRyYWRlcnNbaV0uaW50ZXJhY3Rpb24ocmVsUG9zLCBzY2FsZSwgYWxwaGEpO1xuICAgICAgICAgICAgaWYobyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwLCBtID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2pdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5vcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5zaG93KSB7XG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh0aGlzLmRyYXdhYmxlLnBvcy54LCB0aGlzLmRyYXdhYmxlLnBvcy55KTtcbiAgICAgICAgICAgIHZhciBhbmdsZSA9IDE4MCAvICh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSk7XG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBhbHBoYSA9IGFuZ2xlICogKGkgKyAxIC0gKCh0aGlzLnRyYWRlcnMubGVuZ3RoICsgMSkgLyAyKSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFkZXJzW2ldLmRyYXcoY3R4LCBzY2FsZSwgYWxwaGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kcmF3YWJsZS5kcmF3Q2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdJbWFnZUluQ2lyY2xlKGN0eCk7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLmRyYXdCb3JkZXJGb3JDaXJjbGUoY3R4KTtcbiAgICAgICAgICAgIHRoaXMuZHJhd2FibGUuZHJhd1RleHQoY3R4LCBzY2FsZSk7XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucG9zdERyYXcgPSBmdW5jdGlvbihjdHgsIHNjYWxlKSB7XG4gICAgICAgIGlmKHRoaXMuZHJhd2FibGUuc2hvdykge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC50cmFuc2xhdGUodGhpcy5kcmF3YWJsZS5wb3MueCwgdGhpcy5kcmF3YWJsZS5wb3MueSk7XG4gICAgICAgICAgICB2YXIgYW5nbGUgPSAxODAgLyAodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxwaGEgPSBhbmdsZSAqIChpICsgMSAtICgodGhpcy50cmFkZXJzLmxlbmd0aCArIDEpIC8gMikpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5wb3N0RHJhdyhjdHgsIHNjYWxlLCBhbHBoYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaSA9IDAsIGwgPSAwLCB0ID0gbnVsbDtcbiAgICAgICAgaWYoIXRoaXMub3Blbikge1xuICAgICAgICAgICAgZm9yKGwgPSB0aGlzLnRyYWRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdCA9IHRoaXMudHJhZGVyc1tpXTtcbiAgICAgICAgICAgICAgICB0LmRyYXdhYmxlLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHQuZHJhd2FibGUuYW5pbWF0ZVZlY3RvcihcInBvc1wiLCBuZXcgVmVjdG9yMkQoMCwgdGhpcy5kcmF3YWJsZS5yYWRpdXMgKyB0LmRyYXdhYmxlLnJhZGl1cyArIDE1KSwgMzAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IobCA9IHRoaXMudHJhZGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0ID0gdGhpcy50cmFkZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmKHQub3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdC5kcmF3YWJsZS5hbmltYXRlVmVjdG9yKFwicG9zXCIsIG5ldyBWZWN0b3IyRCgwLCAwKSwgMzAwLCBcImVhc2VJbk91dFwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVxdWVzdFJlZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gdGhpcy50cmFkZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYodGhpcy50cmFkZXJzW2ldLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhZGVyc1tpXS5kcmF3YWJsZS5yZXF1ZXN0UmVkcmF3ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYodGhpcy5kcmF3YWJsZS5yZXF1ZXN0UmVkcmF3KSB7XG4gICAgICAgICAgICB0aGlzLmRyYXdhYmxlLnJlcXVlc3RSZWRyYXcgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufTsiLCJ2YXIgdHJhZGVzID0gW107XG52YXIgdHJhZGVycyA9IFtdO1xudmFyIGxvZ29zID0gW1wibG9nbzAuc3ZnXCIsIFwibG9nbzEuc3ZnXCIsIFwibG9nbzIuc3ZnXCIsIFwibG9nbzMuc3ZnXCIsIFwibG9nbzQuc3ZnXCJdO1xudmFyIHBlb3BsZSA9IFtbXCJDcmF6eSBIZWZmZVwiLCBcInRyYWRlcjAuanBnXCJdLCBbXCJNYXJpbm8gSG9zdGlub1wiLCBcInRyYWRlcjEuanBnXCJdLCBbXCJOaWNvbHNoIExhdmFuZGFcIiwgXCJ0cmFkZXIyLmpwZ1wiXSwgW1wieFhyb2JrZTY5WHhcIiwgXCJ0cmFkZXIzLmpwZ1wiXV07XG5cbihmdW5jdGlvbigpIHtcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgIHZhciB0b3RhbFBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuMTUpICsgMC4xO1xuICAgICAgICB2YXIgcGVyY2VudGFnZSA9IChNYXRoLnJhbmRvbSgpICogMC40KSArIDAuMTtcbiAgICAgICAgdmFyIGluQXQgPSBNYXRoLnJhbmRvbSgpICogMjAwO1xuICAgICAgICB2YXIgdHlwZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxICsgMSkpO1xuICAgICAgICB2YXIgdHJhZGVyID0gW3RvdGFsUGVyY2VudGFnZSwgcGVyY2VudGFnZSwgaW5BdCwgdHlwZV07XG4gICAgICAgIHRyYWRlcnMucHVzaCh0cmFkZXIpO1xuICAgIH1cbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgNTsgaSsrKSB7XG4gICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVyV2lkdGggLSAod2luZG93LmlubmVyV2lkdGggLyAyKSk7XG4gICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHdpbmRvdy5pbm5lckhlaWdodCAtIDUwKSAtICgod2luZG93LmlubmVySGVpZ2h0IC0gNTApIC8gMikpO1xuICAgICAgICB2YXIgciA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogNCk7XG4gICAgICAgIHZhciBwcGwgPSBbXTtcbiAgICAgICAgdmFyIHN0b2NrUHJpY2UgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogMjAwKSAqIDEwMCkgLyAxMDA7XG4gICAgICAgIGZvcih2YXIgayA9IDA7IGsgPCByOyBrKyspIHtcbiAgICAgICAgICAgIHZhciB0ID0gbmV3IFRyYWRlcihwZW9wbGVba11bMF0sIHRyYWRlcnNba11bMF0sIHRyYWRlcnNba11bMl0sIHRyYWRlcnNba11bMV0sIFwiVGhpcyBsb29rcyBnb29kIVxcbkkgY2FuIGV2ZW4gcHV0IGEgc2Vjb25kIGxpbmVcXG5cXG5BbmQgZXZlbiBtb3JlXCIsIHRyYWRlcnNba11bM10pO1xuICAgICAgICAgICAgdC5kcmF3YWJsZS5zZXRJbWFnZShcImRpc3QvaW1hZ2VzL1wiICsgcGVvcGxlW2tdWzFdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LnBlcmNlbnRhZ2UgPSAoTWF0aC5yYW5kb20oKSAqIDAuNCkgKyAwLjE7XG4gICAgICAgICAgICBwcGwucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdHJhZGUgPSBuZXcgVHJhZGUoc3RvY2tQcmljZSwgcHBsKTtcbiAgICAgICAgdHJhZGUuZHJhd2FibGUucG9zID0gbmV3IFZlY3RvcjJEKHgsIHkpO1xuICAgICAgICB0cmFkZS5kcmF3YWJsZS5yYWRpdXMgPSBNYXRoLmZsb29yKChNYXRoLnJhbmRvbSgpICogNTApICsgNTApO1xuICAgICAgICB0cmFkZS5kcmF3YWJsZS5jb2xvciA9IFwiI2ZmZmZmZlwiO1xuICAgICAgICB0cmFkZS5kcmF3YWJsZS5ib3JkZXJXaWR0aCA9IDI7XG4gICAgICAgIHRyYWRlLmRyYXdhYmxlLmJvcmRlckNvbG9yID0gXCIjZWVlZWVlXCI7XG4gICAgICAgIHRyYWRlLmRyYXdhYmxlLmJvcmRlclNjYWxpbmcgPSBmYWxzZTtcbiAgICAgICAgdHJhZGUuZHJhd2FibGUuc2V0SW1hZ2UoXCJkaXN0L2ltYWdlcy9cIiArIGxvZ29zW2ldLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGNhbnZhcy5kcmF3KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0cmFkZS5kcmF3YWJsZS5zZXRUZXh0KHN0b2NrUHJpY2UgKyBcIlwiKTtcbiAgICAgICAgdHJhZGUuZHJhd2FibGUudGV4dENvbG9yID0gXCIjZmZmZmZmXCI7XG4gICAgICAgIHRyYWRlLmRyYXdhYmxlLnRleHRGb250ID0gXCJTb3VyY2VTYW5zUHJvXCI7XG4gICAgICAgIHRyYWRlLmRyYXdhYmxlLnRleHRBbmNob3IgPSBuZXcgVmVjdG9yMkQoMC41LCAwLjUpO1xuICAgICAgICB0cmFkZS5kcmF3YWJsZS50ZXh0UG9zID0gbmV3IFZlY3RvcjJEKDAsIDAuNSk7XG4gICAgICAgIHRyYWRlLmRyYXdhYmxlLnRleHRCYWNrZ3JvdW5kID0gXCIjMzZCNURCXCI7XG4gICAgICAgIHRyYWRlLmRyYXdhYmxlLnRleHRQYWRkaW5nID0gbmV3IFZlY3RvcjJEKDEwLCAxMCk7XG4gICAgICAgIHRyYWRlcy5wdXNoKHRyYWRlKTtcbiAgICB9XG4gICAgdmFyIGNhbnZhcyA9IG5ldyBDYW52YXMoMCwgNTAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQgLSA1MCwgXCJ0cmFkZXNcIiwgdHJhZGVzKTtcbiAgICBjYW52YXMuZHJhdygpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25TdGFydChlLCBmdW5jdGlvbihvYmplY3QsIG1vdXNlUG9zKSB7XG4gICAgICAgICAgICBpZihvYmplY3QgaW5zdGFuY2VvZiBUcmFkZSkge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGNhbnZhcy5vYmplY3RzLmluZGV4T2Yob2JqZWN0KTtcbiAgICAgICAgICAgICAgICBjYW52YXMub2JqZWN0cy5wdXNoKGNhbnZhcy5vYmplY3RzLnNwbGljZShpbmRleCwgMSlbMF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FudmFzLnNlbGVjdGVkID0gb2JqZWN0O1xuICAgICAgICAgICAgY2FudmFzLm1vdXNlUG9zID0gbW91c2VQb3M7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25Nb3ZlKGUsIGZ1bmN0aW9uKG9iamVjdCwgbW91c2VQb3MpIHtcbiAgICAgICAgICAgIGlmKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlKSB7XG4gICAgICAgICAgICAgICAgb2JqZWN0LmRyYXdhYmxlLnBvcyA9IG1vdXNlUG9zO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5kcmF3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJhZGVzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjYW52YXMuaW50ZXJhY3Rpb25TdG9wKGZ1bmN0aW9uKG9iamVjdCkge1xuICAgICAgICAgICAgaWYob2JqZWN0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFRyYWRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2FudmFzLm9iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FudmFzLm9iamVjdHNbaV0ub3BlbiAmJiBjYW52YXMub2JqZWN0c1tpXSAhPT0gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzLm9iamVjdHNbaV0uY2xpY2tlZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0LmNsaWNrZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmNsaWNrZWQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzZXRPZmZzZXRcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjYW52YXMubW92ZVRvQ2VudGVyKCk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY2FsZUNhbnZhc1wiKS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBjYW52YXMuc2NhbGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBjYW52YXMuZHJhdygpO1xuICAgIH0pXG59KSgpOyIsIihmdW5jdGlvbiAoKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXCJuZ1JvdXRlXCJdKTtcblxuICAgIGFwcC5jb25maWcoZnVuY3Rpb24gKCRyb3V0ZVByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvaG9tZVwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvaG9tZS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJtYWluQ29udHJvbGxlclwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvcHJvZmlsZS86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL3Byb2ZpbGUuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwicHJvZmlsZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2JhbGFuY2VIaXN0b3J5LzppZFwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwicGFnZXMvYmFsYW5jZUhpc3RvcnkuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiYmFsYW5jZUNvbnRyb2xsZXJcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2RlcG9zaXQvOmlkXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJwYWdlcy9kZXBvc2l0Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcImJhbGFuY2VDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi93aXRoZHJhdy86aWRcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInBhZ2VzL3dpdGhkcmF3Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcImJhbGFuY2VDb250cm9sbGVyXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub3RoZXJ3aXNlKHtcbiAgICAgICAgICAgICAgICByZWRpcmVjdFRvOiBcIi9ob21lXCJcbiAgICAgICAgICAgIH0pO1xuICAgIH0pO1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
