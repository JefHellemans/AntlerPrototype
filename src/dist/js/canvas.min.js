Math.square=function(t){return t*t},Math.toRadians=function(t){return t*Math.PI/180},Math.toDegrees=function(t){return 180*t/Math.PI};var Vector2D=function(t,i){this.x=t,this.y=i};Vector2D.prototype={length:function(){return Math.sqrt(Math.square(this.x)+Math.square(this.y))},dot:function(t){return this.x*t.x+this.y*t.y},normalize:function(){var t=this.length();this.x/=t,this.y/=t},add:function(t){return new Vector2D(this.x+t,this.y+t)},addVector:function(t){return new Vector2D(this.x+t.x,this.y+t.y)},sub:function(t){return new Vector2D(this.x-t,this.y-t)},subVector:function(t){return new Vector2D(this.x-t.x,this.y-t.y)},mul:function(t){return new Vector2D(this.x*t,this.y*t)},mulVector:function(t){return new Vector2D(this.x*t.x,this.y*t.y)},div:function(t){return new Vector2D(this.x/t,this.y/t)},divVector:function(t){return new Vector2D(this.x/t.x,this.y/t.y)},rotate:function(t){var i=Math.toRadians(t),e=Math.cos(i),s=Math.sin(i);return new Vector2D(this.x*e-this.y*s,this.x*s+this.y*e)}};var Animation=function(t,i,e,s,h,o){this.element=t,this.from=i,this.difference=e-i,this.easing=h,this.cb=o,this.pos=0,this.end=s/10,this.timer=null};Animation.prototype.start=function(t){var i=this;this.timer=setInterval(function(){i.pos++;var e=0;switch(i.easing){case"linear":e=i.linear(i.difference,i.pos,i.end,i.from);break;case"easeIn":e=i.easeIn(i.difference,i.pos,i.end,i.from);break;case"easeOut":e=i.easeOut(i.difference,i.pos,i.end,i.from);break;case"easeInOut":e=i.easeInOut(i.difference,i.pos,i.end,i.from)}t(e),i.pos>=i.end&&(clearInterval(i.timer),i.timer=null,i.pos=0,"function"==typeof i.cb&&i.cb(!0,i.element))},10)},Animation.prototype.stop=function(){clearInterval(this.timer),this.timer=null,"function"==typeof this.cb&&this.cb(!1,this.element)},Animation.prototype.linear=function(t,i,e,s){return t*i/e+s},Animation.prototype.easeIn=function(t,i,e,s){return i/=e,t*i*i+s},Animation.prototype.easeOut=function(t,i,e,s){return i/=e,-t*i*(i-2)+s},Animation.prototype.easeInOut=function(t,i,e,s){return i/=e/2,1>i?t/2*i*i+s:(i--,-t/2*(i*(i-2)-1)+s)};var Paragraph=function(t){this.parts=[],this.checkForStyle(t,"[i]","[/i]","italic")||this.checkForStyle(t,"[b]","[/b]","bold")||this.checkForStyle(t,"[size=","[/size]","size")||this.checkForStyle(t,"[font=","[/font]","font")||this.checkForStyle(t,"[align=","[/align]","align")||this.checkForStyle(t,"[color=","[/color]","color")||(this.parts=[t])};Paragraph.prototype.getFont=function(t,i,e,s){return"undefined"!=typeof this.italic&&(t=this.italic),"undefined"!=typeof this.bold&&(i=this.bold),"undefined"!=typeof this.size&&(e=this.size),"undefined"!=typeof this.font&&(s=this.font),[t,i,e,s]},Paragraph.prototype.fontToText=function(t,i,e,s){var h="";return t&&(h+="italic "),i&&(h+="bold "),h+=e+"pt "+s},Paragraph.prototype.draw=function(t,i,e,s,h,o,r,n,a,c,l){var u=this.getFont(e,s,h,o),f=c.x;if("undefined"!=typeof this.align&&(r=this.align),"undefined"!=typeof this.color&&(n=this.color),1!==this.parts.length||this.parts[0]instanceof Paragraph){for(var d=0,g=this.parts.length;g>d;d++)if("function"==typeof this.parts[d].draw&&this.parts[d].draw(t,i,u[0],u[1],u[2],u[3],r,n,a,c,l),1===this.parts[d].length&&"function"==typeof this.parts[d].measure){var p=this.parts[d].measure(t,i,u[0],u[1],u[2],u[3],a);c.x+=p.x}c.x=f}else a||(u[2]*=1/i),"center"===r&&(c=c.addVector(new Vector2D(l,0).mul(.5))),"right"===r&&(c=c.addVector(new Vector2D(l,0))),t.font=this.fontToText(u[0],u[1],u[2],u[3]),t.textAlign=r,t.fillStyle=n,t.fillText(this.parts[0],c.x,c.y)},Paragraph.prototype.measure=function(t,i,e,s,h,o,r){var n=new Vector2D(0,0),a=this.getFont(e,s,h,o);if(1===this.parts.length)r||(a[2]*=1/i),t.font=this.fontToText(a[0],a[1],a[2],a[3]),n.y=a[2],n.x=t.measureText(this.parts[0]).width;else for(var c=0,l=this.parts.length;l>c;c++)if("function"==typeof this.parts[c].measure){var u=this.parts[c].measure(t,i,a[0],a[1],a[2],a[3],r);u.y>n.y&&(n.y=u.y),n.x+=u.x}return n},Paragraph.prototype.checkForStyle=function(t,i,e,s){var h=t.split(i);if(h.length>=2){var o=h.shift();o.length>0&&!(o instanceof Paragraph)?this.parts.push(new Paragraph(o)):o instanceof Paragraph&&this.parts.push(o);for(var r=0,n=h.length;n>r;r++){var a=h[r].split(e);if(i.indexOf("=")>-1){a[0]=a[0].split("]");for(var c=a[0].shift(),l="",u=0,f=a[0].length;f>u;u++)l+=a[0][u],f-1>u&&(l+="]");a[0]=l}var d=new Paragraph(a[0]);switch(0!==a[1].length||a[1]instanceof Paragraph?a[1]instanceof Paragraph?(this.parts.push(d),this.parts.push(a[1])):(this.parts.push(d),this.parts.push(new Paragraph(a[1]))):this.parts.push(d),s){case"italic":d.italic=!0;break;case"bold":d.bold=!0;break;case"size":d.size=c;break;case"font":d.font=c;break;case"align":d.align=c;break;case"color":d.color=c}}return!0}return!1};var Drawable=function(){this.color="#000000",this.img=null,this.imgFill=!0,this.scale=!0,this.borderColor="#000000",this.borderWidth=0,this.borderScaling=!0,this.text=[],this.textItalic=!1,this.textBold=!1,this.textSize=0,this.textMinSize=6,this.textFont="Arial",this.textAlign="left",this.textColor="#000000",this.textPos=new Vector2D(0,0),this.textAnchor=new Vector2D(0,0),this.textBackground=null,this.textReplace=20,this.textReplaceColor=null,this.textSpacing=1.2,this.textPadding=new Vector2D(0,0),this.textScaling=!0,this.opacity=1,this.rotation=0,this.pos=new Vector2D(0,0),this.radius=0,this.size=new Vector2D(0,0),this.show=!0,this.requestRedraw=!1,this.animations=[],this.drawRectangle=function(t){t.fillStyle=this.color;var i=new Vector2D(0,0).subVector(this.size.div(2));t.fillRect(i.x,i.y,this.size.x,this.size.y)},this.drawImage=function(t){if(null!==this.img){var i=0;i=this.imgFill?this.img.width>this.img.height?this.img.height:this.img.width:this.img.width>this.img.height?this.img.width:this.img.height;var e=new Vector2D(this.img.width,this.img.height).div(i).mulVector(this.size).subVector(this.size).mul(-.5),s=new Vector2D(0,0).subVector(this.size.div(2));this.scale||e.mul(),t.drawImage(this.img,e.x,e.y,this.size.x,this.size.y,s.x,s.y,this.size.x,this.size.y)}else console.log("[DRAWABLE][drawImage]: Could not draw image for",this,"since this.img is null")},this.drawBorder=function(t,i){t.strokeStyle=this.borderColor;var e=this.borderWidth;this.borderScaling||(e*=1/i),t.lineWidth=e;var s=new Vector2D(0,0).subVector(this.size.div(2));t.strokeRect(s.x,s.y,this.size.x,this.size.y)},this.drawCircle=function(t){t.fillStyle=this.color,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},this.drawImageInCircle=function(t){if(null!==this.img){t.save(),t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI,!0),t.clip();var i=1,e=new Vector2D(0,0).sub(this.radius),s=new Vector2D(this.radius,this.radius).mul(2),h=new Vector2D(0,0);if(this.imgFill)i=this.img.width>this.img.height?this.img.height:this.img.width,h=new Vector2D(this.img.width,this.img.height).div(i).sub(1).mul(i).div(2);else{i=this.img.width>this.img.height?this.img.width:this.img.height;var o=new Vector2D(this.img.width,this.img.height).div(i).sub(1).mul(-1);0!==o.x&&(o.x=1),0!==o.y&&(o.y=1),s=new Vector2D(this.img.width,this.img.height).div(i).mulVector(s),e=e.subVector(o.mulVector(s).div(2)),e=e.addVector(o.mul(this.radius))}t.drawImage(this.img,h.x,h.y,this.img.width-2*h.x,this.img.height-2*h.y,e.x,e.y,s.x,s.y),t.closePath(),t.restore()}else console.log("[DRAWABLE][drawImageInCircle]: Could not draw image for",this,"since this.img is null")},this.drawBorderForCircle=function(t,i){t.beginPath(),t.strokeStyle=this.borderColor;var e=this.borderWidth;this.borderScaling||(e*=1/i),t.lineWidth=e,t.arc(0,0,this.radius,0,2*Math.PI,!0),t.stroke(),t.closePath()},this.drawText=function(t,i){if(null!==this.text){var e=this.textSize;if(this.textScaling&&(e*=i),e>=this.textMinSize){var s=0,h=0,o=0,r=0,n=new Vector2D(0,0);for(r=this.text.length;r>o;o++){var a=this.text[o].measure(t,i,this.textItalic,this.textBold,this.textSize,this.textFont,this.textScaling);if(a.x>s&&(s=a.x),h+=a.y,r-o>1){var c=this.textSpacing*this.textSize;this.textScaling||(c*=1/i),h+=c}}if(null!==this.textBackground){t.fillStyle=this.textBackground;var l=this.textPadding;this.textScaling||(l=l.mul(1/i));var u=l.mul(2).addVector(new Vector2D(s,h)),f=this.textPos;0!==this.radius&&(f=f.mul(this.radius)),0!==this.size.length()&&(f=f.mulVector(this.size));var d=f.subVector(u.mulVector(this.textAnchor));t.fillRect(d.x,d.y,u.x,u.y),n=d.addVector(l)}for(o=0,r=this.text.length;r>o;o++){t.fillStyle=this.textColor;var g=this.text[o].measure(t,i,this.textItalic,this.textBold,this.textSize,this.textFont,this.textScaling).y,p=this.textSpacing*this.textSize;this.textScaling||(p*=1/i),g+=p,this.text[o].draw(t,i,this.textItalic,this.textBold,this.textSize,this.textFont,this.textAlign,this.textColor,this.textScaling,n,s),n=n.addVector(new Vector2D(0,g))}}else if(null!==this.textReplaceColor){t.fillStyle=this.textReplaceColor;var x;this.textReplace instanceof Vector2D?(x=this.textPos.mulVector(this.size).subVector(this.textReplace.mulVector(this.textAnchor)),t.fillRect(x.x,x.y,this.textReplace.x,this.textReplace.y)):this.textReplace>0&&(x=this.textPos.mul(this.radius).subVector(this.textAnchor.sub(.5).mul(this.textReplace)),t.beginPath(),t.arc(x.x,x.y,this.textReplace,0,2*Math.PI,!1),t.closePath(),t.fill())}}else console.log("[DRAWABLE][drawText]: Could not draw text for",this,"since this.text is null")},this.animate=function(t,i,e,s,h){var o=new Animation(this,this[t],i,e,s,h);this.animations.push(o);var r=this;return o.start(function(i){r[t]=i,r.requestRedraw=!0}),o},this.animateVector=function(t,i,e,s,h){var o=this,r=new Animation(this,this[t].x,i.x,e,s,h),n=new Animation(this,this[t].y,i.y,e,s,h);this.animations.push(r),this.animations.push(n),r.start(function(i){o[t].x=i,o.requestRedraw=!0}),n.start(function(i){o[t].y=i,o.requestRedraw=!0})},this.stopAnimation=function(t){t.stop();var i=this.animations.indexOf(t);i>-1&&this.animations.splice(i,1)},this.stopAnimating=function(){for(var t=this.animations.length-1;t>=0;t--)this.animations[t].stop();this.animations=[]}};Drawable.prototype.setImage=function(t,i){this.img=new Image,this.img.src=t,"function"==typeof i&&this.show&&(this.img.onload=i)},Drawable.prototype.setText=function(t){this.text=[];for(var i=t.split("\n"),e=0,s=i.length;s>e;e++)this.text.push(new Paragraph(i[e]))},Drawable.prototype.interaction=function(t,i){var e=t.subVector(this.pos.rotate(this.rotation).mul(i)),s=0;return 0!==this.radius&&(s=this.radius*i),0!==this.size.length()&&(s=this.size.length()*i),e.length()<=s&&this.show?this:!1};var Canvas=function(t,i,e,s,h,o){this.width=e,this.height=s,this.margin=new Vector2D(t,i),this.ctx=document.getElementById(h).getContext("2d"),this.ctx.canvas.width=e,this.ctx.canvas.height=s,this.center=new Vector2D(e/2,s/2),this.offset=new Vector2D(0,0),this.scale=1,this.objects=o,this.selected=null,this.startPos=new Vector2D(0,0),this.mousePos=new Vector2D(0,0),this.focus=null,this.movingCanvas=null,this.drawCallback=null;var r=this;setInterval(function(){var t=!1;r.ctx.save(),r.ctx.textBaseline="hanging";var i=r.center.addVector(r.offset);r.ctx.setTransform(r.scale,0,0,r.scale,i.x,i.y);for(var e=0,s=r.objects.length;s>e;e++)"function"==typeof r.objects[e].requestRedraw?r.objects[e].requestRedraw()&&(t=!0):r.objects[e].requestRedraw&&(t=!0,r.objects[e].requestRedraw=!1);r.ctx.restore(),t&&r.draw()},10)};Canvas.prototype.clear=function(){this.ctx.clearRect(0,0,this.width,this.height)},Canvas.prototype.draw=function(t){this.clear(),this.ctx.save(),this.ctx.textBaseline="hanging";var i=this.center.addVector(this.offset);this.ctx.setTransform(this.scale,0,0,this.scale,i.x,i.y);var e,s;for(e=0,s=this.objects.length;s>e;e++)"function"==typeof this.objects[e].preDraw&&this.objects[e].preDraw(this.ctx,this.scale);for(e=0,s=this.objects.length;s>e;e++)this.objects[e].draw(this.ctx,this.scale);for(e=0,s=this.objects.length;s>e;e++)"function"==typeof this.objects[e].postDraw&&this.objects[e].postDraw(this.ctx,this.scale);this.ctx.restore(),"function"==typeof t&&t(),"function"==typeof this.drawCallback&&this.drawCallback()},Canvas.prototype.findObjectOnCanvas=function(t){for(var i=!1,e=this.objects.length-1;e>=0;e--){var s=this.objects[e].interaction(this.mousePos,this.scale);if(s!==!1){t(s),i=!0;break}}i||t(null)},Canvas.prototype.moveToCenter=function(t){if(null===this.movingCanvas){var i=this;this.movingCanvas=setInterval(function(){0===i.offset.x&&0===i.offset.y&&(clearInterval(i.movingCanvas),i.movingCanvas=null);var e=i.offset;e=e.div(30),i.offset=i.offset.subVector(e),Math.abs(i.offset.x)<=1&&(i.offset.x=0),Math.abs(i.offset.y)<=1&&(i.offset.y=0),"function"==typeof t&&t(),i.draw()},10)}},Canvas.prototype.interactionStart=function(t,i){clearInterval(this.movingCanvas),this.movingCanvas=null,this.mousePos=new Vector2D(t.pageX,t.pageY),this.mousePos=this.mousePos.subVector(this.margin),this.mousePos=this.mousePos.subVector(this.center),this.mousePos=this.mousePos.subVector(this.offset);var e=this.mousePos,s=this.offset;this.findObjectOnCanvas(function(t){var h=t;null===h&&(h="self",e=e.addVector(s)),"function"==typeof i&&i(h,e)})},Canvas.prototype.interactionMove=function(t,i){var e=new Vector2D(t.pageX,t.pageY);e=e.subVector(this.margin),e=e.subVector(this.center);var s=e.subVector(this.mousePos);this.mousePos=e,"self"===this.selected?(this.startPos=this.startPos.addVector(s),this.offset=this.offset.addVector(s),this.draw()):null!==this.selected&&(this.startPos=this.startPos.addVector(s),this.mousePos=this.mousePos.subVector(this.offset),i(this.selected,this.mousePos.mul(1/this.scale),s.subVector(this.offset)))},Canvas.prototype.interactionStop=function(t){this.startPos.length()<=10?t(!0,this.selected):t(!1,this.selected),this.startPos=new Vector2D(0,0),this.selected=null,this.mousePos=new Vector2D(0,0)};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hdGguanMiLCJhbmltYXRpb24uanMiLCJwYXJhZ3JhcGguanMiLCJkcmF3YWJsZS5qcyIsImNhbnZhcy5qcyJdLCJuYW1lcyI6WyJNYXRoIiwic3F1YXJlIiwieCIsInRvUmFkaWFucyIsIlBJIiwidG9EZWdyZWVzIiwiVmVjdG9yMkQiLCJ5IiwidGhpcyIsInByb3RvdHlwZSIsImxlbmd0aCIsInNxcnQiLCJkb3QiLCJ2MiIsIm5vcm1hbGl6ZSIsImwiLCJhZGQiLCJ6IiwiYWRkVmVjdG9yIiwic3ViIiwic3ViVmVjdG9yIiwibXVsIiwibXVsVmVjdG9yIiwiZGl2IiwiZGl2VmVjdG9yIiwicm90YXRlIiwiYW5nbGUiLCJyIiwiY29zIiwic2luIiwiQW5pbWF0aW9uIiwiZWxlbWVudCIsImZyb20iLCJnb2FsIiwidGltZSIsImVhc2luZyIsImNiIiwiZGlmZmVyZW5jZSIsInBvcyIsImVuZCIsInRpbWVyIiwic3RhcnQiLCJtZSIsInNldEludGVydmFsIiwidmFsIiwibGluZWFyIiwiZWFzZUluIiwiZWFzZU91dCIsImVhc2VJbk91dCIsImNsZWFySW50ZXJ2YWwiLCJzdG9wIiwiYyIsInQiLCJkIiwiYiIsIlBhcmFncmFwaCIsInRleHQiLCJwYXJ0cyIsImNoZWNrRm9yU3R5bGUiLCJnZXRGb250IiwiaXRhbGljIiwiYm9sZCIsInNpemUiLCJmb250IiwiZm9udFRvVGV4dCIsImRyYXciLCJjdHgiLCJzY2FsZSIsImFsaWduIiwiY29sb3IiLCJzY2FsaW5nIiwid2lkdGgiLCJmIiwiaSIsIm1lYXN1cmUiLCJzIiwidGV4dEFsaWduIiwiZmlsbFN0eWxlIiwiZmlsbFRleHQiLCJtZWFzdXJlVGV4dCIsInBhcnRTaXplIiwib3BlbmluZyIsImNsb3NpbmciLCJzdHlsZSIsInRlbXAiLCJzcGxpdCIsInNoaWZ0IiwicHVzaCIsInAiLCJpbmRleE9mIiwidiIsImoiLCJtIiwic3R5bGVkIiwiRHJhd2FibGUiLCJpbWciLCJpbWdGaWxsIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImJvcmRlclNjYWxpbmciLCJ0ZXh0SXRhbGljIiwidGV4dEJvbGQiLCJ0ZXh0U2l6ZSIsInRleHRNaW5TaXplIiwidGV4dEZvbnQiLCJ0ZXh0Q29sb3IiLCJ0ZXh0UG9zIiwidGV4dEFuY2hvciIsInRleHRCYWNrZ3JvdW5kIiwidGV4dFJlcGxhY2UiLCJ0ZXh0UmVwbGFjZUNvbG9yIiwidGV4dFNwYWNpbmciLCJ0ZXh0UGFkZGluZyIsInRleHRTY2FsaW5nIiwib3BhY2l0eSIsInJvdGF0aW9uIiwicmFkaXVzIiwic2hvdyIsInJlcXVlc3RSZWRyYXciLCJhbmltYXRpb25zIiwiZHJhd1JlY3RhbmdsZSIsImZpbGxSZWN0IiwiZHJhd0ltYWdlIiwiaGVpZ2h0IiwiY2xpcCIsImNvbnNvbGUiLCJsb2ciLCJkcmF3Qm9yZGVyIiwic3Ryb2tlU3R5bGUiLCJicmR3IiwibGluZVdpZHRoIiwic3Ryb2tlUmVjdCIsImRyYXdDaXJjbGUiLCJiZWdpblBhdGgiLCJhcmMiLCJjbG9zZVBhdGgiLCJmaWxsIiwiZHJhd0ltYWdlSW5DaXJjbGUiLCJzYXZlIiwicmF0aW8iLCJyZXN0b3JlIiwiZHJhd0JvcmRlckZvckNpcmNsZSIsInN0cm9rZSIsImRyYXdUZXh0IiwidyIsImgiLCJwYXJhZ3JhcGhQb3MiLCJwYXJhZ3JhcGhTaXplIiwic3BhY2luZyIsInBhZGRpbmciLCJibG9ja1NpemUiLCJ0eHRQb3MiLCJibG9ja1BvcyIsInNwYWNlIiwicmVwbGFjZVBvcyIsImFuaW1hdGUiLCJwcm9wZXJ0eSIsInJlc3VsdCIsImFuaW1hdGlvbiIsImFuaW1hdGVWZWN0b3IiLCJhbmltWCIsImFuaW1ZIiwic3RvcEFuaW1hdGlvbiIsImluZGV4Iiwic3BsaWNlIiwic3RvcEFuaW1hdGluZyIsInNldEltYWdlIiwiaW1nU3JjIiwiSW1hZ2UiLCJzcmMiLCJvbmxvYWQiLCJzZXRUZXh0IiwidHh0IiwiaW50ZXJhY3Rpb24iLCJtb3VzZVBvcyIsIm1vdXNlRGlmZmVyZW5jZSIsIkNhbnZhcyIsImVsZW1lbnRJZCIsIm9iamVjdHMiLCJtYXJnaW4iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsImNhbnZhcyIsImNlbnRlciIsIm9mZnNldCIsInNlbGVjdGVkIiwic3RhcnRQb3MiLCJmb2N1cyIsIm1vdmluZ0NhbnZhcyIsImRyYXdDYWxsYmFjayIsInJlZHJhdyIsInRleHRCYXNlbGluZSIsInNldFRyYW5zZm9ybSIsImNsZWFyIiwiY2xlYXJSZWN0IiwicHJlRHJhdyIsInBvc3REcmF3IiwiZmluZE9iamVjdE9uQ2FudmFzIiwiZm91bmQiLCJvIiwibW92ZVRvQ2VudGVyIiwiYWJzIiwiaW50ZXJhY3Rpb25TdGFydCIsImUiLCJwYWdlWCIsInBhZ2VZIiwiaW50ZXJhY3Rpb25Nb3ZlIiwibmV3UG9zIiwiaW50ZXJhY3Rpb25TdG9wIl0sIm1hcHBpbmdzIjoiQUFBQUEsS0FBQUMsT0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFBLEdBR0FGLEtBQUFHLFVBQUEsU0FBQUQsR0FDQSxNQUFBQSxHQUFBRixLQUFBSSxHQUFBLEtBR0FKLEtBQUFLLFVBQUEsU0FBQUgsR0FDQSxNQUFBLEtBQUFBLEVBQUFGLEtBQUFJLEdBR0EsSUFBQUUsVUFBQSxTQUFBSixFQUFBSyxHQUNBQyxLQUFBTixFQUFBQSxFQUNBTSxLQUFBRCxFQUFBQSxFQUdBRCxVQUFBRyxXQUNBQyxPQUFBLFdBQ0EsTUFBQVYsTUFBQVcsS0FBQVgsS0FBQUMsT0FBQU8sS0FBQU4sR0FBQUYsS0FBQUMsT0FBQU8sS0FBQUQsS0FFQUssSUFBQSxTQUFBQyxHQUNBLE1BQUFMLE1BQUFOLEVBQUFXLEVBQUFYLEVBQUFNLEtBQUFELEVBQUFNLEVBQUFOLEdBRUFPLFVBQUEsV0FDQSxHQUFBQyxHQUFBUCxLQUFBRSxRQUNBRixNQUFBTixHQUFBYSxFQUNBUCxLQUFBRCxHQUFBUSxHQUVBQyxJQUFBLFNBQUFDLEdBQ0EsTUFBQSxJQUFBWCxVQUFBRSxLQUFBTixFQUFBZSxFQUFBVCxLQUFBRCxFQUFBVSxJQUVBQyxV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S0FBQXNLLFNBQUEsR0FBQXhLLFVBQUEsRUFBQSIsImZpbGUiOiJjYW52YXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiTWF0aC5zcXVhcmUgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHggKiB4O1xufTtcblxuTWF0aC50b1JhZGlhbnMgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuICh4ICogTWF0aC5QSSkgLyAxODA7XG59O1xuXG5NYXRoLnRvRGVncmVlcyA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gKHggKiAxODApIC8gTWF0aC5QSTtcbn07XG5cbnZhciBWZWN0b3IyRCA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG59O1xuXG5WZWN0b3IyRC5wcm90b3R5cGUgPSB7XG4gICAgbGVuZ3RoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnNxdWFyZSh0aGlzLngpICsgTWF0aC5zcXVhcmUodGhpcy55KSk7XG4gICAgfSxcbiAgICBkb3Q6IGZ1bmN0aW9uKHYyKSB7XG4gICAgICAgIHJldHVybiAodGhpcy54ICogdjIueCkgKyAodGhpcy55ICogdjIueSk7XG4gICAgfSxcbiAgICBub3JtYWxpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbCA9IHRoaXMubGVuZ3RoKCk7XG4gICAgICAgIHRoaXMueCAvPSBsO1xuICAgICAgICB0aGlzLnkgLz0gbDtcbiAgICB9LFxuICAgIGFkZDogZnVuY3Rpb24oeikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHRoaXMueCArIHosIHRoaXMueSArIHopO1xuICAgIH0sXG4gICAgYWRkVmVjdG9yOiBmdW5jdGlvbih2Mikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHRoaXMueCArIHYyLngsIHRoaXMueSArIHYyLnkpO1xuICAgIH0sXG4gICAgc3ViOiBmdW5jdGlvbih6KSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMkQodGhpcy54IC0geiwgdGhpcy55IC0geik7XG4gICAgfSxcbiAgICBzdWJWZWN0b3I6IGZ1bmN0aW9uKHYyKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMkQodGhpcy54IC0gdjIueCwgdGhpcy55IC0gdjIueSk7XG4gICAgfSxcbiAgICBtdWw6IGZ1bmN0aW9uKHopIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyRCh0aGlzLnggKiB6LCB0aGlzLnkgKiB6KTtcbiAgICB9LFxuICAgIG11bFZlY3RvcjogZnVuY3Rpb24odjIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyRCh0aGlzLnggKiB2Mi54LCB0aGlzLnkgKiB2Mi55KTtcbiAgICB9LFxuICAgIGRpdjogZnVuY3Rpb24oeikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHRoaXMueCAvIHosIHRoaXMueSAvIHopO1xuICAgIH0sXG4gICAgZGl2VmVjdG9yOiBmdW5jdGlvbih2Mikge1xuICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjJEKHRoaXMueCAvIHYyLngsIHRoaXMueSAvIHYyLnkpO1xuICAgIH0sXG4gICAgcm90YXRlOiBmdW5jdGlvbihhbmdsZSkge1xuICAgICAgICB2YXIgciA9IE1hdGgudG9SYWRpYW5zKGFuZ2xlKTtcbiAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKHIpO1xuICAgICAgICB2YXIgc2luID0gTWF0aC5zaW4ocik7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMkQoKHRoaXMueCAqIGNvcykgLSAodGhpcy55ICogc2luKSwgKHRoaXMueCAqIHNpbikgKyAodGhpcy55ICogY29zKSk7XG4gICAgfVxufTsiLCJ2YXIgQW5pbWF0aW9uID0gZnVuY3Rpb24oZWxlbWVudCwgZnJvbSwgZ29hbCwgdGltZSwgZWFzaW5nLCBjYikge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICB0aGlzLmRpZmZlcmVuY2UgPSBnb2FsIC0gZnJvbTtcblxuICAgIHRoaXMuZWFzaW5nID0gZWFzaW5nO1xuICAgIHRoaXMuY2IgPSBjYjtcblxuICAgIHRoaXMucG9zID0gMDtcbiAgICB0aGlzLmVuZCA9IHRpbWUgLyAxMDtcbiAgICB0aGlzLnRpbWVyID0gbnVsbDtcbn07XG5cbkFuaW1hdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbihjYikge1xuICAgIHZhciBtZSA9IHRoaXM7XG4gICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICBtZS5wb3MrKztcbiAgICAgICAgdmFyIHZhbCA9IDA7XG4gICAgICAgIHN3aXRjaChtZS5lYXNpbmcpIHtcbiAgICAgICAgICAgIGNhc2UgXCJsaW5lYXJcIjpcbiAgICAgICAgICAgICAgICB2YWwgPSBtZS5saW5lYXIobWUuZGlmZmVyZW5jZSwgbWUucG9zLCBtZS5lbmQsIG1lLmZyb20pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVhc2VJblwiOlxuICAgICAgICAgICAgICAgIHZhbCA9IG1lLmVhc2VJbihtZS5kaWZmZXJlbmNlLCBtZS5wb3MsIG1lLmVuZCwgbWUuZnJvbSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZWFzZU91dFwiOlxuICAgICAgICAgICAgICAgIHZhbCA9IG1lLmVhc2VPdXQobWUuZGlmZmVyZW5jZSwgbWUucG9zLCBtZS5lbmQsIG1lLmZyb20pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImVhc2VJbk91dFwiOlxuICAgICAgICAgICAgICAgIHZhbCA9IG1lLmVhc2VJbk91dChtZS5kaWZmZXJlbmNlLCBtZS5wb3MsIG1lLmVuZCwgbWUuZnJvbSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2IodmFsKTtcbiAgICAgICAgaWYobWUucG9zID49IG1lLmVuZCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChtZS50aW1lcik7XG4gICAgICAgICAgICBtZS50aW1lciA9IG51bGw7XG4gICAgICAgICAgICBtZS5wb3MgPSAwO1xuICAgICAgICAgICAgaWYodHlwZW9mIG1lLmNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgbWUuY2IodHJ1ZSwgbWUuZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCAxMCk7XG59O1xuXG5BbmltYXRpb24ucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpO1xuICAgIHRoaXMudGltZXIgPSBudWxsO1xuICAgIGlmKHR5cGVvZiB0aGlzLmNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuY2IoZmFsc2UsIHRoaXMuZWxlbWVudCk7XG4gICAgfVxufTtcblxuQW5pbWF0aW9uLnByb3RvdHlwZS5saW5lYXIgPSBmdW5jdGlvbihjLCB0LCBkLCBiKSB7XG4gICAgcmV0dXJuIChjICogdCAvIGQgKyBiKTtcbn07XG5cbkFuaW1hdGlvbi5wcm90b3R5cGUuZWFzZUluID0gZnVuY3Rpb24oYywgdCwgZCwgYikge1xuICAgIHQgLz0gZDtcbiAgICByZXR1cm4gKGMgKiB0ICogdCArIGIpO1xufTtcblxuQW5pbWF0aW9uLnByb3RvdHlwZS5lYXNlT3V0ID0gZnVuY3Rpb24oYywgdCwgZCwgYikge1xuICAgIHQgLz0gZDtcbiAgICByZXR1cm4gKC1jICogdCAqICh0LTIpICsgYik7XG59O1xuXG5BbmltYXRpb24ucHJvdG90eXBlLmVhc2VJbk91dCA9IGZ1bmN0aW9uKGMsIHQsIGQsIGIpIHtcbiAgICB0IC89IGQgLyAyO1xuICAgIGlmICh0IDwgMSkge1xuICAgICAgICByZXR1cm4gKGMvMip0KnQgKyBiKTtcbiAgICB9XG4gICAgdC0tO1xuICAgIHJldHVybiAoLWMgLyAyICogKHQgKiAodCAtIDIpIC0gMSkgKyBiKTtcbn07IiwidmFyIFBhcmFncmFwaCA9IGZ1bmN0aW9uKHRleHQpIHtcbiAgICB0aGlzLnBhcnRzID0gW107XG5cbiAgICBpZighdGhpcy5jaGVja0ZvclN0eWxlKHRleHQsIFwiW2ldXCIsIFwiWy9pXVwiLCBcIml0YWxpY1wiKSkge1xuICAgICAgICBpZighdGhpcy5jaGVja0ZvclN0eWxlKHRleHQsIFwiW2JdXCIsIFwiWy9iXVwiLCBcImJvbGRcIikpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLmNoZWNrRm9yU3R5bGUodGV4dCwgXCJbc2l6ZT1cIiwgXCJbL3NpemVdXCIsIFwic2l6ZVwiKSkge1xuICAgICAgICAgICAgICAgIGlmKCF0aGlzLmNoZWNrRm9yU3R5bGUodGV4dCwgXCJbZm9udD1cIiwgXCJbL2ZvbnRdXCIsIFwiZm9udFwiKSkge1xuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy5jaGVja0ZvclN0eWxlKHRleHQsIFwiW2FsaWduPVwiLCBcIlsvYWxpZ25dXCIsIFwiYWxpZ25cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF0aGlzLmNoZWNrRm9yU3R5bGUodGV4dCwgXCJbY29sb3I9XCIsIFwiWy9jb2xvcl1cIiwgXCJjb2xvclwiKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFydHMgPSBbdGV4dF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5QYXJhZ3JhcGgucHJvdG90eXBlLmdldEZvbnQgPSBmdW5jdGlvbihpdGFsaWMsIGJvbGQsIHNpemUsIGZvbnQpIHtcbiAgICBpZih0eXBlb2YgdGhpcy5pdGFsaWMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0YWxpYyA9IHRoaXMuaXRhbGljO1xuICAgIH1cbiAgICBpZih0eXBlb2YgdGhpcy5ib2xkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBib2xkID0gdGhpcy5ib2xkO1xuICAgIH1cbiAgICBpZih0eXBlb2YgdGhpcy5zaXplICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzaXplID0gdGhpcy5zaXplO1xuICAgIH1cbiAgICBpZih0eXBlb2YgdGhpcy5mb250ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBmb250ID0gdGhpcy5mb250O1xuICAgIH1cbiAgICByZXR1cm4gW2l0YWxpYywgYm9sZCwgc2l6ZSwgZm9udF07XG59O1xuXG5QYXJhZ3JhcGgucHJvdG90eXBlLmZvbnRUb1RleHQgPSBmdW5jdGlvbihpdGFsaWMsIGJvbGQsIHNpemUsIGZvbnQpIHtcbiAgICB2YXIgdCA9IFwiXCI7XG4gICAgaWYoaXRhbGljKSB7XG4gICAgICAgIHQgKz0gXCJpdGFsaWMgXCI7XG4gICAgfVxuICAgIGlmKGJvbGQpIHtcbiAgICAgICAgdCArPSBcImJvbGQgXCI7XG4gICAgfVxuICAgIHQgKz0gc2l6ZSArIFwicHQgXCIgKyBmb250O1xuICAgIHJldHVybiB0O1xufTtcblxuUGFyYWdyYXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oY3R4LCBzY2FsZSwgaXRhbGljLCBib2xkLCBzaXplLCBmb250LCBhbGlnbiwgY29sb3IsIHNjYWxpbmcsIHBvcywgd2lkdGgpIHtcbiAgICB2YXIgZiA9IHRoaXMuZ2V0Rm9udChpdGFsaWMsIGJvbGQsIHNpemUsIGZvbnQpO1xuICAgIHZhciB4ID0gcG9zLng7XG4gICAgaWYodHlwZW9mIHRoaXMuYWxpZ24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGFsaWduID0gdGhpcy5hbGlnbjtcbiAgICB9XG4gICAgaWYodHlwZW9mIHRoaXMuY29sb3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbG9yID0gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgaWYodGhpcy5wYXJ0cy5sZW5ndGggPT09IDEgJiYgISh0aGlzLnBhcnRzWzBdIGluc3RhbmNlb2YgUGFyYWdyYXBoKSkge1xuICAgICAgICBpZighc2NhbGluZykge1xuICAgICAgICAgICAgZlsyXSAqPSAxIC8gc2NhbGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYoYWxpZ24gPT09IFwiY2VudGVyXCIpIHtcbiAgICAgICAgICAgIHBvcyA9IHBvcy5hZGRWZWN0b3IobmV3IFZlY3RvcjJEKHdpZHRoLCAwKS5tdWwoLjUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZihhbGlnbiA9PT0gXCJyaWdodFwiKSB7XG4gICAgICAgICAgICBwb3MgPSBwb3MuYWRkVmVjdG9yKG5ldyBWZWN0b3IyRCh3aWR0aCwgMCkpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5mb250ID0gdGhpcy5mb250VG9UZXh0KGZbMF0sIGZbMV0sIGZbMl0sIGZbM10pO1xuICAgICAgICBjdHgudGV4dEFsaWduID0gYWxpZ247XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgY3R4LmZpbGxUZXh0KHRoaXMucGFydHNbMF0sIHBvcy54LCBwb3MueSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLnBhcnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMucGFydHNbaV0uZHJhdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFydHNbaV0uZHJhdyhjdHgsIHNjYWxlLCBmWzBdLCBmWzFdLCBmWzJdLCBmWzNdLCBhbGlnbiwgY29sb3IsIHNjYWxpbmcsIHBvcywgd2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGhpcy5wYXJ0c1tpXS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgdGhpcy5wYXJ0c1tpXS5tZWFzdXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5wYXJ0c1tpXS5tZWFzdXJlKGN0eCwgc2NhbGUsIGZbMF0sIGZbMV0sIGZbMl0sIGZbM10sIHNjYWxpbmcpO1xuICAgICAgICAgICAgICAgICAgICBwb3MueCArPSBzLng7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBvcy54ID0geDtcbiAgICB9XG59O1xuXG5QYXJhZ3JhcGgucHJvdG90eXBlLm1lYXN1cmUgPSBmdW5jdGlvbihjdHgsIHNjYWxlLCBpdGFsaWMsIGJvbGQsIHNpemUsIGZvbnQsIHNjYWxpbmcpIHtcbiAgICB2YXIgcyA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB2YXIgZiA9IHRoaXMuZ2V0Rm9udChpdGFsaWMsIGJvbGQsIHNpemUsIGZvbnQpO1xuICAgIGlmKHRoaXMucGFydHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGlmKCFzY2FsaW5nKSB7XG4gICAgICAgICAgICBmWzJdICo9IDEgLyBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBjdHguZm9udCA9IHRoaXMuZm9udFRvVGV4dChmWzBdLCBmWzFdLCBmWzJdLCBmWzNdKTtcbiAgICAgICAgcy55ID0gZlsyXTtcbiAgICAgICAgcy54ID0gY3R4Lm1lYXN1cmVUZXh0KHRoaXMucGFydHNbMF0pLndpZHRoO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5wYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLnBhcnRzW2ldLm1lYXN1cmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFydFNpemUgPSB0aGlzLnBhcnRzW2ldLm1lYXN1cmUoY3R4LCBzY2FsZSwgZlswXSwgZlsxXSwgZlsyXSwgZlszXSwgc2NhbGluZyk7XG4gICAgICAgICAgICAgICAgaWYocGFydFNpemUueSA+IHMueSkge1xuICAgICAgICAgICAgICAgICAgICBzLnkgPSBwYXJ0U2l6ZS55O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzLnggKz0gcGFydFNpemUueDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcztcbn07XG5cblBhcmFncmFwaC5wcm90b3R5cGUuY2hlY2tGb3JTdHlsZSA9IGZ1bmN0aW9uKHRleHQsIG9wZW5pbmcsIGNsb3NpbmcsIHN0eWxlKSB7XG4gICAgdmFyIHRlbXAgPSB0ZXh0LnNwbGl0KG9wZW5pbmcpO1xuICAgIGlmKHRlbXAubGVuZ3RoID49IDIpIHtcbiAgICAgICAgdmFyIHQgPSB0ZW1wLnNoaWZ0KCk7XG4gICAgICAgIGlmKHQubGVuZ3RoID4gMCAmJiAhKHQgaW5zdGFuY2VvZiBQYXJhZ3JhcGgpKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2gobmV3IFBhcmFncmFwaCh0KSk7XG4gICAgICAgIH0gZWxzZSBpZih0IGluc3RhbmNlb2YgUGFyYWdyYXBoKSB7XG4gICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2godCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9IHRlbXAubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHRlbXBbaV0uc3BsaXQoY2xvc2luZyk7XG4gICAgICAgICAgICBpZihvcGVuaW5nLmluZGV4T2YoXCI9XCIpID4gLTEpIHtcbiAgICAgICAgICAgICAgICBwWzBdID0gcFswXS5zcGxpdChcIl1cIik7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBwWzBdLnNoaWZ0KCk7XG4gICAgICAgICAgICAgICAgdmFyIHNwbGl0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwLCBtID0gcFswXS5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgc3BsaXQgKz0gcFswXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYoaiA8IG0gLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGxpdCArPSBcIl1cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwWzBdID0gc3BsaXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3R5bGVkID0gbmV3IFBhcmFncmFwaChwWzBdKTtcblxuICAgICAgICAgICAgaWYocFsxXS5sZW5ndGggPT09IDAgJiYgIShwWzFdIGluc3RhbmNlb2YgUGFyYWdyYXBoKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaChzdHlsZWQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHBbMV0gaW5zdGFuY2VvZiBQYXJhZ3JhcGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goc3R5bGVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2gocFsxXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaChzdHlsZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMucGFydHMucHVzaChuZXcgUGFyYWdyYXBoKHBbMV0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN3aXRjaChzdHlsZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJpdGFsaWNcIjpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVkLml0YWxpYyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJib2xkXCI6XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlZC5ib2xkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNpemVcIjpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVkLnNpemUgPSB2O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZm9udFwiOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZWQuZm9udCA9IHY7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJhbGlnblwiOlxuICAgICAgICAgICAgICAgICAgICBzdHlsZWQuYWxpZ24gPSB2O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY29sb3JcIjpcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVkLmNvbG9yID0gdjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn07IiwidmFyIERyYXdhYmxlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jb2xvciA9IFwiIzAwMDAwMFwiO1xuICAgIHRoaXMuaW1nID0gbnVsbDtcbiAgICB0aGlzLmltZ0ZpbGwgPSB0cnVlO1xuICAgIHRoaXMuc2NhbGUgPSB0cnVlO1xuXG4gICAgdGhpcy5ib3JkZXJDb2xvciA9IFwiIzAwMDAwMFwiO1xuICAgIHRoaXMuYm9yZGVyV2lkdGggPSAwO1xuICAgIHRoaXMuYm9yZGVyU2NhbGluZyA9IHRydWU7XG5cbiAgICB0aGlzLnRleHQgPSBbXTtcbiAgICB0aGlzLnRleHRJdGFsaWMgPSBmYWxzZTtcbiAgICB0aGlzLnRleHRCb2xkID0gZmFsc2U7XG4gICAgdGhpcy50ZXh0U2l6ZSA9IDA7XG4gICAgdGhpcy50ZXh0TWluU2l6ZSA9IDY7XG4gICAgdGhpcy50ZXh0Rm9udCA9IFwiQXJpYWxcIjtcbiAgICB0aGlzLnRleHRBbGlnbiA9IFwibGVmdFwiO1xuICAgIHRoaXMudGV4dENvbG9yID0gXCIjMDAwMDAwXCI7XG4gICAgdGhpcy50ZXh0UG9zID0gbmV3IFZlY3RvcjJEKDAsIDApO1xuICAgIHRoaXMudGV4dEFuY2hvciA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB0aGlzLnRleHRCYWNrZ3JvdW5kID0gbnVsbDtcbiAgICB0aGlzLnRleHRSZXBsYWNlID0gMjA7XG4gICAgdGhpcy50ZXh0UmVwbGFjZUNvbG9yID0gbnVsbDtcbiAgICB0aGlzLnRleHRTcGFjaW5nID0gMS4yO1xuICAgIHRoaXMudGV4dFBhZGRpbmcgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG4gICAgdGhpcy50ZXh0U2NhbGluZyA9IHRydWU7XG5cbiAgICB0aGlzLm9wYWNpdHkgPSAxO1xuICAgIHRoaXMucm90YXRpb24gPSAwO1xuICAgIHRoaXMucG9zID0gbmV3IFZlY3RvcjJEKDAsIDApO1xuICAgIHRoaXMucmFkaXVzID0gMDtcbiAgICB0aGlzLnNpemUgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG5cbiAgICB0aGlzLnNob3cgPSB0cnVlO1xuICAgIHRoaXMucmVxdWVzdFJlZHJhdyA9IGZhbHNlO1xuICAgIHRoaXMuYW5pbWF0aW9ucyA9IFtdO1xuXG4gICAgdGhpcy5kcmF3UmVjdGFuZ2xlID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xuICAgICAgICB2YXIgcCA9IG5ldyBWZWN0b3IyRCgwLCAwKS5zdWJWZWN0b3IodGhpcy5zaXplLmRpdigyKSk7XG4gICAgICAgIGN0eC5maWxsUmVjdChwLngsIHAueSwgdGhpcy5zaXplLngsIHRoaXMuc2l6ZS55KTtcbiAgICB9O1xuICAgIHRoaXMuZHJhd0ltYWdlID0gZnVuY3Rpb24oY3R4KSB7XG4gICAgICAgIGlmKHRoaXMuaW1nICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgZGl2ID0gMDtcbiAgICAgICAgICAgIGlmKHRoaXMuaW1nRmlsbCkge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuaW1nLndpZHRoID4gdGhpcy5pbWcuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IHRoaXMuaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkaXYgPSB0aGlzLmltZy53aWR0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuaW1nLndpZHRoID4gdGhpcy5pbWcuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IHRoaXMuaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IHRoaXMuaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xpcCA9IG5ldyBWZWN0b3IyRCh0aGlzLmltZy53aWR0aCwgdGhpcy5pbWcuaGVpZ2h0KS5kaXYoZGl2KS5tdWxWZWN0b3IodGhpcy5zaXplKS5zdWJWZWN0b3IodGhpcy5zaXplKS5tdWwoLS41KTtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFZlY3RvcjJEKDAsIDApLnN1YlZlY3Rvcih0aGlzLnNpemUuZGl2KDIpKTtcbiAgICAgICAgICAgIGlmKCF0aGlzLnNjYWxlKSB7XG4gICAgICAgICAgICAgICAgY2xpcC5tdWwoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZSh0aGlzLmltZywgY2xpcC54LCBjbGlwLnksIHRoaXMuc2l6ZS54LCB0aGlzLnNpemUueSwgcC54LCBwLnksIHRoaXMuc2l6ZS54LCB0aGlzLnNpemUueSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIltEUkFXQUJMRV1bZHJhd0ltYWdlXTogQ291bGQgbm90IGRyYXcgaW1hZ2UgZm9yXCIsIHRoaXMsIFwic2luY2UgdGhpcy5pbWcgaXMgbnVsbFwiKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5kcmF3Qm9yZGVyID0gZnVuY3Rpb24oY3R4LCBzY2FsZSkge1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGlzLmJvcmRlckNvbG9yO1xuICAgICAgICB2YXIgYnJkdyA9IHRoaXMuYm9yZGVyV2lkdGg7XG4gICAgICAgIGlmKCF0aGlzLmJvcmRlclNjYWxpbmcpIHtcbiAgICAgICAgICAgIGJyZHcgKj0gMSAvIHNjYWxlO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBicmR3O1xuICAgICAgICB2YXIgcCA9IG5ldyBWZWN0b3IyRCgwLCAwKS5zdWJWZWN0b3IodGhpcy5zaXplLmRpdigyKSk7XG4gICAgICAgIGN0eC5zdHJva2VSZWN0KHAueCwgcC55LCB0aGlzLnNpemUueCwgdGhpcy5zaXplLnkpO1xuICAgIH07XG5cbiAgICB0aGlzLmRyYXdDaXJjbGUgPSBmdW5jdGlvbihjdHgpIHtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMuY29sb3I7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LmFyYygwLCAwLCB0aGlzLnJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgIH07XG4gICAgdGhpcy5kcmF3SW1hZ2VJbkNpcmNsZSA9IGZ1bmN0aW9uKGN0eCkge1xuICAgICAgICBpZih0aGlzLmltZyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5hcmMoMCwgMCwgdGhpcy5yYWRpdXMsIDAsIE1hdGguUEkgKiAyLCB0cnVlKTtcbiAgICAgICAgICAgIGN0eC5jbGlwKCk7XG4gICAgICAgICAgICB2YXIgZGl2ID0gMTtcbiAgICAgICAgICAgIHZhciBwID0gbmV3IFZlY3RvcjJEKDAsIDApLnN1Yih0aGlzLnJhZGl1cyk7XG4gICAgICAgICAgICB2YXIgcyA9IG5ldyBWZWN0b3IyRCh0aGlzLnJhZGl1cywgdGhpcy5yYWRpdXMpLm11bCgyKTtcbiAgICAgICAgICAgIHZhciBjbGlwID0gbmV3IFZlY3RvcjJEKDAsIDApO1xuICAgICAgICAgICAgaWYodGhpcy5pbWdGaWxsKSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy5pbWcud2lkdGggPiB0aGlzLmltZy5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2ID0gdGhpcy5pbWcuaGVpZ2h0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IHRoaXMuaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjbGlwID0gbmV3IFZlY3RvcjJEKHRoaXMuaW1nLndpZHRoLCB0aGlzLmltZy5oZWlnaHQpLmRpdihkaXYpLnN1YigxKS5tdWwoZGl2KS5kaXYoMik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmKHRoaXMuaW1nLndpZHRoID4gdGhpcy5pbWcuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IHRoaXMuaW1nLndpZHRoO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRpdiA9IHRoaXMuaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gbmV3IFZlY3RvcjJEKHRoaXMuaW1nLndpZHRoLCB0aGlzLmltZy5oZWlnaHQpLmRpdihkaXYpLnN1YigxKS5tdWwoLTEpO1xuICAgICAgICAgICAgICAgIGlmKHJhdGlvLnggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmF0aW8ueCA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmKHJhdGlvLnkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmF0aW8ueSA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMgPSBuZXcgVmVjdG9yMkQodGhpcy5pbWcud2lkdGgsIHRoaXMuaW1nLmhlaWdodCkuZGl2KGRpdikubXVsVmVjdG9yKHMpO1xuICAgICAgICAgICAgICAgIHAgPSBwLnN1YlZlY3RvcihyYXRpby5tdWxWZWN0b3IocykuZGl2KDIpKTtcbiAgICAgICAgICAgICAgICBwID0gcC5hZGRWZWN0b3IocmF0aW8ubXVsKHRoaXMucmFkaXVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKHRoaXMuaW1nLCBjbGlwLngsIGNsaXAueSwgdGhpcy5pbWcud2lkdGggLSAoY2xpcC54ICogMiksIHRoaXMuaW1nLmhlaWdodCAtIChjbGlwLnkgKiAyKSwgcC54LCBwLnksIHMueCwgcy55KTtcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIltEUkFXQUJMRV1bZHJhd0ltYWdlSW5DaXJjbGVdOiBDb3VsZCBub3QgZHJhdyBpbWFnZSBmb3JcIiwgdGhpcywgXCJzaW5jZSB0aGlzLmltZyBpcyBudWxsXCIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmRyYXdCb3JkZXJGb3JDaXJjbGUgPSBmdW5jdGlvbihjdHgsIHNjYWxlKSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gdGhpcy5ib3JkZXJDb2xvcjtcbiAgICAgICAgdmFyIGJyZHcgPSB0aGlzLmJvcmRlcldpZHRoO1xuICAgICAgICBpZighdGhpcy5ib3JkZXJTY2FsaW5nKSB7XG4gICAgICAgICAgICBicmR3ICo9IDEgLyBzY2FsZTtcbiAgICAgICAgfVxuICAgICAgICBjdHgubGluZVdpZHRoID0gYnJkdztcbiAgICAgICAgY3R4LmFyYygwLCAwLCB0aGlzLnJhZGl1cywgMCwgTWF0aC5QSSAqIDIsIHRydWUpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5kcmF3VGV4dCA9IGZ1bmN0aW9uKGN0eCwgc2NhbGUpIHtcbiAgICAgICAgaWYodGhpcy50ZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgdGV4dFNpemUgPSB0aGlzLnRleHRTaXplO1xuICAgICAgICAgICAgaWYodGhpcy50ZXh0U2NhbGluZykge1xuICAgICAgICAgICAgICAgIHRleHRTaXplICo9IHNjYWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGV4dFNpemUgPj0gdGhpcy50ZXh0TWluU2l6ZSkge1xuICAgICAgICAgICAgICAgIHZhciB3ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBsID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYWdyYXBoUG9zID0gbmV3IFZlY3RvcjJEKDAsIDApO1xuICAgICAgICAgICAgICAgIGZvcihsID0gdGhpcy50ZXh0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYWdyYXBoU2l6ZSA9IHRoaXMudGV4dFtpXS5tZWFzdXJlKGN0eCwgc2NhbGUsIHRoaXMudGV4dEl0YWxpYywgdGhpcy50ZXh0Qm9sZCwgdGhpcy50ZXh0U2l6ZSwgdGhpcy50ZXh0Rm9udCwgdGhpcy50ZXh0U2NhbGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJhZ3JhcGhTaXplLnggPiB3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3ID0gcGFyYWdyYXBoU2l6ZS54O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGggKz0gcGFyYWdyYXBoU2l6ZS55O1xuICAgICAgICAgICAgICAgICAgICBpZiAobCAtIGkgPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2luZyA9IHRoaXMudGV4dFNwYWNpbmcgKiB0aGlzLnRleHRTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRleHRTY2FsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2luZyAqPSAxIC8gc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBoICs9IHNwYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGhpcy50ZXh0QmFja2dyb3VuZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy50ZXh0QmFja2dyb3VuZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZGRpbmcgPSB0aGlzLnRleHRQYWRkaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZighdGhpcy50ZXh0U2NhbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZyA9IHBhZGRpbmcubXVsKDEgLyBzY2FsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrU2l6ZSA9IHBhZGRpbmcubXVsKDIpLmFkZFZlY3RvcihuZXcgVmVjdG9yMkQodywgaCkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHh0UG9zID0gdGhpcy50ZXh0UG9zO1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnJhZGl1cyAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHh0UG9zID0gdHh0UG9zLm11bCh0aGlzLnJhZGl1cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5zaXplLmxlbmd0aCgpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eHRQb3MgPSB0eHRQb3MubXVsVmVjdG9yKHRoaXMuc2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrUG9zID0gdHh0UG9zLnN1YlZlY3RvcihibG9ja1NpemUubXVsVmVjdG9yKHRoaXMudGV4dEFuY2hvcikpO1xuICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoYmxvY2tQb3MueCwgYmxvY2tQb3MueSwgYmxvY2tTaXplLngsIGJsb2NrU2l6ZS55KTtcbiAgICAgICAgICAgICAgICAgICAgcGFyYWdyYXBoUG9zID0gYmxvY2tQb3MuYWRkVmVjdG9yKHBhZGRpbmcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IoaSA9IDAsIGwgPSB0aGlzLnRleHQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLnRleHRDb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMudGV4dFtpXS5tZWFzdXJlKGN0eCwgc2NhbGUsIHRoaXMudGV4dEl0YWxpYywgdGhpcy50ZXh0Qm9sZCwgdGhpcy50ZXh0U2l6ZSwgdGhpcy50ZXh0Rm9udCwgdGhpcy50ZXh0U2NhbGluZykueTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwYWNlID0gdGhpcy50ZXh0U3BhY2luZyAqIHRoaXMudGV4dFNpemU7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy50ZXh0U2NhbGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3BhY2UgKj0gMSAvIHNjYWxlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGhlaWdodCArPSBzcGFjZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0W2ldLmRyYXcoY3R4LCBzY2FsZSwgdGhpcy50ZXh0SXRhbGljLCB0aGlzLnRleHRCb2xkLCB0aGlzLnRleHRTaXplLCB0aGlzLnRleHRGb250LCB0aGlzLnRleHRBbGlnbiwgdGhpcy50ZXh0Q29sb3IsIHRoaXMudGV4dFNjYWxpbmcsIHBhcmFncmFwaFBvcywgdyk7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFncmFwaFBvcyA9IHBhcmFncmFwaFBvcy5hZGRWZWN0b3IobmV3IFZlY3RvcjJEKDAsIGhlaWdodCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYodGhpcy50ZXh0UmVwbGFjZUNvbG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGlzLnRleHRSZXBsYWNlQ29sb3I7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXBsYWNlUG9zO1xuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRleHRSZXBsYWNlIGluc3RhbmNlb2YgVmVjdG9yMkQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VQb3MgPSB0aGlzLnRleHRQb3MubXVsVmVjdG9yKHRoaXMuc2l6ZSkuc3ViVmVjdG9yKHRoaXMudGV4dFJlcGxhY2UubXVsVmVjdG9yKHRoaXMudGV4dEFuY2hvcikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHJlcGxhY2VQb3MueCwgcmVwbGFjZVBvcy55LCB0aGlzLnRleHRSZXBsYWNlLngsIHRoaXMudGV4dFJlcGxhY2UueSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLnRleHRSZXBsYWNlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZVBvcyA9IHRoaXMudGV4dFBvcy5tdWwodGhpcy5yYWRpdXMpLnN1YlZlY3Rvcih0aGlzLnRleHRBbmNob3Iuc3ViKDAuNSkubXVsKHRoaXMudGV4dFJlcGxhY2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5hcmMocmVwbGFjZVBvcy54LCByZXBsYWNlUG9zLnksIHRoaXMudGV4dFJlcGxhY2UsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJbRFJBV0FCTEVdW2RyYXdUZXh0XTogQ291bGQgbm90IGRyYXcgdGV4dCBmb3JcIiwgdGhpcywgXCJzaW5jZSB0aGlzLnRleHQgaXMgbnVsbFwiKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmFuaW1hdGUgPSBmdW5jdGlvbihwcm9wZXJ0eSwgcmVzdWx0LCB0aW1lLCBlYXNpbmcsIGNiKSB7XG4gICAgICAgIHZhciBhbmltYXRpb24gPSBuZXcgQW5pbWF0aW9uKHRoaXMsIHRoaXNbcHJvcGVydHldLCByZXN1bHQsIHRpbWUsIGVhc2luZywgY2IpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaChhbmltYXRpb24pO1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICBhbmltYXRpb24uc3RhcnQoZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICBtZVtwcm9wZXJ0eV0gPSB2YWw7XG4gICAgICAgICAgICBtZS5yZXF1ZXN0UmVkcmF3ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbmltYXRpb247XG4gICAgfTtcbiAgICB0aGlzLmFuaW1hdGVWZWN0b3IgPSBmdW5jdGlvbihwcm9wZXJ0eSwgcmVzdWx0LCB0aW1lLCBlYXNpbmcsIGNiKSB7XG4gICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgIHZhciBhbmltWCA9IG5ldyBBbmltYXRpb24odGhpcywgdGhpc1twcm9wZXJ0eV0ueCwgcmVzdWx0LngsIHRpbWUsIGVhc2luZywgY2IpO1xuICAgICAgICB2YXIgYW5pbVkgPSBuZXcgQW5pbWF0aW9uKHRoaXMsIHRoaXNbcHJvcGVydHldLnksIHJlc3VsdC55LCB0aW1lLCBlYXNpbmcsIGNiKTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLnB1c2goYW5pbVgpO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbnMucHVzaChhbmltWSk7XG4gICAgICAgIGFuaW1YLnN0YXJ0KGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgbWVbcHJvcGVydHldLnggPSB2YWw7XG4gICAgICAgICAgICBtZS5yZXF1ZXN0UmVkcmF3ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFuaW1ZLnN0YXJ0KGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgbWVbcHJvcGVydHldLnkgPSB2YWw7XG4gICAgICAgICAgICBtZS5yZXF1ZXN0UmVkcmF3ID0gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB0aGlzLnN0b3BBbmltYXRpb24gPSBmdW5jdGlvbihhbmltYXRpb24pIHtcbiAgICAgICAgYW5pbWF0aW9uLnN0b3AoKTtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5hbmltYXRpb25zLmluZGV4T2YoYW5pbWF0aW9uKTtcbiAgICAgICAgaWYoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuc3RvcEFuaW1hdGluZyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5hbmltYXRpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNbaV0uc3RvcCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucyA9IFtdO1xuICAgIH07XG59O1xuXG5EcmF3YWJsZS5wcm90b3R5cGUuc2V0SW1hZ2UgPSBmdW5jdGlvbihpbWdTcmMsIGNiKSB7XG4gICAgdGhpcy5pbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICB0aGlzLmltZy5zcmMgPSBpbWdTcmM7XG4gICAgaWYodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nICYmIHRoaXMuc2hvdykge1xuICAgICAgICB0aGlzLmltZy5vbmxvYWQgPSBjYjtcbiAgICB9XG59O1xuRHJhd2FibGUucHJvdG90eXBlLnNldFRleHQgPSBmdW5jdGlvbih0ZXh0KSB7XG4gICAgdGhpcy50ZXh0ID0gW107XG4gICAgdmFyIHR4dCA9IHRleHQuc3BsaXQoJ1xcbicpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdHh0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLnRleHQucHVzaChuZXcgUGFyYWdyYXBoKHR4dFtpXSkpO1xuICAgIH1cbn07XG5cbkRyYXdhYmxlLnByb3RvdHlwZS5pbnRlcmFjdGlvbiA9IGZ1bmN0aW9uKG1vdXNlUG9zLCBzY2FsZSkge1xuICAgIHZhciBtb3VzZURpZmZlcmVuY2UgPSBtb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5wb3Mucm90YXRlKHRoaXMucm90YXRpb24pLm11bChzY2FsZSkpO1xuICAgIHZhciBkaWZmZXJlbmNlID0gMDtcbiAgICBpZih0aGlzLnJhZGl1cyAhPT0gMCkge1xuICAgICAgICBkaWZmZXJlbmNlID0gdGhpcy5yYWRpdXMgKiBzY2FsZTtcbiAgICB9XG4gICAgaWYodGhpcy5zaXplLmxlbmd0aCgpICE9PSAwKSB7XG4gICAgICAgIGRpZmZlcmVuY2UgPSB0aGlzLnNpemUubGVuZ3RoKCkgKiBzY2FsZTtcbiAgICB9XG4gICAgaWYgKG1vdXNlRGlmZmVyZW5jZS5sZW5ndGgoKSA8PSBkaWZmZXJlbmNlICYmIHRoaXMuc2hvdykge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTsiLCJ2YXIgQ2FudmFzID0gZnVuY3Rpb24oeCwgeSwgd2lkdGgsIGhlaWdodCwgZWxlbWVudElkLCBvYmplY3RzKSB7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMubWFyZ2luID0gbmV3IFZlY3RvcjJEKHgsIHkpO1xuICAgIHRoaXMuY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxlbWVudElkKS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgdGhpcy5jdHguY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5jdHguY2FudmFzLmhlaWdodCA9IGhlaWdodDtcblxuICAgIHRoaXMuY2VudGVyID0gbmV3IFZlY3RvcjJEKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMik7XG4gICAgdGhpcy5vZmZzZXQgPSBuZXcgVmVjdG9yMkQoMCwgMCk7XG4gICAgdGhpcy5zY2FsZSA9IDE7XG5cbiAgICB0aGlzLm9iamVjdHMgPSBvYmplY3RzO1xuICAgIHRoaXMuc2VsZWN0ZWQgPSBudWxsO1xuXG4gICAgdGhpcy5zdGFydFBvcyA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB0aGlzLm1vdXNlUG9zID0gbmV3IFZlY3RvcjJEKDAsIDApO1xuICAgIHRoaXMuZm9jdXMgPSBudWxsO1xuXG4gICAgdGhpcy5tb3ZpbmdDYW52YXMgPSBudWxsO1xuXG4gICAgdGhpcy5kcmF3Q2FsbGJhY2sgPSBudWxsO1xuXG4gICAgdmFyIG1lID0gdGhpcztcbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlZHJhdyA9IGZhbHNlO1xuICAgICAgICBtZS5jdHguc2F2ZSgpO1xuICAgICAgICBtZS5jdHgudGV4dEJhc2VsaW5lID0gXCJoYW5naW5nXCI7XG4gICAgICAgIHZhciBjID0gbWUuY2VudGVyLmFkZFZlY3RvcihtZS5vZmZzZXQpO1xuICAgICAgICBtZS5jdHguc2V0VHJhbnNmb3JtKG1lLnNjYWxlLCAwLCAwLCBtZS5zY2FsZSwgYy54LCBjLnkpO1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gbWUub2JqZWN0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiBtZS5vYmplY3RzW2ldLnJlcXVlc3RSZWRyYXcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpZihtZS5vYmplY3RzW2ldLnJlcXVlc3RSZWRyYXcoKSkge1xuICAgICAgICAgICAgICAgICAgICByZWRyYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZihtZS5vYmplY3RzW2ldLnJlcXVlc3RSZWRyYXcpIHtcbiAgICAgICAgICAgICAgICByZWRyYXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG1lLm9iamVjdHNbaV0ucmVxdWVzdFJlZHJhdyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1lLmN0eC5yZXN0b3JlKCk7XG4gICAgICAgIGlmKHJlZHJhdykge1xuICAgICAgICAgICAgbWUuZHJhdygpO1xuICAgICAgICB9XG4gICAgfSwgMTApO1xufTtcblxuQ2FudmFzLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG59O1xuXG5DYW52YXMucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihjYikge1xuICAgIHRoaXMuY2xlYXIoKTtcbiAgICB0aGlzLmN0eC5zYXZlKCk7XG4gICAgdGhpcy5jdHgudGV4dEJhc2VsaW5lID0gXCJoYW5naW5nXCI7XG4gICAgdmFyIGMgPSB0aGlzLmNlbnRlci5hZGRWZWN0b3IodGhpcy5vZmZzZXQpO1xuICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybSh0aGlzLnNjYWxlLCAwLCAwLCB0aGlzLnNjYWxlLCBjLngsIGMueSk7XG4gICAgdmFyIGksIGw7XG4gICAgZm9yKGkgPSAwLCBsID0gdGhpcy5vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZih0eXBlb2YgdGhpcy5vYmplY3RzW2ldLnByZURyYXcgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0c1tpXS5wcmVEcmF3KHRoaXMuY3R4LCB0aGlzLnNjYWxlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IoaSA9IDAsIGwgPSB0aGlzLm9iamVjdHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHRoaXMub2JqZWN0c1tpXS5kcmF3KHRoaXMuY3R4LCB0aGlzLnNjYWxlKTtcbiAgICB9XG4gICAgZm9yKGkgPSAwLCBsID0gdGhpcy5vYmplY3RzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZih0eXBlb2YgdGhpcy5vYmplY3RzW2ldLnBvc3REcmF3ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdHNbaV0ucG9zdERyYXcodGhpcy5jdHgsIHRoaXMuc2NhbGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuY3R4LnJlc3RvcmUoKTtcbiAgICBpZih0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgY2IoKTtcbiAgICB9XG4gICAgaWYodHlwZW9mIHRoaXMuZHJhd0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuZHJhd0NhbGxiYWNrKCk7XG4gICAgfVxufTtcblxuQ2FudmFzLnByb3RvdHlwZS5maW5kT2JqZWN0T25DYW52YXMgPSBmdW5jdGlvbihjYikge1xuICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgIGZvcih2YXIgaSA9IHRoaXMub2JqZWN0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICB2YXIgbyA9IHRoaXMub2JqZWN0c1tpXS5pbnRlcmFjdGlvbih0aGlzLm1vdXNlUG9zLCB0aGlzLnNjYWxlKTtcbiAgICAgICAgaWYobyAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNiKG8pO1xuICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYoIWZvdW5kKSB7XG4gICAgICAgIGNiKG51bGwpO1xuICAgIH1cbn07XG5cbkNhbnZhcy5wcm90b3R5cGUubW92ZVRvQ2VudGVyID0gZnVuY3Rpb24oY2IpIHtcbiAgICBpZih0aGlzLm1vdmluZ0NhbnZhcyA9PT0gbnVsbCkge1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICB0aGlzLm1vdmluZ0NhbnZhcyA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYobWUub2Zmc2V0LnggPT09IDAgJiYgbWUub2Zmc2V0LnkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKG1lLm1vdmluZ0NhbnZhcyk7XG4gICAgICAgICAgICAgICAgbWUubW92aW5nQ2FudmFzID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkID0gbWUub2Zmc2V0O1xuICAgICAgICAgICAgZCA9IGQuZGl2KDMwKTtcbiAgICAgICAgICAgIG1lLm9mZnNldCA9IG1lLm9mZnNldC5zdWJWZWN0b3IoZCk7XG4gICAgICAgICAgICBpZihNYXRoLmFicyhtZS5vZmZzZXQueCkgPD0gMSkge1xuICAgICAgICAgICAgICAgIG1lLm9mZnNldC54ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKE1hdGguYWJzKG1lLm9mZnNldC55KSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgbWUub2Zmc2V0LnkgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodHlwZW9mIGNiID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lLmRyYXcoKTtcbiAgICAgICAgfSwgMTApO1xuICAgIH1cbn07XG5cbkNhbnZhcy5wcm90b3R5cGUuaW50ZXJhY3Rpb25TdGFydCA9IGZ1bmN0aW9uKGUsIGNiKSB7XG4gICAgY2xlYXJJbnRlcnZhbCh0aGlzLm1vdmluZ0NhbnZhcyk7XG4gICAgdGhpcy5tb3ZpbmdDYW52YXMgPSBudWxsO1xuICAgIHRoaXMubW91c2VQb3MgPSBuZXcgVmVjdG9yMkQoZS5wYWdlWCwgZS5wYWdlWSk7XG4gICAgdGhpcy5tb3VzZVBvcyA9IHRoaXMubW91c2VQb3Muc3ViVmVjdG9yKHRoaXMubWFyZ2luKTtcbiAgICB0aGlzLm1vdXNlUG9zID0gdGhpcy5tb3VzZVBvcy5zdWJWZWN0b3IodGhpcy5jZW50ZXIpO1xuICAgIHRoaXMubW91c2VQb3MgPSB0aGlzLm1vdXNlUG9zLnN1YlZlY3Rvcih0aGlzLm9mZnNldCk7XG4gICAgdmFyIG1vdXNlUG9zID0gdGhpcy5tb3VzZVBvcztcbiAgICB2YXIgb2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XG4gICAgdGhpcy5maW5kT2JqZWN0T25DYW52YXMoZnVuY3Rpb24oZm91bmQpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkID0gZm91bmQ7XG4gICAgICAgIGlmKHNlbGVjdGVkID09PSBudWxsKSB7XG4gICAgICAgICAgICBzZWxlY3RlZCA9IFwic2VsZlwiO1xuICAgICAgICAgICAgbW91c2VQb3MgPSBtb3VzZVBvcy5hZGRWZWN0b3Iob2Zmc2V0KTtcbiAgICAgICAgfVxuICAgICAgICBpZih0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNiKHNlbGVjdGVkLCBtb3VzZVBvcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbkNhbnZhcy5wcm90b3R5cGUuaW50ZXJhY3Rpb25Nb3ZlID0gZnVuY3Rpb24oZSwgY2IpIHtcbiAgICB2YXIgbmV3UG9zID0gbmV3IFZlY3RvcjJEKGUucGFnZVgsIGUucGFnZVkpO1xuICAgIG5ld1BvcyA9IG5ld1Bvcy5zdWJWZWN0b3IodGhpcy5tYXJnaW4pO1xuICAgIG5ld1BvcyA9IG5ld1Bvcy5zdWJWZWN0b3IodGhpcy5jZW50ZXIpO1xuICAgIHZhciBkaWZmZXJlbmNlID0gbmV3UG9zLnN1YlZlY3Rvcih0aGlzLm1vdXNlUG9zKTtcbiAgICB0aGlzLm1vdXNlUG9zID0gbmV3UG9zO1xuICAgIGlmKHRoaXMuc2VsZWN0ZWQgPT09IFwic2VsZlwiKSB7XG4gICAgICAgIHRoaXMuc3RhcnRQb3MgPSB0aGlzLnN0YXJ0UG9zLmFkZFZlY3RvcihkaWZmZXJlbmNlKTtcbiAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLm9mZnNldC5hZGRWZWN0b3IoZGlmZmVyZW5jZSk7XG4gICAgICAgIHRoaXMuZHJhdygpO1xuICAgIH0gZWxzZSBpZih0aGlzLnNlbGVjdGVkICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhcnRQb3MgPSB0aGlzLnN0YXJ0UG9zLmFkZFZlY3RvcihkaWZmZXJlbmNlKTtcbiAgICAgICAgdGhpcy5tb3VzZVBvcyA9IHRoaXMubW91c2VQb3Muc3ViVmVjdG9yKHRoaXMub2Zmc2V0KTtcbiAgICAgICAgY2IodGhpcy5zZWxlY3RlZCwgdGhpcy5tb3VzZVBvcy5tdWwoMSAvIHRoaXMuc2NhbGUpLCBkaWZmZXJlbmNlLnN1YlZlY3Rvcih0aGlzLm9mZnNldCkpO1xuICAgIH1cbn07XG5cbkNhbnZhcy5wcm90b3R5cGUuaW50ZXJhY3Rpb25TdG9wID0gZnVuY3Rpb24oY2IpIHtcbiAgICBpZih0aGlzLnN0YXJ0UG9zLmxlbmd0aCgpIDw9IDEwKSB7XG4gICAgICAgIGNiKHRydWUsIHRoaXMuc2VsZWN0ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNiKGZhbHNlLCB0aGlzLnNlbGVjdGVkKTtcbiAgICB9XG4gICAgdGhpcy5zdGFydFBvcyA9IG5ldyBWZWN0b3IyRCgwLCAwKTtcbiAgICB0aGlzLnNlbGVjdGVkID0gbnVsbDtcbiAgICB0aGlzLm1vdXNlUG9zID0gbmV3IFZlY3RvcjJEKDAsIDApO1xufTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
